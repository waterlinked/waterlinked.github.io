{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Documentation Select your device .align { justify-content: center; text-align: center; } .md-typeset .img-fluid { max-width: 100%; height: auto; } Documentation Select your device DVL A125 DVL A50 Underwater GPS G2 Modem-M16 Locator-U1 Locator-A1 Locator-D1 Receiver-D1","title":"Home"},{"location":"#documentation","text":"","title":"Documentation"},{"location":"#select-your-device","text":".align { justify-content: center; text-align: center; } .md-typeset .img-fluid { max-width: 100%; height: auto; }","title":"Select your device"},{"location":"#documentation","text":"","title":"Documentation"},{"location":"#select-your-device","text":"","title":"Select your device"},{"location":"master-d1/","text":"Master-D1 Electronics Description The Master-D1 is a digital acoustic position computing board. It calculates the position of any Locator relative to the position of the Receivers, as well as global position through use of the integrated GPS and IMU (compass). The board supports up to 7 independent D1 devices, 1 A1 device or 1 U1 device. It is accessed through a network interface. The Master-D1 is running its own webserver which exposes an API and a GUI. With its small physical footprint, the board is easily integrated into a topside housing. Benefits Extremely small footprint enabling easy integration in other equipment. Highly robust operation in areas with reflections (shallow water, around installations etc.) Wiring interface Make sure the LED is ON for all D1 interfaces that are connected. The digital D1 interfaces all have a separate LED to show if the communication link is in lock. When a Receiver-D1 or Locator-D1 cable is connected to the master board, the corresponding LED should be continuously ON. The silkscreen marking of the channel LEDs on the PCB are 0-indexed. The channel labels on the housing are 1-index. We thus get following LED channel mapping: Interface LED Receiver, channel 1 0 Receiver, channel 2 1 Receiver, channel 3 2 Receiver, channel 4 3 Locator-D1 6 The LED on the Locator-A1 interface is not in use. Dimensions The diagrams below shows the mechanical dimensions of the Master-D1 electronics. Setup Datasheet Datasheet","title":"Master-D1"},{"location":"master-d1/#master-d1-electronics","text":"","title":"Master-D1 Electronics"},{"location":"master-d1/#description","text":"The Master-D1 is a digital acoustic position computing board. It calculates the position of any Locator relative to the position of the Receivers, as well as global position through use of the integrated GPS and IMU (compass). The board supports up to 7 independent D1 devices, 1 A1 device or 1 U1 device. It is accessed through a network interface. The Master-D1 is running its own webserver which exposes an API and a GUI. With its small physical footprint, the board is easily integrated into a topside housing.","title":"Description"},{"location":"master-d1/#benefits","text":"Extremely small footprint enabling easy integration in other equipment. Highly robust operation in areas with reflections (shallow water, around installations etc.)","title":"Benefits"},{"location":"master-d1/#wiring-interface","text":"Make sure the LED is ON for all D1 interfaces that are connected. The digital D1 interfaces all have a separate LED to show if the communication link is in lock. When a Receiver-D1 or Locator-D1 cable is connected to the master board, the corresponding LED should be continuously ON. The silkscreen marking of the channel LEDs on the PCB are 0-indexed. The channel labels on the housing are 1-index. We thus get following LED channel mapping: Interface LED Receiver, channel 1 0 Receiver, channel 2 1 Receiver, channel 3 2 Receiver, channel 4 3 Locator-D1 6 The LED on the Locator-A1 interface is not in use.","title":"Wiring interface"},{"location":"master-d1/#dimensions","text":"The diagrams below shows the mechanical dimensions of the Master-D1 electronics.","title":"Dimensions"},{"location":"master-d1/#setup","text":"","title":"Setup"},{"location":"master-d1/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"dvl/axes/","text":"Axes For both the DVL-A50 and the DVL-A125. Velocities and dead reckoning output uses the vehicle frame. By default the vehicle frame is the same as the body frame, but can be adjusted to allow flexible mounting on the vehicle. Body frame x (Forward) y (Right) z (Down) Vehicle frame x (Vehicle) y (Vehicle) x (Body) y (Body) \u03b8 Body frame The body frame axes of the DVL are as follows: X axis is pointing forward (LED is forward, cable backward) Y axis is pointing right Z axis is pointing down (mounting holes are up, transducers are down) Origin is the center of the DVL and 25mm/30mm from the backplate. See A125 and A50 for their dimensions. By default, the body frame and vehicle frame is the same and align with the DVL's frame for dead reckoning. Vehicle frame The DVL can be mounted at an angle to the forward direction of a vehicle to which it is attached. To be precise, the clockwise angle \u03b8 in degrees around the Z axis (i.e. in the X-Y plane) from the forward axis of the vehicle to the forward axis of the DVL can be entered as a 'mounting rotation offset' in the GUI , or via the TCP or serial protocols . The DVL will then output data in the vehicle frame obtained by rotating the DVL body frame anti-clockwise around the Z-axis by \u03b8 degrees: the X-axis of the velocities outputted by the DVL will be aligned with the forward axis of the vehicle, and, at time zero, the X-axis of the DVL's frame for dead reckoning will be aligned with the forward axis of the vehicle. For example: If the DVL is mounted back-to-front (cable aligned with the forward axis of the vehicle), the mounting rotation offset should be set to 180 degrees. If the DVL is mounted with the LED at 90 degrees clockwise from the forward axis of the vehicle, the mounting rotation offset should be set to 90 degrees.","title":"Axes"},{"location":"dvl/axes/#axes","text":"For both the DVL-A50 and the DVL-A125. Velocities and dead reckoning output uses the vehicle frame. By default the vehicle frame is the same as the body frame, but can be adjusted to allow flexible mounting on the vehicle. Body frame x (Forward) y (Right) z (Down) Vehicle frame x (Vehicle) y (Vehicle) x (Body) y (Body) \u03b8","title":"Axes"},{"location":"dvl/axes/#body-frame","text":"The body frame axes of the DVL are as follows: X axis is pointing forward (LED is forward, cable backward) Y axis is pointing right Z axis is pointing down (mounting holes are up, transducers are down) Origin is the center of the DVL and 25mm/30mm from the backplate. See A125 and A50 for their dimensions. By default, the body frame and vehicle frame is the same and align with the DVL's frame for dead reckoning.","title":"Body frame"},{"location":"dvl/axes/#vehicle-frame","text":"The DVL can be mounted at an angle to the forward direction of a vehicle to which it is attached. To be precise, the clockwise angle \u03b8 in degrees around the Z axis (i.e. in the X-Y plane) from the forward axis of the vehicle to the forward axis of the DVL can be entered as a 'mounting rotation offset' in the GUI , or via the TCP or serial protocols . The DVL will then output data in the vehicle frame obtained by rotating the DVL body frame anti-clockwise around the Z-axis by \u03b8 degrees: the X-axis of the velocities outputted by the DVL will be aligned with the forward axis of the vehicle, and, at time zero, the X-axis of the DVL's frame for dead reckoning will be aligned with the forward axis of the vehicle. For example: If the DVL is mounted back-to-front (cable aligned with the forward axis of the vehicle), the mounting rotation offset should be set to 180 degrees. If the DVL is mounted with the LED at 90 degrees clockwise from the forward axis of the vehicle, the mounting rotation offset should be set to 90 degrees.","title":"Vehicle frame"},{"location":"dvl/bluerov-integration-dvl-ugps/","text":"Optimizing Performance when concurrently using our DVL and UGPS Systems Capabilities of the DVL as a Standalone System The Water Linked DVL can provide accurate velocities relative to the seabed. It has a relatively high update rate and dynamic. For the calculation of an absolute position, the velocities have to be integrated over time with the help of inertial measurement unit (IMU) data. Furthermore, the user has to specify a starting position of this dead-reckoning-algorithm. Alternatively a normal GPS can be used to initialize the position prior to a dive. One advantage of using a DVL only is that no infrastructure outside the ROV (such as antennas, beacons, etc.) is needed. As a downside, small errors in sensor values accumulate over time and the position estimate drifts from the actual position. A typical use case for the DVL is station keeping even in water currents. It also helps to track the approximate ROV position on a map and enables simple autonomous missions. Capabilities of the Underwater GPS as a Standalone System The Water Linked Underwater GPS is able to provide an absolute position below water. It is based on the combination of a standard GPS to measure the Topside position and the Short Baseline (SBL) acoustic positioning to determine the ROV/locator position relative to the Topside. The characteristic of this combined position estimate is that it is global, with little to no drift over time under the right conditions. The update rate is in general lower compared to the DVL. A typical use case for using the Underwater GPS by itself is to visualize the ROV position on a map for manual control and finding a specific geolocation below water. Enhanced Functionality with Combined DVL and UGPS Integration When both sensor types are combined in a good manner they can compensate each other's weak sides. For instance the UGPS helps to compensate for the position drift of the DVL over time. The DVL on the other hand increases the update rate of the position, which is necessary for better control. This is particularly useful if you want to use the positioning not only for visualization during manual operation or position holding but longer autonomous missions (e.g. waypoint navigation). Below section \"Mode DVL+UGPS\" describes how to enable this in the BlueROV control system. Mode \"DVL+UGPS\": Fusing the data of Underwater GPS and DVL for a position estimate of the BlueROV The BlueROV uses a highly-customizable autopilot Ardusub . One part of that autopilot is an Extended Kalman filter, which is able to combine inputs from all types of sensors (gyroscope, accelerometer, compass, pressure sensor, GPS, DVL, etc.) to calculate a position estimate. This is then used to either simply show the position on a map in manual mode or as part of a feedback loop to actively control the ROV. This data fusion algorithm is not part of a Water Linked product but is executed in the BlueROV control system. So the user is in full control of the parameters and used algorithm. Before successful sensor fusion of Underwater GPS and DVL the following conditions must be met: A BlueROV running BlueOS with a version 1.1.0 (stable) or newer. The DVL is installed, configured and tested successfully. Guides can be found here and on the Blue Robotics website Make sure you are running version 1.0.7 or newer of the BlueOS Water Linked DVL extension . The extension version can be checked / updated in BlueOS by going to Extensions > Installed. The version is shown next to the extension name, see below figure. The Underwater GPS is installed, configured and tested successfully. The latest UGPS integration-guide can be found here . Make sure you are running version 1.0.7 or newer of the BlueOS Water Linked UGPS extension . The accelerometer, gyroscope, compass and pressure sensor must be calibrated: Calibration of all sensors can be performed from QGroundControl. Detailed steps are described in the BlueROV Software Setup Make sure that the compass calibration was successful by comparing the ROV orientation shown in the map in QGroundControl to the actual ROV orientation. Land-marks like a coast-line or an analogue compass can help. Note When you want to use the position estimate for control of the ROV and the UGPS Topside is on land, it is highly recommended setting up the Underwater GPS to use static position and static heading mode. Alternatively when the UGPS Topside position is not static (on a boat or similar) you need to input heading and position data from an external GPS compass. Details can be found here . If you don't follow this advice, the position provided by the Underwater GPS will have more noise (\"jump\" too much) and also drift over time. This might cause the position hold mode to not work properly. The Underwater GPS together with the BlueOS UGPS extension provide a standard deviation of the global position to the autopilot and the Kalman filter. The Kalman filter uses this standard deviation to weight the provided position in relation to other sensor inputs. The standard deviation is currently optimized for static position and static heading mode. The steps to enable sensor fusion are: To enable fusion of Underwater GPS and DVL, enable both the \"Water Linked DVL\"-extension and \"Water Linked UGPS\"-extension in the extensions manager. You see that they are running when an uptime is shown. Open the interface of the DVL extension and click the button \"Load parameters for DVL+UGPS\". This will set parameters for the Kalman filter to consider both sensors. Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV. Restart the autopilot for the parameter changes to take effect. It is not necessary to reboot BlueOS. If both Underwater GPS and DVL are connected, it is not necessary to set the vehicle position manually in the DVL extension. Now both sensors should be considered for the position estimate of the ROV. You can test this in a simple way by switching the ROV to position hold mode around close (e.g. 3 m) to the UGPS-antenna and in sight. The ROV should stand still. When you now slowly turn the UGPS antenna, the ROV should follow your rotation. Alternative mode \"DVL only\": How to base the ROV position estimate only on the DVL while the Underwater GPS is running This mode can be useful when you experience issues with sensor fusion (Mode \"DVL+UGPS\" above) or not all the described conditions in above section are met. Otherwise, we recommend using Mode \"DVL+UGPS\". In this configuration the BlueROV will base its position estimate updates on velocity input from the DVL as well as accelerometer, gyroscope, compass and pressure sensor but not the Underwater GPS. Although the Underwater GPS is connected and running it will only be used to initialize the global ROV position at the beginning. QGroundControl (or the new Cockpit) will show the ROV position estimate based on the DVL only while the Underwater GPS GUI will show the position based on the Underwater GPS. Note The setup procedure below is very similar to when you only use the DVL without a running Underwater GPS. That case is described here . Enable both the \"Water Linked DVL\"-extension and \"Water Linked UGPS\"-extension in the extensions manager. You see that they are running when an uptime is shown. Make sure you use the latest versions of both extensions. Open the interface of the DVL-extension and click the button \"Load parameters for DVL\". This will set parameters for the Kalman filter to ignore the Underwater GPS input. Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV. Restart the autopilot for the parameter changes to take effect. It is not necessary to reboot BlueOS. If both Underwater GPS and DVL are connected, it is not necessary to set the vehicle position manually in the DVL extension. FAQ for sensor fusion of Underwater GPS and DVL How do I start an autonomous mission? Blue Robotics wrote a guide on how to start an autonomous mission with the DVL only . The steps are the same when you use DVL and Underwater GPS together after you followed above guide for Mode \"DVL+UGPS\". At the time of writing (November 2024) QGroundControl is still more suited for advanced usage like missions compared to the new Cockpit. Which mode am I currently using? Is Underwater GPS input enabled for sensor fusion or not? You can check if the correct parameters are set by navigating to \"Autopilot Parameters\" in BlueOS. It shows a searchable list of all currently set parameters. Below table lists both default values of the parameters for two Ardusub versions and which values the DVL extension sets when you click on the respective buttons. The parameter set by the Underwater GPS extension is listed, too. Parameters can be \"not set\" which is shown as an empty cell in the table. Parameter Ardusub 4.5.0 default Ardusub 4.1.2 default DVL Extension, Mode \"DVL+UGPS\" DVL Extension, Mode \"DVL only\" UGPS extension AHRS_EKF_TYPE 3 ekf3 3 ekf3 3 ekf3 3 ekf3 EK2_ENABLE 0 disabled 0 disabled 0 disabled EK3_ENABLE 1 enabled 1 enabled 1 enabled 1 enabled VISO_TYPE 1 mavlink 0 none 1 mavlink 1 mavlink RNGFND1_TYPE 10 mavlink 10 mavlink 10 mavlink 10 mavlink EK3_GPS_TYPE 0 v=3d-pos=2d 3 no-gps EK3_SRC1_POSXY 3 gps 3 gps 3 gps 6 external-nav EK3_SRC1_VELXY 3 gps 3 gps 6 external-nav 6 external-nav EK3_SRC1_POSZ 1 baro 1 baro 1 baro 1 baro GPS_TYPE 1 auto 1 auto 14 mavlink Documentation for Ardusub parameters can be found here . Some parameters in Ardusub require a reboot of the autopilot to take effect while others take effect immediately. If in doubt, reboot the autopilot. The ROV moves back and forth in position hold mode. What is wrong? When the ROV holds its position well in mode \"DVL only\" and starts moving back and forth in mode \"DVL+UGPS\" this is due to more than expected noise of the UGPS position. Make sure to use static position and heading of the Underwater GPS Topside for best results. How does the sensor fusion work? This section is for advanced users and developers who try to understand what happens behind the scenes. It contains links to documentation of the relevant open source projects and describes how Water Linked products interact. The DVL and UGPS extensions are sending messages following the mavlink-protocol to the autopilot, e.g. the message GPS_INPUT. The ROV-specific autopilot is called Ardusub , which is part of a larger project Ardupilot The extended Kalman filter is described in the Ardupilot documentation . The EKF3 implementation is used by default. In the current version of Ardusub together with the navigator flight controller only one EKF-lane is used. How the BlueOS Water Linked DVL extension interacts with the autopilot This figure illustrates which events trigger which function calls and which mavlink messages: When the user sets the vehicle location on the extension map the first time, the origin of the autopilot global position estimate is set (SET_GPS_GLOBAL_ORIGIN). When the latter is already set, the position estimate is updated with GLOBAL_VISION_POSITION_ESTIMATE. The main input from the DVL to the autopilot is the mavlink message VISION_POSITION_DELTA. It contains the change of position and attitude since the last message in body frame of the ROV together with the time interval since the last measurement. This corresponds directly to velocities and angular rates. The figure of merit (FOM) provided by the DVL is scaled to a confidence value in percent. The DVL-internal dead-reckoning exposed through the position_local-TCP-packet is currently not used on a BlueROV. A function in the extension is implemented, but it is disabled. So GLOBAL_VISION_POSITION_ESTIMATE messages are sent based on DVL-measurements. The attitude measured by the DVL-IMU (current_attitude) is sent in the VISION_POSITION_DELTA-message. The attitude values sent in VISION_POSITION_DELTA are currently not considered by the Ardusub autopilot. More details can be found in the source code in the GitHub repository . How the BlueOS Water Linked UGPS extension interacts with the autopilot This is an overview figure of the sent mavlink messages: The main input from the Underwater GPS to the autopilot is the mavlink message GPS_INPUT. The GitHub README provides more details.","title":"DVL with UGPS for BlueROV2"},{"location":"dvl/bluerov-integration-dvl-ugps/#optimizing-performance-when-concurrently-using-our-dvl-and-ugps-systems","text":"","title":"Optimizing Performance when concurrently using our DVL and UGPS Systems"},{"location":"dvl/bluerov-integration-dvl-ugps/#capabilities-of-the-dvl-as-a-standalone-system","text":"The Water Linked DVL can provide accurate velocities relative to the seabed. It has a relatively high update rate and dynamic. For the calculation of an absolute position, the velocities have to be integrated over time with the help of inertial measurement unit (IMU) data. Furthermore, the user has to specify a starting position of this dead-reckoning-algorithm. Alternatively a normal GPS can be used to initialize the position prior to a dive. One advantage of using a DVL only is that no infrastructure outside the ROV (such as antennas, beacons, etc.) is needed. As a downside, small errors in sensor values accumulate over time and the position estimate drifts from the actual position. A typical use case for the DVL is station keeping even in water currents. It also helps to track the approximate ROV position on a map and enables simple autonomous missions.","title":"Capabilities of the DVL as a Standalone System"},{"location":"dvl/bluerov-integration-dvl-ugps/#capabilities-of-the-underwater-gps-as-a-standalone-system","text":"The Water Linked Underwater GPS is able to provide an absolute position below water. It is based on the combination of a standard GPS to measure the Topside position and the Short Baseline (SBL) acoustic positioning to determine the ROV/locator position relative to the Topside. The characteristic of this combined position estimate is that it is global, with little to no drift over time under the right conditions. The update rate is in general lower compared to the DVL. A typical use case for using the Underwater GPS by itself is to visualize the ROV position on a map for manual control and finding a specific geolocation below water.","title":"Capabilities of the Underwater GPS as a Standalone System"},{"location":"dvl/bluerov-integration-dvl-ugps/#enhanced-functionality-with-combined-dvl-and-ugps-integration","text":"When both sensor types are combined in a good manner they can compensate each other's weak sides. For instance the UGPS helps to compensate for the position drift of the DVL over time. The DVL on the other hand increases the update rate of the position, which is necessary for better control. This is particularly useful if you want to use the positioning not only for visualization during manual operation or position holding but longer autonomous missions (e.g. waypoint navigation). Below section \"Mode DVL+UGPS\" describes how to enable this in the BlueROV control system.","title":"Enhanced Functionality with Combined DVL and UGPS Integration"},{"location":"dvl/bluerov-integration-dvl-ugps/#mode-dvlugps-fusing-the-data-of-underwater-gps-and-dvl-for-a-position-estimate-of-the-bluerov","text":"The BlueROV uses a highly-customizable autopilot Ardusub . One part of that autopilot is an Extended Kalman filter, which is able to combine inputs from all types of sensors (gyroscope, accelerometer, compass, pressure sensor, GPS, DVL, etc.) to calculate a position estimate. This is then used to either simply show the position on a map in manual mode or as part of a feedback loop to actively control the ROV. This data fusion algorithm is not part of a Water Linked product but is executed in the BlueROV control system. So the user is in full control of the parameters and used algorithm. Before successful sensor fusion of Underwater GPS and DVL the following conditions must be met: A BlueROV running BlueOS with a version 1.1.0 (stable) or newer. The DVL is installed, configured and tested successfully. Guides can be found here and on the Blue Robotics website Make sure you are running version 1.0.7 or newer of the BlueOS Water Linked DVL extension . The extension version can be checked / updated in BlueOS by going to Extensions > Installed. The version is shown next to the extension name, see below figure. The Underwater GPS is installed, configured and tested successfully. The latest UGPS integration-guide can be found here . Make sure you are running version 1.0.7 or newer of the BlueOS Water Linked UGPS extension . The accelerometer, gyroscope, compass and pressure sensor must be calibrated: Calibration of all sensors can be performed from QGroundControl. Detailed steps are described in the BlueROV Software Setup Make sure that the compass calibration was successful by comparing the ROV orientation shown in the map in QGroundControl to the actual ROV orientation. Land-marks like a coast-line or an analogue compass can help. Note When you want to use the position estimate for control of the ROV and the UGPS Topside is on land, it is highly recommended setting up the Underwater GPS to use static position and static heading mode. Alternatively when the UGPS Topside position is not static (on a boat or similar) you need to input heading and position data from an external GPS compass. Details can be found here . If you don't follow this advice, the position provided by the Underwater GPS will have more noise (\"jump\" too much) and also drift over time. This might cause the position hold mode to not work properly. The Underwater GPS together with the BlueOS UGPS extension provide a standard deviation of the global position to the autopilot and the Kalman filter. The Kalman filter uses this standard deviation to weight the provided position in relation to other sensor inputs. The standard deviation is currently optimized for static position and static heading mode. The steps to enable sensor fusion are: To enable fusion of Underwater GPS and DVL, enable both the \"Water Linked DVL\"-extension and \"Water Linked UGPS\"-extension in the extensions manager. You see that they are running when an uptime is shown. Open the interface of the DVL extension and click the button \"Load parameters for DVL+UGPS\". This will set parameters for the Kalman filter to consider both sensors. Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV. Restart the autopilot for the parameter changes to take effect. It is not necessary to reboot BlueOS. If both Underwater GPS and DVL are connected, it is not necessary to set the vehicle position manually in the DVL extension. Now both sensors should be considered for the position estimate of the ROV. You can test this in a simple way by switching the ROV to position hold mode around close (e.g. 3 m) to the UGPS-antenna and in sight. The ROV should stand still. When you now slowly turn the UGPS antenna, the ROV should follow your rotation.","title":"Mode \"DVL+UGPS\": Fusing the data of Underwater GPS and DVL for a position estimate of the BlueROV"},{"location":"dvl/bluerov-integration-dvl-ugps/#alternative-mode-dvl-only-how-to-base-the-rov-position-estimate-only-on-the-dvl-while-the-underwater-gps-is-running","text":"This mode can be useful when you experience issues with sensor fusion (Mode \"DVL+UGPS\" above) or not all the described conditions in above section are met. Otherwise, we recommend using Mode \"DVL+UGPS\". In this configuration the BlueROV will base its position estimate updates on velocity input from the DVL as well as accelerometer, gyroscope, compass and pressure sensor but not the Underwater GPS. Although the Underwater GPS is connected and running it will only be used to initialize the global ROV position at the beginning. QGroundControl (or the new Cockpit) will show the ROV position estimate based on the DVL only while the Underwater GPS GUI will show the position based on the Underwater GPS. Note The setup procedure below is very similar to when you only use the DVL without a running Underwater GPS. That case is described here . Enable both the \"Water Linked DVL\"-extension and \"Water Linked UGPS\"-extension in the extensions manager. You see that they are running when an uptime is shown. Make sure you use the latest versions of both extensions. Open the interface of the DVL-extension and click the button \"Load parameters for DVL\". This will set parameters for the Kalman filter to ignore the Underwater GPS input. Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV. Restart the autopilot for the parameter changes to take effect. It is not necessary to reboot BlueOS. If both Underwater GPS and DVL are connected, it is not necessary to set the vehicle position manually in the DVL extension.","title":"Alternative mode \"DVL only\": How to base the ROV position estimate only on the DVL while the Underwater GPS is running"},{"location":"dvl/bluerov-integration-dvl-ugps/#faq-for-sensor-fusion-of-underwater-gps-and-dvl","text":"","title":"FAQ for sensor fusion of Underwater GPS and DVL"},{"location":"dvl/bluerov-integration-dvl-ugps/#how-do-i-start-an-autonomous-mission","text":"Blue Robotics wrote a guide on how to start an autonomous mission with the DVL only . The steps are the same when you use DVL and Underwater GPS together after you followed above guide for Mode \"DVL+UGPS\". At the time of writing (November 2024) QGroundControl is still more suited for advanced usage like missions compared to the new Cockpit.","title":"How do I start an autonomous mission?"},{"location":"dvl/bluerov-integration-dvl-ugps/#which-mode-am-i-currently-using-is-underwater-gps-input-enabled-for-sensor-fusion-or-not","text":"You can check if the correct parameters are set by navigating to \"Autopilot Parameters\" in BlueOS. It shows a searchable list of all currently set parameters. Below table lists both default values of the parameters for two Ardusub versions and which values the DVL extension sets when you click on the respective buttons. The parameter set by the Underwater GPS extension is listed, too. Parameters can be \"not set\" which is shown as an empty cell in the table. Parameter Ardusub 4.5.0 default Ardusub 4.1.2 default DVL Extension, Mode \"DVL+UGPS\" DVL Extension, Mode \"DVL only\" UGPS extension AHRS_EKF_TYPE 3 ekf3 3 ekf3 3 ekf3 3 ekf3 EK2_ENABLE 0 disabled 0 disabled 0 disabled EK3_ENABLE 1 enabled 1 enabled 1 enabled 1 enabled VISO_TYPE 1 mavlink 0 none 1 mavlink 1 mavlink RNGFND1_TYPE 10 mavlink 10 mavlink 10 mavlink 10 mavlink EK3_GPS_TYPE 0 v=3d-pos=2d 3 no-gps EK3_SRC1_POSXY 3 gps 3 gps 3 gps 6 external-nav EK3_SRC1_VELXY 3 gps 3 gps 6 external-nav 6 external-nav EK3_SRC1_POSZ 1 baro 1 baro 1 baro 1 baro GPS_TYPE 1 auto 1 auto 14 mavlink Documentation for Ardusub parameters can be found here . Some parameters in Ardusub require a reboot of the autopilot to take effect while others take effect immediately. If in doubt, reboot the autopilot.","title":"Which mode am I currently using? Is Underwater GPS input enabled for sensor fusion or not?"},{"location":"dvl/bluerov-integration-dvl-ugps/#the-rov-moves-back-and-forth-in-position-hold-mode-what-is-wrong","text":"When the ROV holds its position well in mode \"DVL only\" and starts moving back and forth in mode \"DVL+UGPS\" this is due to more than expected noise of the UGPS position. Make sure to use static position and heading of the Underwater GPS Topside for best results.","title":"The ROV moves back and forth in position hold mode. What is wrong?"},{"location":"dvl/bluerov-integration-dvl-ugps/#how-does-the-sensor-fusion-work","text":"This section is for advanced users and developers who try to understand what happens behind the scenes. It contains links to documentation of the relevant open source projects and describes how Water Linked products interact. The DVL and UGPS extensions are sending messages following the mavlink-protocol to the autopilot, e.g. the message GPS_INPUT. The ROV-specific autopilot is called Ardusub , which is part of a larger project Ardupilot The extended Kalman filter is described in the Ardupilot documentation . The EKF3 implementation is used by default. In the current version of Ardusub together with the navigator flight controller only one EKF-lane is used.","title":"How does the sensor fusion work?"},{"location":"dvl/bluerov-integration-dvl-ugps/#how-the-blueos-water-linked-dvl-extension-interacts-with-the-autopilot","text":"This figure illustrates which events trigger which function calls and which mavlink messages: When the user sets the vehicle location on the extension map the first time, the origin of the autopilot global position estimate is set (SET_GPS_GLOBAL_ORIGIN). When the latter is already set, the position estimate is updated with GLOBAL_VISION_POSITION_ESTIMATE. The main input from the DVL to the autopilot is the mavlink message VISION_POSITION_DELTA. It contains the change of position and attitude since the last message in body frame of the ROV together with the time interval since the last measurement. This corresponds directly to velocities and angular rates. The figure of merit (FOM) provided by the DVL is scaled to a confidence value in percent. The DVL-internal dead-reckoning exposed through the position_local-TCP-packet is currently not used on a BlueROV. A function in the extension is implemented, but it is disabled. So GLOBAL_VISION_POSITION_ESTIMATE messages are sent based on DVL-measurements. The attitude measured by the DVL-IMU (current_attitude) is sent in the VISION_POSITION_DELTA-message. The attitude values sent in VISION_POSITION_DELTA are currently not considered by the Ardusub autopilot. More details can be found in the source code in the GitHub repository .","title":"How the BlueOS Water Linked DVL extension interacts with the autopilot"},{"location":"dvl/bluerov-integration-dvl-ugps/#how-the-blueos-water-linked-ugps-extension-interacts-with-the-autopilot","text":"This is an overview figure of the sent mavlink messages: The main input from the Underwater GPS to the autopilot is the mavlink message GPS_INPUT. The GitHub README provides more details.","title":"How the BlueOS Water Linked UGPS extension interacts with the autopilot"},{"location":"dvl/bluerov-integration/","text":"Introduction The Water Linked DVLs are designed to integrate with most ROVs and AUVs through ethernet and/or a serial interface (UART). To minimize the time between receipt of a DVL and having it up and running, the DVLs are shipped with an attached I/O interface, providing ease of connectivity with power, ethernet and serial. However, for most ROVs and AUVs, the DVL has to be integrated with the on-board electronics through a penetrator or a subsea connector. This guide details how the DVL-A50 can be integrated with the BlueROV2. Exactly the same procedure can be carried out for the DVL-A125 . Parts and tools What parts and tools needed depends on whether you intend to permanently attach the DVL-A50 to the BlueROV2, have it semi-permanently attached, or use a subsea connector for quick installation/removal. This guide details how to permanently attach the DVL-A50 to a BlueROV2. You will need DVL-A50 BlueROV2 Small ethernet switch. The one pictured here is from BlueRobotics , and ideal for use in the BlueROV2. DVL-A50 Bracket . This is optional, but protects the DVL-A50 and allows for down to 0 cm minimum altitude. You will also need: Hex Key Set from Blue Robotics Bulkhead Wrench from Blue Robotics Plug Wrench from Blue Robotics (Optional) Cable Jacket Stripper from Blue Robotics M10-7.5mm-HC WetLink Penetrator from Blue Robotics Silicone grease 5 mm universal drill bit 2 x M5x12 mm stainless steel pan head screws (included with BlueROV2 mounting bracket) 4 x M3x4 mm stainless steel countersunk flat head screws (included with BlueROV2 mounting bracket) Soldering iron Solder wire Wire cutter Tweezers or nose pliers Solder wick and/or desoldering pump Utility knife Wire stripping tool Zip ties 4 x 30 cm (12\") wires (options discussed under Connect DVL-A50 and BlueROV2 ). If possible, use 2 x red and 2 x black wires. 15 cm (6\") ethernet cable Preparation Separate I/O Interface from DVL-A50 The first thing you will have to do before going about any of the installation options is to cut the DVL-A50 cable, separating the I/O Interface board. We recommend you do so near the end where the I/O Interface board is to begin with. Warning The DVL-A50 cable is permanently attached and non-replaceable inside the DVL-A50. If you cut the cable too short you will either have to splice the cable with another cable, or order a new DVL-A50. Measure twice, cut once! Attaching the BlueROV2 mounting bracket Attach the BlueROV2 mounting bracket to the DVL-A50 using the 4 x M3x6 screws provided with the DVL-A50 BlueROV2 Integration Kit. The BlueROV2 mounting bracket can be attached to the BlueROV2 in one of the 2 places indicated in the image below (standard BlueROV2). Note In this configuration the DVL-A50 is pointing backwards meaning both the x-direction and the y-direction are flipped. Multiplying the velocity data in x- and y-direction with -1 will flip coordinates back again to the same perspective frame of the BlueROV2. If your BlueROV2 has the Heavy Configuration upgrade, the BlueROV2 mounting bracket can be attached such that the DVL-A50 is within the BlueROV2 frame. This allows for a minimum working distance of 0 cm for the DVL-A50. Mark 2 hole positions on the BlueROV2 frame for attaching the BlueROV2 mounting bracket and drill through the frame using a 5 mm universal drill bit. Check that the BlueROV2 mounting bracket will attach properly to the BlueROV2 frame using 2 x M5x16 mm screws. No need to secure the bracket in place as more work must be done on the cable end. Final cable lenght With the DVL-A50 now attached to the BlueROV2 frame, find the appropriate cable length needed by leading the cable back to the penetrator end cap of the BlueROV2 and add the length of the electronics enclosure (30 cm) to the cable. This is the minimum required cable length. Tip We recommend adding at least another 30 cm to the cable to provide enough service loop in case the penetrator fails or the leads get damaged. Cut the cable to the final length. Installation The DVL-A50 will be permanently installed on the BlueROV2 with the I/O Interface board (supplied with the DVL-A50). I/O Interface preparation To prepare the I/O Interface Board you will need: Soldering iron Wire cutter Tweezers or nose pliers Solder wick and/or desoldering pump Cut off the zip tie holding the cable onto the I/O Interface board. Cut off the individual wires soldered onto the I/O Interface board. Leave enough wire to grab onto with tweezers or nose pliers. Desolder all the cut wires. Use solder wick and/or a desoldering pump to remove any excess solder from the now desoldered through hole pads. Warning Using too much force or heat may delaminate the I/O Interface PCB, rendering the I/O Interface board useless. Adding a penetrator To add a penetrator to the cable you will need: Plug Wrench from Blue Robotics M10-7.5mm-HC WetLink Penetrator from Blue Robotics (Optional) Cable Jacket Stripper from Blue Robotics Utility knife Strip off 25-30 cm of the cable jacket using a cable jacket stripper, a utility knife or a sharp blade. Take care not to cut into the leads inside the cable. Blue Robotics has a great guide on cable stripping here . Follow the WetLink Penetrator Assembly Guide by BlueRobotics to add a penetrator on the DVL-A50 cable. Removing a blank penetrator To remove a blank penetrator from your BlueROV2, you will need the following tools: 2.5 mm hex driver Bulkhead Wrench from Blue Robotics To ensure your ROV is completely powered off, please remove the battery completely from the 3\u201d enclosure and place to the side. (Optional) Remove the fairings and buoyancy blocks by removing the self-tapping screws that hold the fairings to the frame. Remove the 4\u201d electronics enclosure from the ROV by removing the M3x16 screws that mount the enclosure to the ROV cradle. Remove the Vent Plug from the Vent Penetrator Bolt on the electronics enclosure. Remove the 4\u2033 tube and forward dome assembly from the rear end cap. Remove a blank penetrator, sush as the one pictured below, from the 4\u201d End Cap with the penetrator wrench. Install DVL-A50 penetrator Note The following images shows the old penetrator from BlueRobotics. The procedure is the same with the new WetLink penetrators. To install DVL-A50 into the end cap, you will need the following parts and tools: DVL-A50 with installed cable penetrator Penetrator O-ring (included with M10-7.5mm-HC WetLink Penetrator from Blue Robotics) Bulkhead Wrench from Blue Robotics Silicone Grease Isopropyl Alcohol Wipe Wipe the exterior surface of the electronics enclosure end cap clean with isopropyl alcohol or isopropyl alcohol wipes, and make sure it is free of any particles in the areas where the penetrator O-ring will sit. Remove the O-ring from the bag Install the O-ring onto the DVL-A50 cable penetrator and apply silicone grease to it. Push the wires throught the hole in the end cap where you previously removed a blank penetrator from. Tip Since the penetrator has to be screwed on, adding a bit of tape around the end of the wires helps them stay untangles while turning. Also twisting the DVL-A50 cable in a clock-wise direction will aid in screwing on the penetrator. Screw on the DVL-A50 cable penetrator to the end cap. Tighten to finger tight, then use the penetrator wrench to tighten it an additional ~1/16 of a turn. If you can\u2019t loosen it with your fingers, it is tight enough. Reinstall I/O Interface Board To reinstall the I/O Interface Board onto the DVL-A50 cable you will need: Wire stripping tool Soldering iron Solder wire Zip tie With the DVL-A50 penetrator now through the 4\" End Cap, strip off 2-3 mm of the ends of all the wires. Wire sizes are detailed in the table below. The blue pair can be removed as it is not used for the DVL-A50. Warning The two wires of a twisted wire pair are fully colored and fully white (the table below shows the white wires having a stripe of the complementing color, this is not the reality and only for reference). Keep track of which white wire is paired with which colored wire! Also note that the wiring in the images below differ from that of the table below. Please follow the table! Re-solder the leads of the DVL-A50 cable to the I/O Interface board following the table below: DVL-A50 cable I/O Interface pad Function Diameter (mm) AWG# GND Power ground 0.6 mm 22 VIN Power in 0.6 mm 22 TD+ Ethernet TX+ 0.6 mm 22 TD- Ethernet TX- 0.4 mm 26 RD+ Ethernet RX+ 0.4 mm 26 RD- Ethernet RX- 0.4 mm 26 TX Serial UART TX 0.4 mm 26 RX Serial UART RX 0.4 mm 26 Zip tie the soldered wires to the I/O Interface board to protect the solder joints. Connect to BlueROV2 To connect the DVL-A50 to the BlueROV2 you will need: 2 x 30 cm (12\") wires for power to the DVL-A50 BlueRobotics ethernet switch 6\" ethernet cable Zip ties To provide power to the DVL-A50 you can either use (A) a 2-pin Molex MicroFit3.0 cable assembly , (B) solder on a W\u00fcrth screw terminal , or (C) directly solder on 2 wires to the power pads. Connect VIN to the positive Power Terminal Block inside the BlueROV2 by either stripping off 6-8 mm of the wire and screw it in place, or add a spade terminal for a # 6 screw (M3.5) and screw in place. Connect GND to the negative Power Terminal Block by either stripping off 6-8 mm of the wire and screw it in place, or add a spade terminal for a # 6 screw (M3.5) and screw in place. Warning The Power Terminal Blocks are unregulated and directly connected to the battery. Any short may generate several amps which will fry most circuits. Check that the wires are secured properly in both ends. Install the BlueRobotics ethernet switch following the Ethernet Switch Installation Guide for the BlueROV2 by BlueRobotics. With power and ethernet switch now sorted, connect a 6\" ethernet cable from the ethernet switch to the IO Interface board. Tip Some thick double-sided sticky tape and zip ties can be used to secure the I/O Interface to the electronics frame inside the BlueROV2. Reassemble BlueROV2 electronics enclosure To reassemble your BlueROV2 Electronics Enclosure, you will need the following parts and tools: 4 x M3x16 screws that were placed off to the side during disassembly Silicone Grease 2.5 mm hex driver Reinstall 4\u201d Watertight Enclosure onto ROV with the following steps: Apply silicone grease to the two radial O-rings on the O-Ring Flange (4\u201d Series) that is attached to the Electronics Tray. Install the Watertight Enclosure (4\u201d Series) with installed Dome End Cap to the O-Ring Flange (4\u201d Series). Warning Use caution when sliding the 4\" Watertight Enclosure over the electronics as space may be tight (collides with electronics) and wires can get trapped between the 4\" tube and the 4\" end cap. Mount the Electronics Enclosure to the frame using the M3x16 screws so that the dome is on the same side as the front center panels (the center panels without the 3 large holes). Install the M3x16 screws through the clips and into the Enclosure Cradle (4\u201d Series). It is easier to install these screws if the clips are not fully tightened until all screws are through the clips and threading into the Enclosure Cradle (4\u201d Series). This allows clips to rotate so you can find the threaded hole in the Enclosure Cradle (4\u201d Series) easily. Attach DVL-A50 to BlueROV2 Note The following images show the old version of the DVL-A50 with steel housing. The new housing has the same dimensions as the old. Attach the DVL-A50 to the BlueROV2 using the 2 x M5x16 screws provided with the DVL-A50 BlueROV2 Integration Kit through the two holes you've made previously. Excess cable can be bundled together and attached to the BlueROV2 frame using zip ties. Software The DVL-A50 requires an extension in BlueOS to be able to communicate with the autopilot (Pixhawk or Navigator flight controller). BlueOS has to be updated to BlueOS 1.1.0 or newer to assure that extensions are supported sufficiently. After the update install the latest BlueOS-Water-Linked-DVL extension from the BlueOS extension manager. It is best to disable the BlueOS \"Water Linked UGPS\"-extension if you have that installed. Note If you want to use both DVL and UGPS you can find a detailed guide here Open the interface of the DVL-extension and click the button \"Load parameters for DVL\". Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV. Restart the autopilot for the parameter changes to take effect. It is not necessary to restart BlueOS. Set the global vehicle position in the DVL extension every time you start the ROV. Note There is a known bug where the I2C address of the pressure sensor is set wrong, and so depth is not received properly. This can be fixed by setting the parameter BARO_PROBE_EXT to 768 and then reboot the ROV.","title":"DVL for BlueROV2"},{"location":"dvl/bluerov-integration/#introduction","text":"The Water Linked DVLs are designed to integrate with most ROVs and AUVs through ethernet and/or a serial interface (UART). To minimize the time between receipt of a DVL and having it up and running, the DVLs are shipped with an attached I/O interface, providing ease of connectivity with power, ethernet and serial. However, for most ROVs and AUVs, the DVL has to be integrated with the on-board electronics through a penetrator or a subsea connector. This guide details how the DVL-A50 can be integrated with the BlueROV2. Exactly the same procedure can be carried out for the DVL-A125 .","title":"Introduction"},{"location":"dvl/bluerov-integration/#parts-and-tools","text":"What parts and tools needed depends on whether you intend to permanently attach the DVL-A50 to the BlueROV2, have it semi-permanently attached, or use a subsea connector for quick installation/removal. This guide details how to permanently attach the DVL-A50 to a BlueROV2.","title":"Parts and tools"},{"location":"dvl/bluerov-integration/#you-will-need","text":"DVL-A50 BlueROV2 Small ethernet switch. The one pictured here is from BlueRobotics , and ideal for use in the BlueROV2. DVL-A50 Bracket . This is optional, but protects the DVL-A50 and allows for down to 0 cm minimum altitude. You will also need: Hex Key Set from Blue Robotics Bulkhead Wrench from Blue Robotics Plug Wrench from Blue Robotics (Optional) Cable Jacket Stripper from Blue Robotics M10-7.5mm-HC WetLink Penetrator from Blue Robotics Silicone grease 5 mm universal drill bit 2 x M5x12 mm stainless steel pan head screws (included with BlueROV2 mounting bracket) 4 x M3x4 mm stainless steel countersunk flat head screws (included with BlueROV2 mounting bracket) Soldering iron Solder wire Wire cutter Tweezers or nose pliers Solder wick and/or desoldering pump Utility knife Wire stripping tool Zip ties 4 x 30 cm (12\") wires (options discussed under Connect DVL-A50 and BlueROV2 ). If possible, use 2 x red and 2 x black wires. 15 cm (6\") ethernet cable","title":"You will need"},{"location":"dvl/bluerov-integration/#preparation","text":"","title":"Preparation"},{"location":"dvl/bluerov-integration/#separate-io-interface-from-dvl-a50","text":"The first thing you will have to do before going about any of the installation options is to cut the DVL-A50 cable, separating the I/O Interface board. We recommend you do so near the end where the I/O Interface board is to begin with. Warning The DVL-A50 cable is permanently attached and non-replaceable inside the DVL-A50. If you cut the cable too short you will either have to splice the cable with another cable, or order a new DVL-A50. Measure twice, cut once!","title":"Separate I/O Interface from DVL-A50"},{"location":"dvl/bluerov-integration/#attaching-the-bluerov2-mounting-bracket","text":"Attach the BlueROV2 mounting bracket to the DVL-A50 using the 4 x M3x6 screws provided with the DVL-A50 BlueROV2 Integration Kit. The BlueROV2 mounting bracket can be attached to the BlueROV2 in one of the 2 places indicated in the image below (standard BlueROV2). Note In this configuration the DVL-A50 is pointing backwards meaning both the x-direction and the y-direction are flipped. Multiplying the velocity data in x- and y-direction with -1 will flip coordinates back again to the same perspective frame of the BlueROV2. If your BlueROV2 has the Heavy Configuration upgrade, the BlueROV2 mounting bracket can be attached such that the DVL-A50 is within the BlueROV2 frame. This allows for a minimum working distance of 0 cm for the DVL-A50. Mark 2 hole positions on the BlueROV2 frame for attaching the BlueROV2 mounting bracket and drill through the frame using a 5 mm universal drill bit. Check that the BlueROV2 mounting bracket will attach properly to the BlueROV2 frame using 2 x M5x16 mm screws. No need to secure the bracket in place as more work must be done on the cable end.","title":"Attaching the BlueROV2 mounting bracket"},{"location":"dvl/bluerov-integration/#final-cable-lenght","text":"With the DVL-A50 now attached to the BlueROV2 frame, find the appropriate cable length needed by leading the cable back to the penetrator end cap of the BlueROV2 and add the length of the electronics enclosure (30 cm) to the cable. This is the minimum required cable length. Tip We recommend adding at least another 30 cm to the cable to provide enough service loop in case the penetrator fails or the leads get damaged. Cut the cable to the final length.","title":"Final cable lenght"},{"location":"dvl/bluerov-integration/#installation","text":"The DVL-A50 will be permanently installed on the BlueROV2 with the I/O Interface board (supplied with the DVL-A50).","title":"Installation"},{"location":"dvl/bluerov-integration/#io-interface-preparation","text":"To prepare the I/O Interface Board you will need: Soldering iron Wire cutter Tweezers or nose pliers Solder wick and/or desoldering pump Cut off the zip tie holding the cable onto the I/O Interface board. Cut off the individual wires soldered onto the I/O Interface board. Leave enough wire to grab onto with tweezers or nose pliers. Desolder all the cut wires. Use solder wick and/or a desoldering pump to remove any excess solder from the now desoldered through hole pads. Warning Using too much force or heat may delaminate the I/O Interface PCB, rendering the I/O Interface board useless.","title":"I/O Interface preparation"},{"location":"dvl/bluerov-integration/#adding-a-penetrator","text":"To add a penetrator to the cable you will need: Plug Wrench from Blue Robotics M10-7.5mm-HC WetLink Penetrator from Blue Robotics (Optional) Cable Jacket Stripper from Blue Robotics Utility knife Strip off 25-30 cm of the cable jacket using a cable jacket stripper, a utility knife or a sharp blade. Take care not to cut into the leads inside the cable. Blue Robotics has a great guide on cable stripping here . Follow the WetLink Penetrator Assembly Guide by BlueRobotics to add a penetrator on the DVL-A50 cable.","title":"Adding a penetrator"},{"location":"dvl/bluerov-integration/#removing-a-blank-penetrator","text":"To remove a blank penetrator from your BlueROV2, you will need the following tools: 2.5 mm hex driver Bulkhead Wrench from Blue Robotics To ensure your ROV is completely powered off, please remove the battery completely from the 3\u201d enclosure and place to the side. (Optional) Remove the fairings and buoyancy blocks by removing the self-tapping screws that hold the fairings to the frame. Remove the 4\u201d electronics enclosure from the ROV by removing the M3x16 screws that mount the enclosure to the ROV cradle. Remove the Vent Plug from the Vent Penetrator Bolt on the electronics enclosure. Remove the 4\u2033 tube and forward dome assembly from the rear end cap. Remove a blank penetrator, sush as the one pictured below, from the 4\u201d End Cap with the penetrator wrench.","title":"Removing a blank penetrator"},{"location":"dvl/bluerov-integration/#install-dvl-a50-penetrator","text":"Note The following images shows the old penetrator from BlueRobotics. The procedure is the same with the new WetLink penetrators. To install DVL-A50 into the end cap, you will need the following parts and tools: DVL-A50 with installed cable penetrator Penetrator O-ring (included with M10-7.5mm-HC WetLink Penetrator from Blue Robotics) Bulkhead Wrench from Blue Robotics Silicone Grease Isopropyl Alcohol Wipe Wipe the exterior surface of the electronics enclosure end cap clean with isopropyl alcohol or isopropyl alcohol wipes, and make sure it is free of any particles in the areas where the penetrator O-ring will sit. Remove the O-ring from the bag Install the O-ring onto the DVL-A50 cable penetrator and apply silicone grease to it. Push the wires throught the hole in the end cap where you previously removed a blank penetrator from. Tip Since the penetrator has to be screwed on, adding a bit of tape around the end of the wires helps them stay untangles while turning. Also twisting the DVL-A50 cable in a clock-wise direction will aid in screwing on the penetrator. Screw on the DVL-A50 cable penetrator to the end cap. Tighten to finger tight, then use the penetrator wrench to tighten it an additional ~1/16 of a turn. If you can\u2019t loosen it with your fingers, it is tight enough.","title":"Install DVL-A50 penetrator"},{"location":"dvl/bluerov-integration/#reinstall-io-interface-board","text":"To reinstall the I/O Interface Board onto the DVL-A50 cable you will need: Wire stripping tool Soldering iron Solder wire Zip tie With the DVL-A50 penetrator now through the 4\" End Cap, strip off 2-3 mm of the ends of all the wires. Wire sizes are detailed in the table below. The blue pair can be removed as it is not used for the DVL-A50. Warning The two wires of a twisted wire pair are fully colored and fully white (the table below shows the white wires having a stripe of the complementing color, this is not the reality and only for reference). Keep track of which white wire is paired with which colored wire! Also note that the wiring in the images below differ from that of the table below. Please follow the table! Re-solder the leads of the DVL-A50 cable to the I/O Interface board following the table below: DVL-A50 cable I/O Interface pad Function Diameter (mm) AWG# GND Power ground 0.6 mm 22 VIN Power in 0.6 mm 22 TD+ Ethernet TX+ 0.6 mm 22 TD- Ethernet TX- 0.4 mm 26 RD+ Ethernet RX+ 0.4 mm 26 RD- Ethernet RX- 0.4 mm 26 TX Serial UART TX 0.4 mm 26 RX Serial UART RX 0.4 mm 26 Zip tie the soldered wires to the I/O Interface board to protect the solder joints.","title":"Reinstall I/O Interface Board"},{"location":"dvl/bluerov-integration/#connect-to-bluerov2","text":"To connect the DVL-A50 to the BlueROV2 you will need: 2 x 30 cm (12\") wires for power to the DVL-A50 BlueRobotics ethernet switch 6\" ethernet cable Zip ties To provide power to the DVL-A50 you can either use (A) a 2-pin Molex MicroFit3.0 cable assembly , (B) solder on a W\u00fcrth screw terminal , or (C) directly solder on 2 wires to the power pads. Connect VIN to the positive Power Terminal Block inside the BlueROV2 by either stripping off 6-8 mm of the wire and screw it in place, or add a spade terminal for a # 6 screw (M3.5) and screw in place. Connect GND to the negative Power Terminal Block by either stripping off 6-8 mm of the wire and screw it in place, or add a spade terminal for a # 6 screw (M3.5) and screw in place. Warning The Power Terminal Blocks are unregulated and directly connected to the battery. Any short may generate several amps which will fry most circuits. Check that the wires are secured properly in both ends. Install the BlueRobotics ethernet switch following the Ethernet Switch Installation Guide for the BlueROV2 by BlueRobotics. With power and ethernet switch now sorted, connect a 6\" ethernet cable from the ethernet switch to the IO Interface board. Tip Some thick double-sided sticky tape and zip ties can be used to secure the I/O Interface to the electronics frame inside the BlueROV2.","title":"Connect to BlueROV2"},{"location":"dvl/bluerov-integration/#reassemble-bluerov2-electronics-enclosure","text":"To reassemble your BlueROV2 Electronics Enclosure, you will need the following parts and tools: 4 x M3x16 screws that were placed off to the side during disassembly Silicone Grease 2.5 mm hex driver Reinstall 4\u201d Watertight Enclosure onto ROV with the following steps: Apply silicone grease to the two radial O-rings on the O-Ring Flange (4\u201d Series) that is attached to the Electronics Tray. Install the Watertight Enclosure (4\u201d Series) with installed Dome End Cap to the O-Ring Flange (4\u201d Series). Warning Use caution when sliding the 4\" Watertight Enclosure over the electronics as space may be tight (collides with electronics) and wires can get trapped between the 4\" tube and the 4\" end cap. Mount the Electronics Enclosure to the frame using the M3x16 screws so that the dome is on the same side as the front center panels (the center panels without the 3 large holes). Install the M3x16 screws through the clips and into the Enclosure Cradle (4\u201d Series). It is easier to install these screws if the clips are not fully tightened until all screws are through the clips and threading into the Enclosure Cradle (4\u201d Series). This allows clips to rotate so you can find the threaded hole in the Enclosure Cradle (4\u201d Series) easily.","title":"Reassemble BlueROV2 electronics enclosure"},{"location":"dvl/bluerov-integration/#attach-dvl-a50-to-bluerov2","text":"Note The following images show the old version of the DVL-A50 with steel housing. The new housing has the same dimensions as the old. Attach the DVL-A50 to the BlueROV2 using the 2 x M5x16 screws provided with the DVL-A50 BlueROV2 Integration Kit through the two holes you've made previously. Excess cable can be bundled together and attached to the BlueROV2 frame using zip ties.","title":"Attach DVL-A50 to BlueROV2"},{"location":"dvl/bluerov-integration/#software","text":"The DVL-A50 requires an extension in BlueOS to be able to communicate with the autopilot (Pixhawk or Navigator flight controller). BlueOS has to be updated to BlueOS 1.1.0 or newer to assure that extensions are supported sufficiently. After the update install the latest BlueOS-Water-Linked-DVL extension from the BlueOS extension manager. It is best to disable the BlueOS \"Water Linked UGPS\"-extension if you have that installed. Note If you want to use both DVL and UGPS you can find a detailed guide here Open the interface of the DVL-extension and click the button \"Load parameters for DVL\". Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV. Restart the autopilot for the parameter changes to take effect. It is not necessary to restart BlueOS. Set the global vehicle position in the DVL extension every time you start the ROV. Note There is a known bug where the I2C address of the pressure sensor is set wrong, and so depth is not received properly. This can be fixed by setting the parameter BARO_PROBE_EXT to 768 and then reboot the ROV.","title":"Software"},{"location":"dvl/dead-reckoning/","text":"Introduction The DVL-A50 and DVL-A125 run a dead reckoning algorithm which estimates the orientation and position of the DVL. This uses both the velocities which the DVL calculates and its integrated IMU (Inertial Measurement Unit). Starting dead reckoning Calibrate the gyroscope by pressing More -> Calibrate gyro in the GUI whilst the DVL is stationary. Click the 'Reset' button in the GUI , or send a reset command over the TCP or serial protocol . Failure to perform gyro calibration will result in less accurate dead reckoning. Frame The position, speed, and roll, pitch, and yaw angles outputted by the dead reckoning algorithm are with respect to the frame defined at time zero (the time of the last reset, or else at start up) by the axes of the vehicle frame . Speed and position The speed and position of the DVL are calculated by integration of its acceleration, corrected by the velocity it calculates by means of its acoustic signal processing. A Kalman filter is used; the roll, pitch, and yaw angles outputted by the DVL are also part of the input. When the DVL fails in its determination of velocity, speed and position are predicted only by acceleration. This will result in large errors, indicated by an increase in the figure of merit (FOM), which is an estimated standard deviation of the position in the X-Y plane. Note When the DVL is powered on in the air, its position will drift significantly. This should be ignored, and dead reckoning should be started in water when ready. The position of the DVL can be viewed in the GUI dashboard or be fetched by API . Orientation The calculation of the orientation of the DVL is based upon the accelerometer and gyroscope measurements of its IMU. The orientation is represented by roll, pitch, and yaw angles, and can be viewed in the GUI dashboard or be fetched by API . Roll is a rotation around the X axis of the DVL Pitch is a rotation around the Y axis of the DVL Yaw is a rotation around the Z axis of the DVL For orientation to function correctly, the DVL must be deployed in accordance with its axis conventions . Note A small tilt in the DVL mounting, though it will result in almost no position error with respect to the X and Y axes, may lead a significant error with respect to the Z axis. This change will be a projection of the true horizontal position onto the Z axis. For example, when the DVL is mounted with 5\u00b0 tilt and the horizontal displacement of the DVL is 100m since last reset, the total displayed distance in the X, Y plane will be 99.6 m, and the Z position will be \u00b19 m. When dead reckoning is reset , the roll, pitch, and yaw angles are set to zero. Yaw drift Note The yaw angle may experience drift. This drift can be decreased to 0.1-0.3\u00b0 per minute by calibration of the gyroscope.","title":"Dead reckoning"},{"location":"dvl/dead-reckoning/#introduction","text":"The DVL-A50 and DVL-A125 run a dead reckoning algorithm which estimates the orientation and position of the DVL. This uses both the velocities which the DVL calculates and its integrated IMU (Inertial Measurement Unit).","title":"Introduction"},{"location":"dvl/dead-reckoning/#starting-dead-reckoning","text":"Calibrate the gyroscope by pressing More -> Calibrate gyro in the GUI whilst the DVL is stationary. Click the 'Reset' button in the GUI , or send a reset command over the TCP or serial protocol . Failure to perform gyro calibration will result in less accurate dead reckoning.","title":"Starting dead reckoning"},{"location":"dvl/dead-reckoning/#frame","text":"The position, speed, and roll, pitch, and yaw angles outputted by the dead reckoning algorithm are with respect to the frame defined at time zero (the time of the last reset, or else at start up) by the axes of the vehicle frame .","title":"Frame"},{"location":"dvl/dead-reckoning/#speed-and-position","text":"The speed and position of the DVL are calculated by integration of its acceleration, corrected by the velocity it calculates by means of its acoustic signal processing. A Kalman filter is used; the roll, pitch, and yaw angles outputted by the DVL are also part of the input. When the DVL fails in its determination of velocity, speed and position are predicted only by acceleration. This will result in large errors, indicated by an increase in the figure of merit (FOM), which is an estimated standard deviation of the position in the X-Y plane. Note When the DVL is powered on in the air, its position will drift significantly. This should be ignored, and dead reckoning should be started in water when ready. The position of the DVL can be viewed in the GUI dashboard or be fetched by API .","title":"Speed and position"},{"location":"dvl/dead-reckoning/#orientation","text":"The calculation of the orientation of the DVL is based upon the accelerometer and gyroscope measurements of its IMU. The orientation is represented by roll, pitch, and yaw angles, and can be viewed in the GUI dashboard or be fetched by API . Roll is a rotation around the X axis of the DVL Pitch is a rotation around the Y axis of the DVL Yaw is a rotation around the Z axis of the DVL For orientation to function correctly, the DVL must be deployed in accordance with its axis conventions . Note A small tilt in the DVL mounting, though it will result in almost no position error with respect to the X and Y axes, may lead a significant error with respect to the Z axis. This change will be a projection of the true horizontal position onto the Z axis. For example, when the DVL is mounted with 5\u00b0 tilt and the horizontal displacement of the DVL is 100m since last reset, the total displayed distance in the X, Y plane will be 99.6 m, and the Z position will be \u00b19 m. When dead reckoning is reset , the roll, pitch, and yaw angles are set to zero.","title":"Orientation"},{"location":"dvl/dead-reckoning/#yaw-drift","text":"Note The yaw angle may experience drift. This drift can be decreased to 0.1-0.3\u00b0 per minute by calibration of the gyroscope.","title":"Yaw drift"},{"location":"dvl/dvl-a125/","text":"DVL-A125 Buy DVL-A125 here! Description The DVL-A125 is the next step up from the DVL-A50 , providing even better performance at greater distances while still keeping a small form factor relative to competing DVLs. The DVL-A125 builds on the already impressive feats of the DVL-A50 with its increased performance, small 4 beam setup, open interface protocol and mid-to-low cost. The DVL estimates velocity relative to the sea bottom by sending acoustic waves from the four angled transducers and then measure the frequency shift (doppler effect) from the received echo. By combining the measurements of all four transducers and the time between each acoustic pulse, it is possible to very accurately estimate the speed and direction of movement. Tip Keep the DVL-A125 in a bucket of water to ensure sufficient cooling when using the DVL on a workbench. Dimensions Mounting Holes Transducer numbering Transducer beam width Half-power beam width is 4.1\u00b0 Line of sight Datasheet Datasheet","title":"DVL-A125 \u2014 Introduction"},{"location":"dvl/dvl-a125/#dvl-a125","text":"Buy DVL-A125 here!","title":"DVL-A125"},{"location":"dvl/dvl-a125/#description","text":"The DVL-A125 is the next step up from the DVL-A50 , providing even better performance at greater distances while still keeping a small form factor relative to competing DVLs. The DVL-A125 builds on the already impressive feats of the DVL-A50 with its increased performance, small 4 beam setup, open interface protocol and mid-to-low cost. The DVL estimates velocity relative to the sea bottom by sending acoustic waves from the four angled transducers and then measure the frequency shift (doppler effect) from the received echo. By combining the measurements of all four transducers and the time between each acoustic pulse, it is possible to very accurately estimate the speed and direction of movement. Tip Keep the DVL-A125 in a bucket of water to ensure sufficient cooling when using the DVL on a workbench.","title":"Description"},{"location":"dvl/dvl-a125/#dimensions","text":"","title":"Dimensions"},{"location":"dvl/dvl-a125/#mounting-holes","text":"","title":"Mounting Holes"},{"location":"dvl/dvl-a125/#transducer-numbering","text":"","title":"Transducer numbering"},{"location":"dvl/dvl-a125/#transducer-beam-width","text":"Half-power beam width is 4.1\u00b0","title":"Transducer beam width"},{"location":"dvl/dvl-a125/#line-of-sight","text":"","title":"Line of sight"},{"location":"dvl/dvl-a125/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"dvl/dvl-a50/","text":"DVL-A50 Buy DVL-A50 here! Description The DVL-A50 is \u2013 by far \u2013 the world\u2019s smallest commercially available Doppler Velocity Log. The A50 is establishing a new market standard with its high performance, ultra-small 4 beam setup, open interface protocol and low cost. The DVL estimates velocity relative to the sea bottom by sending acoustic waves from the four angled transducers and then measure the frequency shift (doppler effect) from the received echo. By combining the measurements of all four transducers and the time between each acoustic pulse, it is possible to very accurately estimate the speed and direction of movement. Note The DVL-A50 uses a constant speed of sound equal to 1500 m/s (Release 1.3.1). This is configurable for the Performance edition. Tip Keep the DVL-A50 in a bucket of water to ensure sufficient cooling when using the DVL on a workbench. Dimensions Mounting Holes Transducer numbering Transducer beam width Half-power beam width is 4.4\u00b0 Line of sight Datasheet Datasheet","title":"DVL-A50 \u2014 Introduction"},{"location":"dvl/dvl-a50/#dvl-a50","text":"Buy DVL-A50 here!","title":"DVL-A50"},{"location":"dvl/dvl-a50/#description","text":"The DVL-A50 is \u2013 by far \u2013 the world\u2019s smallest commercially available Doppler Velocity Log. The A50 is establishing a new market standard with its high performance, ultra-small 4 beam setup, open interface protocol and low cost. The DVL estimates velocity relative to the sea bottom by sending acoustic waves from the four angled transducers and then measure the frequency shift (doppler effect) from the received echo. By combining the measurements of all four transducers and the time between each acoustic pulse, it is possible to very accurately estimate the speed and direction of movement. Note The DVL-A50 uses a constant speed of sound equal to 1500 m/s (Release 1.3.1). This is configurable for the Performance edition. Tip Keep the DVL-A50 in a bucket of water to ensure sufficient cooling when using the DVL on a workbench.","title":"Description"},{"location":"dvl/dvl-a50/#dimensions","text":"","title":"Dimensions"},{"location":"dvl/dvl-a50/#mounting-holes","text":"","title":"Mounting Holes"},{"location":"dvl/dvl-a50/#transducer-numbering","text":"","title":"Transducer numbering"},{"location":"dvl/dvl-a50/#transducer-beam-width","text":"Half-power beam width is 4.4\u00b0","title":"Transducer beam width"},{"location":"dvl/dvl-a50/#line-of-sight","text":"","title":"Line of sight"},{"location":"dvl/dvl-a50/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"dvl/dvl-protocol/","text":"Water Linked DVL protocol Describes the Water Linked DVL protocols (serial and ethernet). Terminology DVL - Doppler Velocity Log - Uses hydro-acoustic beams to measure the velocity at which the DVL is moving across a surface (typically an unmoving one such as the sea bottom), and the distance to this surface. ACK - Acknowledgement. The command issued was successful. NAK - Negative acknowledgement. The command issued failed. Ping - A pulse of sound sent by the DVL Time of validity - Timestamp of the surface reflection ('center of ping') Time of transmission - Timestamp taken directly before sending data over the serial or TCP protocols. The difference between time of transmission and time of validity includes both the time for the acoustic wave to travel from the surface from which it was reflected back to the DVL, and the decoding and processing of this signal internally in the DVL. Version This document describes serial protocol version 2.6.x (major.minor.patch) and JSON protocol json_v3.1 (major.minor): MAJOR version increments represent incompatible API changes MINOR version increments represent additional backwards-compatible functionality PATCH version increments represent backwards-compatible bug fixes Version history overview Software release Serial protocol version Ethernet protocol version Main protocol improvements 2.6.1 2.6.0 json_v3.1 Serial baud rate configurable. Add PD4 protocol support in serial 'wcp' command. Some serial protocol names changed . 2.5.2 2.5.0 json_v3.1 Add PD4 protocol support (experimental) 2.4.4 2.5.0 json_v3.1 Change gyro calibration to store persistently. Note: gyro calibration commands now takes up to 15 seconds. 2.4.0 2.5.0 json_v3.1 Add ability to trigger pings (JSON/Serial), add configuration for periodic cycling (JSON/Serial) 2.2.1 2.4.0 json_v3 Add serial output protocol configuration, range mode configuration and calibrate gyro command, Fix missing line ending in configuration (JSON), fix dark mode enabled naming inconsistency (JSON), change speed of sound and mounting rotation offset from integer to float 2.1.0 2.3.0 json_v3 Add configuration, add time_of_validity/time_of_transmission, add covariance (JSON) 2.0.8 2.2.0 json_v2 Add position estimation, add IMU output 1.6.0 2.1.0 - Initial (velocity only) JSON protocol (TCP) Overview The DVL supports sending velocity, transducer, and position updates using the Transmission Control Protocol (TCP). The DVL runs a TCP server on port 16171. The format of each packet is JSON. Velocity-and-transducer report A velocity-and-transducer report is sent for each velocity calculation of the DVL. The rate depends on the altitude of the DVL (distance to the sea bottom or other reflecting surface), but will be in the range 2-15 Hz. The X, Y, and Z axes are with respect to body frame of the DVL, or the vehicle frame if the DVL is mounted on a vehicle at an angle, specified as a 'mounting rotation offset', from the forward axis of the vehicle. The messages are delimited by newline. Variable Description time Milliseconds since last velocity report (ms) vx Velocity in x direction (m/s) vy Velocity in y direction (m/s) vz Velocity in z direction (m/s) fom Figure of merit, a measure of the accuracy of the velocities (m/s) covariance Covariance matrix for the velocities. The figure of merit is calculated from this (entries in (m/s)^2) altitude Distance to the reflecting surface along the Z axis (m) transducers Is a list containing information from each transducer: [id, velocity (m/s), distance (m), rssi (dBm), nsd (dBm), beam_valid (True/False)] velocity_valid If true, the DVL has a lock on the reflecting surface, and the altitude and velocities are valid (True/False) status 8 bit status mask. Bit 0 is set to 1 for high temperature and DVL will soon enter thermal shutdown. Remaining bits are reserved for future use. time_of_validity Timestamp of the surface reflection, aka 'center of ping' (Unix timestamp in microseconds) time_of_transmission Timestamp from immediately before sending of the report over TCP (Unix timestamp in microseconds) format Format type and version for this report: json_v3.1 type Report type: velocity Example of TCP report (indented for legibility) { \"time\": 106.3935775756836, \"vx\": -3.713480691658333e-05, \"vy\": 5.703703573090024e-05, \"vz\": 2.4990416932269e-05, \"fom\": 0.00016016385052353144, \"covariance\": [ [ 2.4471841442164077e-08, -3.3937477272871774e-09, -1.6659699175747278e-09 ], [ -3.3937477272871774e-09, 1.4654466085062268e-08, 4.0409570134514183e-10 ], [ -1.6659699175747278e-09, 4.0409570134514183e-10, 1.5971971523143225e-09 ] ], \"altitude\": 0.4949815273284912, \"transducers\": [ { \"id\": 0, \"velocity\": 0.00010825289791682735, \"distance\": 0.5568000078201294, \"rssi\": -30.494251251220703, \"nsd\": -88.73271179199219, \"beam_valid\": true }, { \"id\": 1, \"velocity\": -1.4719001228513662e-05, \"distance\": 0.5663999915122986, \"rssi\": -31.095735549926758, \"nsd\": -89.5116958618164, \"beam_valid\": true }, { \"id\": 2, \"velocity\": 2.7863150535267778e-05, \"distance\": 0.537600040435791, \"rssi\": -27.180519104003906, \"nsd\": -96.98075103759766, \"beam_valid\": true }, { \"id\": 3, \"velocity\": 1.9419496311456896e-05, \"distance\": 0.5472000241279602, \"rssi\": -28.006759643554688, \"nsd\": -88.32147216796875, \"beam_valid\": true } ], \"velocity_valid\": true, \"status\": 0, \"format\": \"json_v3.1\", \"type\": \"velocity\", \"time_of_validity\": 1638191471563017, \"time_of_transmission\": 1638191471752336 } Dead reckoning report A dead reckoning report outputs the current speed, position, and orientation of the DVL as calculated by dead reckoning , with respect to a frame defined by the axes of the DVL's body frame , or vehicle frame if a mounting rotation offset is set, at the start of the dead reckoning run. The expected update rate is 5 Hz. Variable Description ts Time stamp of report (Unix timestamp in seconds) x Distance in X direction (m) y Distance in Y direction (m) z Distance in downward direction (m) std Standard deviation (figure of merit) for position (m) roll Rotation around X axis (degrees) pitch Rotation around Y axis (degrees) yaw Rotation around Z axis, i.e. heading (degrees) type Report type: position_local status Reports if there are any issues with the DVL (0 if no errors, 1 otherwise) format Format type and version for this report: json_v3 Example of a dead reckoning report. { \"ts\": 49056.809, \"x\": 12.43563613697886467, \"y\": 64.617631152402609587, \"z\": 1.767641898933798075, \"std\": 0.001959984190762043, \"roll\": 0.6173566579818726, \"pitch\": 0.6173566579818726, \"yaw\": 0.6173566579818726, \"type\": \"position_local\", \"status\": 0, \"format\": \"json_v3.1\" } Reset dead reckoning Dead reckoning can be reset by issuing the reset_dead_reckoning command: {\"command\": \"reset_dead_reckoning\"} If the request is successfully received the response will have 'success' set to 'true'. The dead reckoning will have a delay of approximately 50ms until the positioning values being zeroed out. If the response is unsuccessful, the 'success' will be 'false' and a non-empty describing text will be returned in 'error_message'. { \"response_to\":\"reset_dead_reckoning\", \"success\": true, \"error_message\": \"\", \"result\": null, \"format\": \"json_v3.1\", \"type\": \"response\" } Calibrate gyro The gyro can be calibrated by issuing the calibrate_gyro command: {\"command\":\"calibrate_gyro\"} The response will be as follows if the calibration is successful. If unsuccessful, success will be false , and a non-empty error_message will be provided. { \"response_to\": \"calibrate_gyro\", \"success\": true, \"error_message\": \"\", \"result\": null, \"format\": \"json_v3.1\", \"type\": \"response\" } Trigger ping In setups where multiple acoustic sensors are used it can be useful to control the pinging of each acoustic sensor individually. By setting the configuration acoustic_enabled = false the pinging of the DVL can be externally controlled. Up to 15 external trigger commands can be queued by issuing the trigger_ping command. The DVL will execute each ping in quick succession until no more commands are in the queue. {\"command\":\"trigger_ping\"} The response will be as follows if the calibration is successful. If queue is full, success will be false , and a non-empty error_message will be provided. { \"response_to\": \"trigger_ping\", \"success\": true, \"error_message\": \"\", \"result\": null, \"format\": \"json_v3.1\", \"type\": \"response\" } Configuration over JSON Configuration parameters Variable Description speed_of_sound Speed of sound (1000-2000 m/s). Integer mounting_rotation_offset See the definition of the vehicle frame of the DVL. Typically 0, but can be set to be non-zero if the forward axis of the DVL is not aligned with the forward axis of a vehicle on which it is mounted (0-360 degrees). Integer acoustic_enabled true for normal operation of the DVL, false when the sending of acoustic waves from the DVL is disabled (e.g. to save power or slow down its heating up in air) dark_mode_enabled false when the LED operates as normal , true for no blinking of the LED (e.g. if the LED is interfering with a camera) range_mode auto when operating as normal, otherwise see range mode configuration periodic_cycling_enabled true for normal operation where the DVL periodically searches for bottom lock shorter than the existing bottom lock, false if periodic cycling is disabled Fetching current configuration The current configuration of the DVL can be obtained by issuing the get_config command: {\"command\": \"get_config\"} If the configuration is successfully fetched, the response will be in the following format. If not, success will be false, a non-empty error_message string will be provided, and result will be null . { \"response_to\":\"get_config\", \"success\":true, \"error_message\":\"\", \"result\":{ \"speed_of_sound\":1475.00, \"acoustic_enabled\":true, \"dark_mode_enabled\":false, \"mounting_rotation_offset\":20.00, \"range_mode\":\"auto\", \"periodic_cycling_enabled\":true }, \"format\":\"json_v3.1\", \"type\":\"response\" } Setting configuration parameters Setting of configuration parameters can be carried out by issuing a set_config in the following format, including those parameters which are to be set: {\"command\":\"set_config\",\"parameters\":{\"speed_of_sound\":1480}} If the parameters are successfully set, the response will be in the following format. If not, success will be false, and a non-empty error_message string will be provided. { \"response_to\": \"set_config\", \"success\": true, \"error_message\": \"\", \"result\" :null, \"format\": \"json_v3.1\", \"type\": \"response\" } Serial Protocol Overview The default serial communication format is 115200 8-N-1 (no hardware flow control). Release 2.6.1 and later allow different baud rates through GUI configuration. Packets sent to and received from the DVL start with a w and end with LF, CR+LF, or CR. The packet format is: Start byte Direction Command Options (0 to many) Checksum End byte w c or r x ,[option] *xx \\n , \\r\\n , or \\r Direction is c (short for 'command') for packets sent to the DVL, and r (short for 'response') for packets sent from the DVL. The commands can be sent from a terminal program that supports sending a full line at a time. The timeout between characters is approximately 10 ms. Note Please verify the baud rate configuration in the GUI if you are unable to communicate with the default baud rate. Note The checksum is optional when sending commands to the DVL. The DVL always returns a checksum. The checksum algorithm is CRC-8 and it is formatted as a hexadecimal number using 2 lower-case characters (ex: *c3 ). See below for details. Command overview The commands in the table are shown without the checksum and without the mandatory line ending (any of \\n , \\r\\n , or \\r ) for readability. In all cases, the response to a submitted command may be wrn , wr? , or wr! (see below for details), but only the format of a successful response is listed. Command Description Response Description wcv Get protocol version wrv, [major],[minor],[patch] Protocol version. eg: wrv,2.5.0 wcw Get product detail wrw, [name] , [version] , [chipID] , [IP address] Where type is dvl, name is product name, version is software version, chip ID is the chip ID and optionally the IP address if connected to DHCP server: eg: wrw,dvl-a50,2.2.1,0xfedcba98765432 or wrw,dvl-a50,2.2.1,0xfedcba98765432,10.11.12.140 wcs, [configuration parameters] Set configuration parameters wra Successfully set the specified configuration parameters. See Configuration for details wcc Get current configuration wrc, [configuration parameters] Entire current configuration. See Configuration for details wcr Reset dead reckoning wra Successfully started a new dead reckoning run wcx Trigger ping wra Successfully queued a ping wcg Calibrate gyro wra Successfully calibrated gyro wcp Change serial output protocol wra Successfully changed output protocol wrz, [details below] Velocities calculated wru, [details below] Transducer information wrp, [details below] Dead reckoning report wrx, [details below] DEPRECATED: Velocities calculated (old format) wrt, [details below] DEPRECATED: Transducer information (old format) wr? Malformed request: packet cannot be understood or no newline received before timeout wr! Malformed request: packet does not match the given checksum wrn Not acknowledged (nack): an error occurred when handling the packet Velocity report (wrz) A velocity report is outputted for each velocity calculation of the DVL. The rate depends on the altitude of the DVL (distance to the sea bottom or other reflecting surface), but will be in the range 2-15 Hz. The X, Y, and Z axes are with respect to body frame of the DVL, or the vehicle frame if the DVL is mounted on a vehicle at an angle, specified as a 'mounting rotation offset', from the forward axis of the vehicle. The report has the following format: wrz, [vx],[vy],[vz],[valid],[altitude],[fom],[covariance],[time_of_validity],[time_of_transmission],[time],[status] Variable Description vx Velocity in x direction (m/s) vy Velocity in y direction (m/s) vz Velocity in z direction (m/s) valid If y , the DVL has a lock on the reflecting surface, and the altitude and velocities are valid (y/n) altitude Measured altitude to the bottom (m) fom Figure of merit, a measure of the accuracy of the velocities (m/s) covariance Covariance matrix for the velocities. The figure of merit is calculated from this. 9 entries ((m/s)^2) separated by ; time_of_validity Timestamp of the surface reflection, aka 'center of ping' (Unix timestamp in microseconds) time_of_transmission Timestamp from immediately before sending of the report over TCP (Unix timestamp in microseconds) time Milliseconds since last velocity report (ms) status 8 bit status mask. Bit 0 is set to 1 for high temperature and DVL will soon enter thermal shutdown. Remaining bits are reserved for future use. Example where all velocities are valid: wrz,0.120,-0.400,2.000,y,1.30,1.855,1e-07;0;1.4;0;1.2;0;0.2;0;1e+09,7,14,123.00,1*50 Transducer report (wru) A transducer report is outputted for each of the four transducers of the DVL for each velocity calculation of the DVL. The rate will be the same as that of the velocity report. If the transducer did not receive a signal which could be successfully decoded, distance will be set to -1, and velocity will be set to 0. RSSI and NSD will be outputted in all cases. The report has the following format: wru, [id],[velocity],[distance],[rssi],[nsd] Variable Description id Transducer number velocity Velocity in the direction of the transducer (m/s) distance Distance (parallel to the transducer beam, i.e. not the vertical distance) to the reflecting surface from this transducer (m) rssi Received signal strength indicator: strength of the signal received by this transducer (dBm) nsd Noise spectral density: strength of the background noise received by this transducer (dBm) Example where all data is valid: wru,0,0.070,1.10,-40,-95*9c wru,1,-0.500,1.25,-62,-104*f0 wru,2,2.200,1.40,-56,-98*18 wru,3,1.800,1.35,-58,-96*a3 Dead reckoning report (wrp) A dead reckoning report outputs the current speed, position, and orientation of the DVL as calculated by dead reckoning , with respect to a frame defined by the axes of the DVL's body frame , or vehicle frame if a mounting rotation offset is set, at the start of the dead reckoning run. The expected update rate is 5 Hz. The format is: wrp, [time_stamp],[x],[y],[z],[pos_std],[roll],[pitch],[yaw],[status] Variable Description time_stamp Time stamp of report (Unix timestamp in seconds) x Distance in X direction (m) y Distance in Y direction (m) z Distance in downward direction (m) pos_std Standard deviation (Figure of merit) for position (m) roll Rotation around X axis (degrees) pitch Rotation around Y axis (degrees) yaw Rotation around Z axis, i.e. heading (degrees) status Reports if there are any issues with the DVL (0 if no errors, 1 otherwise) Example: wrp,49056.809,0.41,0.15,1.23,0.4,53.9,13.0,19.3,0*de wrp,49057.269,0.39,0.18,1.23,0.4,53.9,13.0,19.3,0*e2 Reset dead reckoning (wcr) Dead reckoning can be reset by issuing the wcr command. The reply will be an ack ( wra ) if the reset is successful, and a nak ( wrn ) if not. Calibrate gyro (wcg) The gyro can be calibrated by issuing the wcg command. The reply will be an ack ( wra ) if the reset is successful, and a nak ( wrn ) if not. Trigger ping (wcx) In setups where multiple acoustic sensors are used it can be useful to control the pinging of each acoustic sensor individually. By setting the configuration acoustic_enabled = n the pinging of the DVL can be externally controlled. Up to 15 external trigger commands can be queued by issuing the wcx command. The DVL will execute each ping in quick succession until no more commands are in the queue. The reply will be an ack ( wra ) if the command is successful, and a nak ( wrn ) if queue is full. Change serial output protocol (wcp) The serial output protocol in use can configured by issuing the wcp command. The selected protocol is persistent over reboots. wcp,[protocol number] The supported protocols are: Protocol number Name Description 0 Output disabled No output on serial. Recommended if serial port is not used to lower latency on ethernet protocols. 1 WL - Serial V1 and V2 All output including the deprecated wrx and wrt sentences. 2 PD6 PD6 protocol output. See PD6 protocol description 3 WL - Serial V2 All output excluding the deprecated wrx and wrt sentences. 4 Not used Not used 5 Not used Not used 6 PD4 PD4 protocol output See PD4 protocol description The reply will be an ack ( wra ) if the protocol change is successful, and a nak ( wrn ) if not. Example setting configuring output to use protocol number 3: wcp,3 Note Prior to release 2.6.1 protocol number 1 was named Backward compatible and protocol number 3 was named Latest . There is no change in functionality. Configuration over serial Configuration parameters Variable Description speed_of_sound Speed of sound (1000-2000 m/s). Float mounting_rotation_offset See the definition of the vehicle frame of the DVL. Typically 0, but can be set to be non-zero if the forward axis of the DVL is not aligned with the forward axis of a vehicle on which it is mounted (0-360 degrees). Float acoustic_enabled y for normal operation of the DVL, n when the sending of acoustic waves from the DVL is disabled (e.g. to save power or slow down its heating up in air) dark_mode_enabled n when the LED operates as normal . y for no blinking of LED (e.g. if the LED is interfering with a camera) range_mode auto when operating as normal, otherwise see range mode configuration periodic_cycling_enabled y when operating as normal, otherwise n . See Configuration over JSON for details Note For backward compatibility the range_mode and periodic_cycling_enabled parameters are optional when setting the configuration. They will always be returned when reading the configuration ( wcc ). Speed of sound and mounting rotation was changed from integer to float in serial protocol 2.4.0 Fetching current configuration The current configuration of the DVL can be obtained by issuing the wcc command. If the configuration is successfully fetched, the response will be in the following format. If not, a nak wrn will be returned. wrc,[speed_of_sound],[mounting_rotation_offset],[acoustic_enabled],[dark_mode_enabled],[range_mode],[periodic_cycling_enabled] Setting configuration parameters Setting of configuration parameters can be carried out by issuing the wcs command in the following format. wcs,[speed_of_sound],[mounting_rotation_offset],[acoustic_enabled],[dark_mode_enabled],[range_mode],[periodic_cycling_enabled] Those parameters which are not to be set can be left blank. Example for setting dark mode without changing the other parameters: wcs,,,,y,, Example for setting speed of sound to 1450 m/s and disabling acoustics, without changing the other parameters: wcs,1450,,n,,, The response will be an ack wra if the parameters are successfully set, a nak wrn if the command was successfully parsed but the parameters were not successfully set, and a malformed request wr? if the command was not successfully parsed, e.g. if the wrong number of parameters was used, or either speed_of_sound or mounting_rotation_offset was not an integer. The new configuration will not be returned in the response, but can be obtained by issuing a wcc command as above. Velocity report, old format (wrx) [Deprecated] Same purpose as the velocity report , but in an older format: wrx, [time],[vx],[vy],[vz],[fom],[altitude],[valid],[status] Variable Description time Milliseconds since last velocity report (ms) vx Velocity in x direction (m/s) vy Velocity in y direction (m/s) vz Velocity in z direction (m/s) fom Figure of merit, a measure of the accuracy of the velocities (m/s) altitude Distance to the reflecting surface along Z axis (m) valid If y , the DVL has lock on the reflecting surface, and the altitude and velocities are valid (y/n) status 8 bit status mask. Bit 0 is set to 1 for high temperature and DVL will soon enter thermal shutdown. Remaining bits are reserved for future use. Example where velocities are valid: wrx,112.83,0.007,0.017,0.006,0.000,0.93,y,0*d2 wrx,140.43,0.008,0.021,0.012,0.000,0.92,y,0*b7 wrx,118.47,0.009,0.020,0.013,0.000,0.92,y,0*54 Example where velocities and altitude are not valid and a high temperature warning occurs: wrx,1075.51,0.000,0.000,0.000,2.707,-1.00,n,1*04 wrx,1249.29,0.000,0.000,0.000,2.707,-1.00,n,1*6a wrx,1164.94,0.000,0.000,0.000,2.707,-1.00,n,1*39 Transducer report, old format (wrt) [Deprecated] Same purpose as the transducer report , but in an older format, and combining the data of all four transducers: wrt, [dist_1],[dist_2],[dist_3],[dist_4] Variable Description dist_1 Distance (parallel to the transducer beam, i.e. not the vertical distance) to reflecting surface from transducer 1 (m) dist_2 Distance to reflecting surface from transducer 2 (m) dist_3 Distance to reflecting surface from transducer 3 (m) dist_4 Distance to reflecting surface from transducer 4 (m) Example where all distances are valid: wrt,15.00,15.20,14.90,14.20*b1 wrt,14.90,15.10,14.80,14.10*ac Example where distance is not valid for transducer 4: wrt,14.90,15.10,14.80,-1.00*53 wrt,15.00,15.20,14.90,-1.00*71 Checksum The checksum algorithm is CRC-8 (Polynomal: 0x07, Init: 0x00, RefIn/RefOut: false, XorOut: 0x00, Check: 0xf4). Checksum is formatted as a hexadecimal number using 2 lower-case characters (ex: *c3 ). Compatible implementations: Python 3: crcmod crcmod.predefined.mkPredefinedCrcFun(\"crc-8\") Golang: github.com/sigurn/crc8 crc8.MakeTable(crc8.CRC8) Example for how to verify checksum using Python 3 and crcmod : crc = crcmod.predefined.mkPredefinedCrcFun(\"crc-8\") sentence = b\"wrx,1164.94,0.000,0.000,0.000,2.707,-1.00,n,1*39\" data, checksum = sentence.split(b\"*\") if crc(data) == int(checksum, 16): print(\"CRC valid\") else: print(\"CRC invalid\") The crcmod python package can generate code in other languages. Here is an example (subject to the MIT License ) for C which should be straightforward to adapt to other languages. static const uint8_t lookup_table[256] = { 0x00U,0x07U,0x0EU,0x09U,0x1CU,0x1BU,0x12U,0x15U, 0x38U,0x3FU,0x36U,0x31U,0x24U,0x23U,0x2AU,0x2DU, 0x70U,0x77U,0x7EU,0x79U,0x6CU,0x6BU,0x62U,0x65U, 0x48U,0x4FU,0x46U,0x41U,0x54U,0x53U,0x5AU,0x5DU, 0xE0U,0xE7U,0xEEU,0xE9U,0xFCU,0xFBU,0xF2U,0xF5U, 0xD8U,0xDFU,0xD6U,0xD1U,0xC4U,0xC3U,0xCAU,0xCDU, 0x90U,0x97U,0x9EU,0x99U,0x8CU,0x8BU,0x82U,0x85U, 0xA8U,0xAFU,0xA6U,0xA1U,0xB4U,0xB3U,0xBAU,0xBDU, 0xC7U,0xC0U,0xC9U,0xCEU,0xDBU,0xDCU,0xD5U,0xD2U, 0xFFU,0xF8U,0xF1U,0xF6U,0xE3U,0xE4U,0xEDU,0xEAU, 0xB7U,0xB0U,0xB9U,0xBEU,0xABU,0xACU,0xA5U,0xA2U, 0x8FU,0x88U,0x81U,0x86U,0x93U,0x94U,0x9DU,0x9AU, 0x27U,0x20U,0x29U,0x2EU,0x3BU,0x3CU,0x35U,0x32U, 0x1FU,0x18U,0x11U,0x16U,0x03U,0x04U,0x0DU,0x0AU, 0x57U,0x50U,0x59U,0x5EU,0x4BU,0x4CU,0x45U,0x42U, 0x6FU,0x68U,0x61U,0x66U,0x73U,0x74U,0x7DU,0x7AU, 0x89U,0x8EU,0x87U,0x80U,0x95U,0x92U,0x9BU,0x9CU, 0xB1U,0xB6U,0xBFU,0xB8U,0xADU,0xAAU,0xA3U,0xA4U, 0xF9U,0xFEU,0xF7U,0xF0U,0xE5U,0xE2U,0xEBU,0xECU, 0xC1U,0xC6U,0xCFU,0xC8U,0xDDU,0xDAU,0xD3U,0xD4U, 0x69U,0x6EU,0x67U,0x60U,0x75U,0x72U,0x7BU,0x7CU, 0x51U,0x56U,0x5FU,0x58U,0x4DU,0x4AU,0x43U,0x44U, 0x19U,0x1EU,0x17U,0x10U,0x05U,0x02U,0x0BU,0x0CU, 0x21U,0x26U,0x2FU,0x28U,0x3DU,0x3AU,0x33U,0x34U, 0x4EU,0x49U,0x40U,0x47U,0x52U,0x55U,0x5CU,0x5BU, 0x76U,0x71U,0x78U,0x7FU,0x6AU,0x6DU,0x64U,0x63U, 0x3EU,0x39U,0x30U,0x37U,0x22U,0x25U,0x2CU,0x2BU, 0x06U,0x01U,0x08U,0x0FU,0x1AU,0x1DU,0x14U,0x13U, 0xAEU,0xA9U,0xA0U,0xA7U,0xB2U,0xB5U,0xBCU,0xBBU, 0x96U,0x91U,0x98U,0x9FU,0x8AU,0x8DU,0x84U,0x83U, 0xDEU,0xD9U,0xD0U,0xD7U,0xC2U,0xC5U,0xCCU,0xCBU, 0xE6U,0xE1U,0xE8U,0xEFU,0xFAU,0xFDU,0xF4U,0xF3U, }; uint8_t crc8(uint8_t *message, int message_length) { uint8_t checksum = 0; while (message_length > 0) { checksum = lookup_table[*message ^ checksum]; message++; message_length--; } return checksum; } PD6 protocol (TCP/Serial) Overview The PD6 support allows for integration with equipment that may already have a PD6 protocol interface, removing the necessity to create a driver based on the standard Water Linked protocol. PD6 protocol is supported for output via serial and ethernet. PD6 protocol over TCP is always enabled. The port in use is configurable in the GUI. The default port is TCP 1037. The serial output can be configured to output PD6 using the Change serial output protocol command. Command overview Sentences TS, BI and BD are filled with relevant numbers. All other sentences are set to zero values. Timing and scaling data (TS) :TS,YYMMDDHHmmsshh,SS.S,+TT.T,DDDD.D,CCCC.C,BBB <CR><LF> Field Explanation Value YYMMDDHHmmsshh Year, month, day, hour, minute, second, hundredths of seconds Report timestamp SS.S Salinity in parts per thousand (ppt). Always 0 DDDD.D Depth of transducer face in meters. Always 0 CCCC.C Speed of sound in meters per second. Configured speed of sound BBB Built-in Test (BIT) result code. Always 0 Bottom track, instrument referenced velocity data (BI) :BI,\u00b1XXXXX,\u00b1YYYYY,\u00b1ZZZZZ,\u00b1EEEEE,S <CR><LF> Field Explanation Value \u00b1XXXXX X-axis velocity data in mm/s Current speed \u00b1YYYYY Y-axis velocity data in mm/s Current speed \u00b1ZZZZZ Z-axis velocity data in mm/s Current speed \u00b1EEEEE Error in velocity data in mm/s Current error S Status of velocity A = good. V = bad Note Axis used in the BI sentence is the vehicle frame . Bottom track, earth referenced distance data (BD) :BD,\u00b1EEEEEEEE.EE,\u00b1NNNNNNNN.NN,\u00b1UUUUUUUU.UU,DDDD.DD,TTT.TT <CR><LF> Field Explanation Value \u00b1EEEEEEEE.EE East distance in meters. Always 0 \u00b1NNNNNNNN.NN North distance in meters. Always 0 \u00b1UUUUUUUU.UU Upward distance in meters. Always 0 DDDD.DD Range to bottom in meters Current altitude TTT.TT Time since last good velocity estimate in seconds. Always 0 Bottom track, ship referenced distance data (BS) In the 2.4.0 software release the BS values are always zero. As of the 2.4.4 software release the BS values are given by the actual velocity. :BS,\u00b1TTTTTTTT.TT,\u00b1LLLLLLLL.LL,\u00b1NNNNNNN.NN,S <CR><LF> Field Explanation Value \u00b1TTTTTTTT.TT Transverse movement, (+ = Port to Starboard velocity relative to bottom) In mm/s Y axis velocity \u00b1LLLLLLLL.LL Longitudinal movement. (+ = Aft to Forward velocity relative to bottom) In mm/s X axis velocity \u00b1NNNNNNN.NN Ship velocity away from bottom in mm/s Z axis velocity S Status of velocity A = good. V = bad Example output :SA, +0.00, +0.00, 0.00 :TS,22020812061800, 0.0, +0.0, 0.0,1475.0, 0 :WI, +0, +0, +0, +0,V :WS, +0, +0, +0,V :WE, +0, +0, +0,V :WD, +0.00, +0.00, +0.00, 0.00, 0.00 :BI, +123, -420, +2000, +0,A :BS, -420, +123, +2000,A :BE, +0, +0, +0,V :BD, +0.00, +0.00, +0.00, 5.32, 0.00 Range mode configuration Range mode configuration can be used to instruct the DVL to only search for bottom lock in a limited altitude range. This can improve performance when operating in environments where you know the DVL minimum and/or maximum altitude. (Eg when operating in a river or pool) The format for configuring range mode can be as follows: Range specifier Behavior auto The DVL will search for bottom lock in it's full operational area (Default) =a The DVL is locked to range mode a where b is a number from 0-4 a<=b The DVL will search for bottom lock within range mode a and b The available range modes are: Range mode Lower altitude (m) Upper altitude (m) Update rate per second (Hz) 0 0.05 0.6 15 1 0.3 3.0 10 2 1.5 14 1 - 6 3 7.7 36 7 - 8 4 15 max 2 - 4 Examples: =3 The DVL will search for bottom lock between 7.7 and 36m 2<=3 The DVL will search for bottom lock between 1.5 and 36m PD4 protocol (TCP/Serial) Overview The PD4 string is intended for use with equipment that may already have a PD4 protocol interface, removing the necessity to create a driver based on the standard Water Linked protocol. PD4 protocol is supported for output via serial and ethernet. The PD4 protocol over TCP is always enabled. The port in use is configurable in the GUl. The default port is TCP 1038. Note PD4 support was added in software release 2.5.2 and is experimental. Please give feedback on this feature. Data Format PD4 is a binary protocol where fields are defined by their position in one message. Data fields which use more than one byte are LittleEndian encoded. Byte(s) Data type used Unit 0 DVL Data ID 7Dh y 1 Data structure ( Always equal to 0) y 2,3 Number of bytes y 4 System Config (0x10100011 1 ) y 5,6 X velocity bottom y mm/s 7,8 Y velocity bottom y mm/s 9,10 Z velocity bottom y mm/s 11,12 E velocity bottom y mm/s 13,14 BM1 range to bottom y cm 15,16 BM2 range to bottom y cm 17,18 BM3 range to bottom y cm 19,20 BM4 range to bottom y cm 21 Bottom status y bool 22,23 X-Velocity reference layer n 24,25 Y-Velocity reference layer n 26,27 Z-Velocity reference layer n 28,29 E-Velocity reference layer n 30,31 Reference layer start n 32,33 Reference layer end n 34 Reference layer status n 35 Time of first ping - hour y hours 36 Time of first ping - minute y minutes 37 Time of first ping - second y seconds 38 Time of first ping - hundreths y centi-seconds 39,40 Bit result n 41,42 Speed of Sound y m/s 43,44 Temperature n 45,46 Checksum y N/A Notes To use the BM1-BM4 correctly you should use this translation. The numbering comes from the Transducer numbering (see image below) BM1 is transducer 3 BM2 is transducer 1 BM3 is transducer 4 BM4 is transducer 2 Tells that the velocities are in ship coordinates, Tilt is used, Three beam not computed, and 600 Khz \u21a9","title":"Protocol"},{"location":"dvl/dvl-protocol/#water-linked-dvl-protocol","text":"Describes the Water Linked DVL protocols (serial and ethernet).","title":"Water Linked DVL protocol"},{"location":"dvl/dvl-protocol/#terminology","text":"DVL - Doppler Velocity Log - Uses hydro-acoustic beams to measure the velocity at which the DVL is moving across a surface (typically an unmoving one such as the sea bottom), and the distance to this surface. ACK - Acknowledgement. The command issued was successful. NAK - Negative acknowledgement. The command issued failed. Ping - A pulse of sound sent by the DVL Time of validity - Timestamp of the surface reflection ('center of ping') Time of transmission - Timestamp taken directly before sending data over the serial or TCP protocols. The difference between time of transmission and time of validity includes both the time for the acoustic wave to travel from the surface from which it was reflected back to the DVL, and the decoding and processing of this signal internally in the DVL.","title":"Terminology"},{"location":"dvl/dvl-protocol/#version","text":"This document describes serial protocol version 2.6.x (major.minor.patch) and JSON protocol json_v3.1 (major.minor): MAJOR version increments represent incompatible API changes MINOR version increments represent additional backwards-compatible functionality PATCH version increments represent backwards-compatible bug fixes","title":"Version"},{"location":"dvl/dvl-protocol/#version-history-overview","text":"Software release Serial protocol version Ethernet protocol version Main protocol improvements 2.6.1 2.6.0 json_v3.1 Serial baud rate configurable. Add PD4 protocol support in serial 'wcp' command. Some serial protocol names changed . 2.5.2 2.5.0 json_v3.1 Add PD4 protocol support (experimental) 2.4.4 2.5.0 json_v3.1 Change gyro calibration to store persistently. Note: gyro calibration commands now takes up to 15 seconds. 2.4.0 2.5.0 json_v3.1 Add ability to trigger pings (JSON/Serial), add configuration for periodic cycling (JSON/Serial) 2.2.1 2.4.0 json_v3 Add serial output protocol configuration, range mode configuration and calibrate gyro command, Fix missing line ending in configuration (JSON), fix dark mode enabled naming inconsistency (JSON), change speed of sound and mounting rotation offset from integer to float 2.1.0 2.3.0 json_v3 Add configuration, add time_of_validity/time_of_transmission, add covariance (JSON) 2.0.8 2.2.0 json_v2 Add position estimation, add IMU output 1.6.0 2.1.0 - Initial (velocity only)","title":"Version history overview"},{"location":"dvl/dvl-protocol/#json-protocol-tcp","text":"","title":"JSON protocol (TCP)"},{"location":"dvl/dvl-protocol/#overview","text":"The DVL supports sending velocity, transducer, and position updates using the Transmission Control Protocol (TCP). The DVL runs a TCP server on port 16171. The format of each packet is JSON.","title":"Overview"},{"location":"dvl/dvl-protocol/#velocity-and-transducer-report","text":"A velocity-and-transducer report is sent for each velocity calculation of the DVL. The rate depends on the altitude of the DVL (distance to the sea bottom or other reflecting surface), but will be in the range 2-15 Hz. The X, Y, and Z axes are with respect to body frame of the DVL, or the vehicle frame if the DVL is mounted on a vehicle at an angle, specified as a 'mounting rotation offset', from the forward axis of the vehicle. The messages are delimited by newline. Variable Description time Milliseconds since last velocity report (ms) vx Velocity in x direction (m/s) vy Velocity in y direction (m/s) vz Velocity in z direction (m/s) fom Figure of merit, a measure of the accuracy of the velocities (m/s) covariance Covariance matrix for the velocities. The figure of merit is calculated from this (entries in (m/s)^2) altitude Distance to the reflecting surface along the Z axis (m) transducers Is a list containing information from each transducer: [id, velocity (m/s), distance (m), rssi (dBm), nsd (dBm), beam_valid (True/False)] velocity_valid If true, the DVL has a lock on the reflecting surface, and the altitude and velocities are valid (True/False) status 8 bit status mask. Bit 0 is set to 1 for high temperature and DVL will soon enter thermal shutdown. Remaining bits are reserved for future use. time_of_validity Timestamp of the surface reflection, aka 'center of ping' (Unix timestamp in microseconds) time_of_transmission Timestamp from immediately before sending of the report over TCP (Unix timestamp in microseconds) format Format type and version for this report: json_v3.1 type Report type: velocity Example of TCP report (indented for legibility) { \"time\": 106.3935775756836, \"vx\": -3.713480691658333e-05, \"vy\": 5.703703573090024e-05, \"vz\": 2.4990416932269e-05, \"fom\": 0.00016016385052353144, \"covariance\": [ [ 2.4471841442164077e-08, -3.3937477272871774e-09, -1.6659699175747278e-09 ], [ -3.3937477272871774e-09, 1.4654466085062268e-08, 4.0409570134514183e-10 ], [ -1.6659699175747278e-09, 4.0409570134514183e-10, 1.5971971523143225e-09 ] ], \"altitude\": 0.4949815273284912, \"transducers\": [ { \"id\": 0, \"velocity\": 0.00010825289791682735, \"distance\": 0.5568000078201294, \"rssi\": -30.494251251220703, \"nsd\": -88.73271179199219, \"beam_valid\": true }, { \"id\": 1, \"velocity\": -1.4719001228513662e-05, \"distance\": 0.5663999915122986, \"rssi\": -31.095735549926758, \"nsd\": -89.5116958618164, \"beam_valid\": true }, { \"id\": 2, \"velocity\": 2.7863150535267778e-05, \"distance\": 0.537600040435791, \"rssi\": -27.180519104003906, \"nsd\": -96.98075103759766, \"beam_valid\": true }, { \"id\": 3, \"velocity\": 1.9419496311456896e-05, \"distance\": 0.5472000241279602, \"rssi\": -28.006759643554688, \"nsd\": -88.32147216796875, \"beam_valid\": true } ], \"velocity_valid\": true, \"status\": 0, \"format\": \"json_v3.1\", \"type\": \"velocity\", \"time_of_validity\": 1638191471563017, \"time_of_transmission\": 1638191471752336 }","title":"Velocity-and-transducer report"},{"location":"dvl/dvl-protocol/#dead-reckoning-report","text":"A dead reckoning report outputs the current speed, position, and orientation of the DVL as calculated by dead reckoning , with respect to a frame defined by the axes of the DVL's body frame , or vehicle frame if a mounting rotation offset is set, at the start of the dead reckoning run. The expected update rate is 5 Hz. Variable Description ts Time stamp of report (Unix timestamp in seconds) x Distance in X direction (m) y Distance in Y direction (m) z Distance in downward direction (m) std Standard deviation (figure of merit) for position (m) roll Rotation around X axis (degrees) pitch Rotation around Y axis (degrees) yaw Rotation around Z axis, i.e. heading (degrees) type Report type: position_local status Reports if there are any issues with the DVL (0 if no errors, 1 otherwise) format Format type and version for this report: json_v3 Example of a dead reckoning report. { \"ts\": 49056.809, \"x\": 12.43563613697886467, \"y\": 64.617631152402609587, \"z\": 1.767641898933798075, \"std\": 0.001959984190762043, \"roll\": 0.6173566579818726, \"pitch\": 0.6173566579818726, \"yaw\": 0.6173566579818726, \"type\": \"position_local\", \"status\": 0, \"format\": \"json_v3.1\" }","title":"Dead reckoning report"},{"location":"dvl/dvl-protocol/#reset-dead-reckoning","text":"Dead reckoning can be reset by issuing the reset_dead_reckoning command: {\"command\": \"reset_dead_reckoning\"} If the request is successfully received the response will have 'success' set to 'true'. The dead reckoning will have a delay of approximately 50ms until the positioning values being zeroed out. If the response is unsuccessful, the 'success' will be 'false' and a non-empty describing text will be returned in 'error_message'. { \"response_to\":\"reset_dead_reckoning\", \"success\": true, \"error_message\": \"\", \"result\": null, \"format\": \"json_v3.1\", \"type\": \"response\" }","title":"Reset dead reckoning"},{"location":"dvl/dvl-protocol/#calibrate-gyro","text":"The gyro can be calibrated by issuing the calibrate_gyro command: {\"command\":\"calibrate_gyro\"} The response will be as follows if the calibration is successful. If unsuccessful, success will be false , and a non-empty error_message will be provided. { \"response_to\": \"calibrate_gyro\", \"success\": true, \"error_message\": \"\", \"result\": null, \"format\": \"json_v3.1\", \"type\": \"response\" }","title":"Calibrate gyro"},{"location":"dvl/dvl-protocol/#trigger-ping","text":"In setups where multiple acoustic sensors are used it can be useful to control the pinging of each acoustic sensor individually. By setting the configuration acoustic_enabled = false the pinging of the DVL can be externally controlled. Up to 15 external trigger commands can be queued by issuing the trigger_ping command. The DVL will execute each ping in quick succession until no more commands are in the queue. {\"command\":\"trigger_ping\"} The response will be as follows if the calibration is successful. If queue is full, success will be false , and a non-empty error_message will be provided. { \"response_to\": \"trigger_ping\", \"success\": true, \"error_message\": \"\", \"result\": null, \"format\": \"json_v3.1\", \"type\": \"response\" }","title":"Trigger ping"},{"location":"dvl/dvl-protocol/#configuration-over-json","text":"","title":"Configuration over JSON"},{"location":"dvl/dvl-protocol/#configuration-parameters","text":"Variable Description speed_of_sound Speed of sound (1000-2000 m/s). Integer mounting_rotation_offset See the definition of the vehicle frame of the DVL. Typically 0, but can be set to be non-zero if the forward axis of the DVL is not aligned with the forward axis of a vehicle on which it is mounted (0-360 degrees). Integer acoustic_enabled true for normal operation of the DVL, false when the sending of acoustic waves from the DVL is disabled (e.g. to save power or slow down its heating up in air) dark_mode_enabled false when the LED operates as normal , true for no blinking of the LED (e.g. if the LED is interfering with a camera) range_mode auto when operating as normal, otherwise see range mode configuration periodic_cycling_enabled true for normal operation where the DVL periodically searches for bottom lock shorter than the existing bottom lock, false if periodic cycling is disabled","title":"Configuration parameters"},{"location":"dvl/dvl-protocol/#fetching-current-configuration","text":"The current configuration of the DVL can be obtained by issuing the get_config command: {\"command\": \"get_config\"} If the configuration is successfully fetched, the response will be in the following format. If not, success will be false, a non-empty error_message string will be provided, and result will be null . { \"response_to\":\"get_config\", \"success\":true, \"error_message\":\"\", \"result\":{ \"speed_of_sound\":1475.00, \"acoustic_enabled\":true, \"dark_mode_enabled\":false, \"mounting_rotation_offset\":20.00, \"range_mode\":\"auto\", \"periodic_cycling_enabled\":true }, \"format\":\"json_v3.1\", \"type\":\"response\" }","title":"Fetching current configuration"},{"location":"dvl/dvl-protocol/#setting-configuration-parameters","text":"Setting of configuration parameters can be carried out by issuing a set_config in the following format, including those parameters which are to be set: {\"command\":\"set_config\",\"parameters\":{\"speed_of_sound\":1480}} If the parameters are successfully set, the response will be in the following format. If not, success will be false, and a non-empty error_message string will be provided. { \"response_to\": \"set_config\", \"success\": true, \"error_message\": \"\", \"result\" :null, \"format\": \"json_v3.1\", \"type\": \"response\" }","title":"Setting configuration parameters"},{"location":"dvl/dvl-protocol/#serial-protocol","text":"","title":"Serial Protocol"},{"location":"dvl/dvl-protocol/#overview_1","text":"The default serial communication format is 115200 8-N-1 (no hardware flow control). Release 2.6.1 and later allow different baud rates through GUI configuration. Packets sent to and received from the DVL start with a w and end with LF, CR+LF, or CR. The packet format is: Start byte Direction Command Options (0 to many) Checksum End byte w c or r x ,[option] *xx \\n , \\r\\n , or \\r Direction is c (short for 'command') for packets sent to the DVL, and r (short for 'response') for packets sent from the DVL. The commands can be sent from a terminal program that supports sending a full line at a time. The timeout between characters is approximately 10 ms. Note Please verify the baud rate configuration in the GUI if you are unable to communicate with the default baud rate. Note The checksum is optional when sending commands to the DVL. The DVL always returns a checksum. The checksum algorithm is CRC-8 and it is formatted as a hexadecimal number using 2 lower-case characters (ex: *c3 ). See below for details.","title":"Overview"},{"location":"dvl/dvl-protocol/#command-overview","text":"The commands in the table are shown without the checksum and without the mandatory line ending (any of \\n , \\r\\n , or \\r ) for readability. In all cases, the response to a submitted command may be wrn , wr? , or wr! (see below for details), but only the format of a successful response is listed. Command Description Response Description wcv Get protocol version wrv, [major],[minor],[patch] Protocol version. eg: wrv,2.5.0 wcw Get product detail wrw, [name] , [version] , [chipID] , [IP address] Where type is dvl, name is product name, version is software version, chip ID is the chip ID and optionally the IP address if connected to DHCP server: eg: wrw,dvl-a50,2.2.1,0xfedcba98765432 or wrw,dvl-a50,2.2.1,0xfedcba98765432,10.11.12.140 wcs, [configuration parameters] Set configuration parameters wra Successfully set the specified configuration parameters. See Configuration for details wcc Get current configuration wrc, [configuration parameters] Entire current configuration. See Configuration for details wcr Reset dead reckoning wra Successfully started a new dead reckoning run wcx Trigger ping wra Successfully queued a ping wcg Calibrate gyro wra Successfully calibrated gyro wcp Change serial output protocol wra Successfully changed output protocol wrz, [details below] Velocities calculated wru, [details below] Transducer information wrp, [details below] Dead reckoning report wrx, [details below] DEPRECATED: Velocities calculated (old format) wrt, [details below] DEPRECATED: Transducer information (old format) wr? Malformed request: packet cannot be understood or no newline received before timeout wr! Malformed request: packet does not match the given checksum wrn Not acknowledged (nack): an error occurred when handling the packet","title":"Command overview"},{"location":"dvl/dvl-protocol/#velocity-report-wrz","text":"A velocity report is outputted for each velocity calculation of the DVL. The rate depends on the altitude of the DVL (distance to the sea bottom or other reflecting surface), but will be in the range 2-15 Hz. The X, Y, and Z axes are with respect to body frame of the DVL, or the vehicle frame if the DVL is mounted on a vehicle at an angle, specified as a 'mounting rotation offset', from the forward axis of the vehicle. The report has the following format: wrz, [vx],[vy],[vz],[valid],[altitude],[fom],[covariance],[time_of_validity],[time_of_transmission],[time],[status] Variable Description vx Velocity in x direction (m/s) vy Velocity in y direction (m/s) vz Velocity in z direction (m/s) valid If y , the DVL has a lock on the reflecting surface, and the altitude and velocities are valid (y/n) altitude Measured altitude to the bottom (m) fom Figure of merit, a measure of the accuracy of the velocities (m/s) covariance Covariance matrix for the velocities. The figure of merit is calculated from this. 9 entries ((m/s)^2) separated by ; time_of_validity Timestamp of the surface reflection, aka 'center of ping' (Unix timestamp in microseconds) time_of_transmission Timestamp from immediately before sending of the report over TCP (Unix timestamp in microseconds) time Milliseconds since last velocity report (ms) status 8 bit status mask. Bit 0 is set to 1 for high temperature and DVL will soon enter thermal shutdown. Remaining bits are reserved for future use. Example where all velocities are valid: wrz,0.120,-0.400,2.000,y,1.30,1.855,1e-07;0;1.4;0;1.2;0;0.2;0;1e+09,7,14,123.00,1*50","title":"Velocity report (wrz)"},{"location":"dvl/dvl-protocol/#transducer-report-wru","text":"A transducer report is outputted for each of the four transducers of the DVL for each velocity calculation of the DVL. The rate will be the same as that of the velocity report. If the transducer did not receive a signal which could be successfully decoded, distance will be set to -1, and velocity will be set to 0. RSSI and NSD will be outputted in all cases. The report has the following format: wru, [id],[velocity],[distance],[rssi],[nsd] Variable Description id Transducer number velocity Velocity in the direction of the transducer (m/s) distance Distance (parallel to the transducer beam, i.e. not the vertical distance) to the reflecting surface from this transducer (m) rssi Received signal strength indicator: strength of the signal received by this transducer (dBm) nsd Noise spectral density: strength of the background noise received by this transducer (dBm) Example where all data is valid: wru,0,0.070,1.10,-40,-95*9c wru,1,-0.500,1.25,-62,-104*f0 wru,2,2.200,1.40,-56,-98*18 wru,3,1.800,1.35,-58,-96*a3","title":"Transducer report (wru)"},{"location":"dvl/dvl-protocol/#dead-reckoning-report-wrp","text":"A dead reckoning report outputs the current speed, position, and orientation of the DVL as calculated by dead reckoning , with respect to a frame defined by the axes of the DVL's body frame , or vehicle frame if a mounting rotation offset is set, at the start of the dead reckoning run. The expected update rate is 5 Hz. The format is: wrp, [time_stamp],[x],[y],[z],[pos_std],[roll],[pitch],[yaw],[status] Variable Description time_stamp Time stamp of report (Unix timestamp in seconds) x Distance in X direction (m) y Distance in Y direction (m) z Distance in downward direction (m) pos_std Standard deviation (Figure of merit) for position (m) roll Rotation around X axis (degrees) pitch Rotation around Y axis (degrees) yaw Rotation around Z axis, i.e. heading (degrees) status Reports if there are any issues with the DVL (0 if no errors, 1 otherwise) Example: wrp,49056.809,0.41,0.15,1.23,0.4,53.9,13.0,19.3,0*de wrp,49057.269,0.39,0.18,1.23,0.4,53.9,13.0,19.3,0*e2","title":"Dead reckoning report (wrp)"},{"location":"dvl/dvl-protocol/#reset-dead-reckoning-wcr","text":"Dead reckoning can be reset by issuing the wcr command. The reply will be an ack ( wra ) if the reset is successful, and a nak ( wrn ) if not.","title":"Reset dead reckoning (wcr)"},{"location":"dvl/dvl-protocol/#calibrate-gyro-wcg","text":"The gyro can be calibrated by issuing the wcg command. The reply will be an ack ( wra ) if the reset is successful, and a nak ( wrn ) if not.","title":"Calibrate gyro (wcg)"},{"location":"dvl/dvl-protocol/#trigger-ping-wcx","text":"In setups where multiple acoustic sensors are used it can be useful to control the pinging of each acoustic sensor individually. By setting the configuration acoustic_enabled = n the pinging of the DVL can be externally controlled. Up to 15 external trigger commands can be queued by issuing the wcx command. The DVL will execute each ping in quick succession until no more commands are in the queue. The reply will be an ack ( wra ) if the command is successful, and a nak ( wrn ) if queue is full.","title":"Trigger ping (wcx)"},{"location":"dvl/dvl-protocol/#change-serial-output-protocol-wcp","text":"The serial output protocol in use can configured by issuing the wcp command. The selected protocol is persistent over reboots. wcp,[protocol number] The supported protocols are: Protocol number Name Description 0 Output disabled No output on serial. Recommended if serial port is not used to lower latency on ethernet protocols. 1 WL - Serial V1 and V2 All output including the deprecated wrx and wrt sentences. 2 PD6 PD6 protocol output. See PD6 protocol description 3 WL - Serial V2 All output excluding the deprecated wrx and wrt sentences. 4 Not used Not used 5 Not used Not used 6 PD4 PD4 protocol output See PD4 protocol description The reply will be an ack ( wra ) if the protocol change is successful, and a nak ( wrn ) if not. Example setting configuring output to use protocol number 3: wcp,3 Note Prior to release 2.6.1 protocol number 1 was named Backward compatible and protocol number 3 was named Latest . There is no change in functionality.","title":"Change serial output protocol (wcp)"},{"location":"dvl/dvl-protocol/#configuration-over-serial","text":"","title":"Configuration over serial"},{"location":"dvl/dvl-protocol/#configuration-parameters_1","text":"Variable Description speed_of_sound Speed of sound (1000-2000 m/s). Float mounting_rotation_offset See the definition of the vehicle frame of the DVL. Typically 0, but can be set to be non-zero if the forward axis of the DVL is not aligned with the forward axis of a vehicle on which it is mounted (0-360 degrees). Float acoustic_enabled y for normal operation of the DVL, n when the sending of acoustic waves from the DVL is disabled (e.g. to save power or slow down its heating up in air) dark_mode_enabled n when the LED operates as normal . y for no blinking of LED (e.g. if the LED is interfering with a camera) range_mode auto when operating as normal, otherwise see range mode configuration periodic_cycling_enabled y when operating as normal, otherwise n . See Configuration over JSON for details Note For backward compatibility the range_mode and periodic_cycling_enabled parameters are optional when setting the configuration. They will always be returned when reading the configuration ( wcc ). Speed of sound and mounting rotation was changed from integer to float in serial protocol 2.4.0","title":"Configuration parameters"},{"location":"dvl/dvl-protocol/#fetching-current-configuration_1","text":"The current configuration of the DVL can be obtained by issuing the wcc command. If the configuration is successfully fetched, the response will be in the following format. If not, a nak wrn will be returned. wrc,[speed_of_sound],[mounting_rotation_offset],[acoustic_enabled],[dark_mode_enabled],[range_mode],[periodic_cycling_enabled]","title":"Fetching current configuration"},{"location":"dvl/dvl-protocol/#setting-configuration-parameters_1","text":"Setting of configuration parameters can be carried out by issuing the wcs command in the following format. wcs,[speed_of_sound],[mounting_rotation_offset],[acoustic_enabled],[dark_mode_enabled],[range_mode],[periodic_cycling_enabled] Those parameters which are not to be set can be left blank. Example for setting dark mode without changing the other parameters: wcs,,,,y,, Example for setting speed of sound to 1450 m/s and disabling acoustics, without changing the other parameters: wcs,1450,,n,,, The response will be an ack wra if the parameters are successfully set, a nak wrn if the command was successfully parsed but the parameters were not successfully set, and a malformed request wr? if the command was not successfully parsed, e.g. if the wrong number of parameters was used, or either speed_of_sound or mounting_rotation_offset was not an integer. The new configuration will not be returned in the response, but can be obtained by issuing a wcc command as above.","title":"Setting configuration parameters"},{"location":"dvl/dvl-protocol/#velocity-report-old-format-wrx-deprecated","text":"Same purpose as the velocity report , but in an older format: wrx, [time],[vx],[vy],[vz],[fom],[altitude],[valid],[status] Variable Description time Milliseconds since last velocity report (ms) vx Velocity in x direction (m/s) vy Velocity in y direction (m/s) vz Velocity in z direction (m/s) fom Figure of merit, a measure of the accuracy of the velocities (m/s) altitude Distance to the reflecting surface along Z axis (m) valid If y , the DVL has lock on the reflecting surface, and the altitude and velocities are valid (y/n) status 8 bit status mask. Bit 0 is set to 1 for high temperature and DVL will soon enter thermal shutdown. Remaining bits are reserved for future use. Example where velocities are valid: wrx,112.83,0.007,0.017,0.006,0.000,0.93,y,0*d2 wrx,140.43,0.008,0.021,0.012,0.000,0.92,y,0*b7 wrx,118.47,0.009,0.020,0.013,0.000,0.92,y,0*54 Example where velocities and altitude are not valid and a high temperature warning occurs: wrx,1075.51,0.000,0.000,0.000,2.707,-1.00,n,1*04 wrx,1249.29,0.000,0.000,0.000,2.707,-1.00,n,1*6a wrx,1164.94,0.000,0.000,0.000,2.707,-1.00,n,1*39","title":"Velocity report, old format (wrx) [Deprecated]"},{"location":"dvl/dvl-protocol/#transducer-report-old-format-wrt-deprecated","text":"Same purpose as the transducer report , but in an older format, and combining the data of all four transducers: wrt, [dist_1],[dist_2],[dist_3],[dist_4] Variable Description dist_1 Distance (parallel to the transducer beam, i.e. not the vertical distance) to reflecting surface from transducer 1 (m) dist_2 Distance to reflecting surface from transducer 2 (m) dist_3 Distance to reflecting surface from transducer 3 (m) dist_4 Distance to reflecting surface from transducer 4 (m) Example where all distances are valid: wrt,15.00,15.20,14.90,14.20*b1 wrt,14.90,15.10,14.80,14.10*ac Example where distance is not valid for transducer 4: wrt,14.90,15.10,14.80,-1.00*53 wrt,15.00,15.20,14.90,-1.00*71","title":"Transducer report, old format (wrt) [Deprecated]"},{"location":"dvl/dvl-protocol/#checksum","text":"The checksum algorithm is CRC-8 (Polynomal: 0x07, Init: 0x00, RefIn/RefOut: false, XorOut: 0x00, Check: 0xf4). Checksum is formatted as a hexadecimal number using 2 lower-case characters (ex: *c3 ). Compatible implementations: Python 3: crcmod crcmod.predefined.mkPredefinedCrcFun(\"crc-8\") Golang: github.com/sigurn/crc8 crc8.MakeTable(crc8.CRC8) Example for how to verify checksum using Python 3 and crcmod : crc = crcmod.predefined.mkPredefinedCrcFun(\"crc-8\") sentence = b\"wrx,1164.94,0.000,0.000,0.000,2.707,-1.00,n,1*39\" data, checksum = sentence.split(b\"*\") if crc(data) == int(checksum, 16): print(\"CRC valid\") else: print(\"CRC invalid\") The crcmod python package can generate code in other languages. Here is an example (subject to the MIT License ) for C which should be straightforward to adapt to other languages. static const uint8_t lookup_table[256] = { 0x00U,0x07U,0x0EU,0x09U,0x1CU,0x1BU,0x12U,0x15U, 0x38U,0x3FU,0x36U,0x31U,0x24U,0x23U,0x2AU,0x2DU, 0x70U,0x77U,0x7EU,0x79U,0x6CU,0x6BU,0x62U,0x65U, 0x48U,0x4FU,0x46U,0x41U,0x54U,0x53U,0x5AU,0x5DU, 0xE0U,0xE7U,0xEEU,0xE9U,0xFCU,0xFBU,0xF2U,0xF5U, 0xD8U,0xDFU,0xD6U,0xD1U,0xC4U,0xC3U,0xCAU,0xCDU, 0x90U,0x97U,0x9EU,0x99U,0x8CU,0x8BU,0x82U,0x85U, 0xA8U,0xAFU,0xA6U,0xA1U,0xB4U,0xB3U,0xBAU,0xBDU, 0xC7U,0xC0U,0xC9U,0xCEU,0xDBU,0xDCU,0xD5U,0xD2U, 0xFFU,0xF8U,0xF1U,0xF6U,0xE3U,0xE4U,0xEDU,0xEAU, 0xB7U,0xB0U,0xB9U,0xBEU,0xABU,0xACU,0xA5U,0xA2U, 0x8FU,0x88U,0x81U,0x86U,0x93U,0x94U,0x9DU,0x9AU, 0x27U,0x20U,0x29U,0x2EU,0x3BU,0x3CU,0x35U,0x32U, 0x1FU,0x18U,0x11U,0x16U,0x03U,0x04U,0x0DU,0x0AU, 0x57U,0x50U,0x59U,0x5EU,0x4BU,0x4CU,0x45U,0x42U, 0x6FU,0x68U,0x61U,0x66U,0x73U,0x74U,0x7DU,0x7AU, 0x89U,0x8EU,0x87U,0x80U,0x95U,0x92U,0x9BU,0x9CU, 0xB1U,0xB6U,0xBFU,0xB8U,0xADU,0xAAU,0xA3U,0xA4U, 0xF9U,0xFEU,0xF7U,0xF0U,0xE5U,0xE2U,0xEBU,0xECU, 0xC1U,0xC6U,0xCFU,0xC8U,0xDDU,0xDAU,0xD3U,0xD4U, 0x69U,0x6EU,0x67U,0x60U,0x75U,0x72U,0x7BU,0x7CU, 0x51U,0x56U,0x5FU,0x58U,0x4DU,0x4AU,0x43U,0x44U, 0x19U,0x1EU,0x17U,0x10U,0x05U,0x02U,0x0BU,0x0CU, 0x21U,0x26U,0x2FU,0x28U,0x3DU,0x3AU,0x33U,0x34U, 0x4EU,0x49U,0x40U,0x47U,0x52U,0x55U,0x5CU,0x5BU, 0x76U,0x71U,0x78U,0x7FU,0x6AU,0x6DU,0x64U,0x63U, 0x3EU,0x39U,0x30U,0x37U,0x22U,0x25U,0x2CU,0x2BU, 0x06U,0x01U,0x08U,0x0FU,0x1AU,0x1DU,0x14U,0x13U, 0xAEU,0xA9U,0xA0U,0xA7U,0xB2U,0xB5U,0xBCU,0xBBU, 0x96U,0x91U,0x98U,0x9FU,0x8AU,0x8DU,0x84U,0x83U, 0xDEU,0xD9U,0xD0U,0xD7U,0xC2U,0xC5U,0xCCU,0xCBU, 0xE6U,0xE1U,0xE8U,0xEFU,0xFAU,0xFDU,0xF4U,0xF3U, }; uint8_t crc8(uint8_t *message, int message_length) { uint8_t checksum = 0; while (message_length > 0) { checksum = lookup_table[*message ^ checksum]; message++; message_length--; } return checksum; }","title":"Checksum"},{"location":"dvl/dvl-protocol/#pd6-protocol-tcpserial","text":"","title":"PD6 protocol (TCP/Serial)"},{"location":"dvl/dvl-protocol/#overview_2","text":"The PD6 support allows for integration with equipment that may already have a PD6 protocol interface, removing the necessity to create a driver based on the standard Water Linked protocol. PD6 protocol is supported for output via serial and ethernet. PD6 protocol over TCP is always enabled. The port in use is configurable in the GUI. The default port is TCP 1037. The serial output can be configured to output PD6 using the Change serial output protocol command.","title":"Overview"},{"location":"dvl/dvl-protocol/#command-overview_1","text":"Sentences TS, BI and BD are filled with relevant numbers. All other sentences are set to zero values.","title":"Command overview"},{"location":"dvl/dvl-protocol/#timing-and-scaling-data-ts","text":":TS,YYMMDDHHmmsshh,SS.S,+TT.T,DDDD.D,CCCC.C,BBB <CR><LF> Field Explanation Value YYMMDDHHmmsshh Year, month, day, hour, minute, second, hundredths of seconds Report timestamp SS.S Salinity in parts per thousand (ppt). Always 0 DDDD.D Depth of transducer face in meters. Always 0 CCCC.C Speed of sound in meters per second. Configured speed of sound BBB Built-in Test (BIT) result code. Always 0","title":"Timing and scaling data (TS)"},{"location":"dvl/dvl-protocol/#bottom-track-instrument-referenced-velocity-data-bi","text":":BI,\u00b1XXXXX,\u00b1YYYYY,\u00b1ZZZZZ,\u00b1EEEEE,S <CR><LF> Field Explanation Value \u00b1XXXXX X-axis velocity data in mm/s Current speed \u00b1YYYYY Y-axis velocity data in mm/s Current speed \u00b1ZZZZZ Z-axis velocity data in mm/s Current speed \u00b1EEEEE Error in velocity data in mm/s Current error S Status of velocity A = good. V = bad Note Axis used in the BI sentence is the vehicle frame .","title":"Bottom track, instrument referenced velocity data (BI)"},{"location":"dvl/dvl-protocol/#bottom-track-earth-referenced-distance-data-bd","text":":BD,\u00b1EEEEEEEE.EE,\u00b1NNNNNNNN.NN,\u00b1UUUUUUUU.UU,DDDD.DD,TTT.TT <CR><LF> Field Explanation Value \u00b1EEEEEEEE.EE East distance in meters. Always 0 \u00b1NNNNNNNN.NN North distance in meters. Always 0 \u00b1UUUUUUUU.UU Upward distance in meters. Always 0 DDDD.DD Range to bottom in meters Current altitude TTT.TT Time since last good velocity estimate in seconds. Always 0","title":"Bottom track, earth referenced distance data (BD)"},{"location":"dvl/dvl-protocol/#bottom-track-ship-referenced-distance-data-bs","text":"In the 2.4.0 software release the BS values are always zero. As of the 2.4.4 software release the BS values are given by the actual velocity. :BS,\u00b1TTTTTTTT.TT,\u00b1LLLLLLLL.LL,\u00b1NNNNNNN.NN,S <CR><LF> Field Explanation Value \u00b1TTTTTTTT.TT Transverse movement, (+ = Port to Starboard velocity relative to bottom) In mm/s Y axis velocity \u00b1LLLLLLLL.LL Longitudinal movement. (+ = Aft to Forward velocity relative to bottom) In mm/s X axis velocity \u00b1NNNNNNN.NN Ship velocity away from bottom in mm/s Z axis velocity S Status of velocity A = good. V = bad","title":"Bottom track, ship referenced distance data (BS)"},{"location":"dvl/dvl-protocol/#example-output","text":":SA, +0.00, +0.00, 0.00 :TS,22020812061800, 0.0, +0.0, 0.0,1475.0, 0 :WI, +0, +0, +0, +0,V :WS, +0, +0, +0,V :WE, +0, +0, +0,V :WD, +0.00, +0.00, +0.00, 0.00, 0.00 :BI, +123, -420, +2000, +0,A :BS, -420, +123, +2000,A :BE, +0, +0, +0,V :BD, +0.00, +0.00, +0.00, 5.32, 0.00","title":"Example output"},{"location":"dvl/dvl-protocol/#range-mode-configuration","text":"Range mode configuration can be used to instruct the DVL to only search for bottom lock in a limited altitude range. This can improve performance when operating in environments where you know the DVL minimum and/or maximum altitude. (Eg when operating in a river or pool) The format for configuring range mode can be as follows: Range specifier Behavior auto The DVL will search for bottom lock in it's full operational area (Default) =a The DVL is locked to range mode a where b is a number from 0-4 a<=b The DVL will search for bottom lock within range mode a and b The available range modes are: Range mode Lower altitude (m) Upper altitude (m) Update rate per second (Hz) 0 0.05 0.6 15 1 0.3 3.0 10 2 1.5 14 1 - 6 3 7.7 36 7 - 8 4 15 max 2 - 4 Examples: =3 The DVL will search for bottom lock between 7.7 and 36m 2<=3 The DVL will search for bottom lock between 1.5 and 36m","title":"Range mode configuration"},{"location":"dvl/dvl-protocol/#pd4-protocol-tcpserial","text":"","title":"PD4 protocol (TCP/Serial)"},{"location":"dvl/dvl-protocol/#overview_3","text":"The PD4 string is intended for use with equipment that may already have a PD4 protocol interface, removing the necessity to create a driver based on the standard Water Linked protocol. PD4 protocol is supported for output via serial and ethernet. The PD4 protocol over TCP is always enabled. The port in use is configurable in the GUl. The default port is TCP 1038. Note PD4 support was added in software release 2.5.2 and is experimental. Please give feedback on this feature.","title":"Overview"},{"location":"dvl/dvl-protocol/#data-format","text":"PD4 is a binary protocol where fields are defined by their position in one message. Data fields which use more than one byte are LittleEndian encoded. Byte(s) Data type used Unit 0 DVL Data ID 7Dh y 1 Data structure ( Always equal to 0) y 2,3 Number of bytes y 4 System Config (0x10100011 1 ) y 5,6 X velocity bottom y mm/s 7,8 Y velocity bottom y mm/s 9,10 Z velocity bottom y mm/s 11,12 E velocity bottom y mm/s 13,14 BM1 range to bottom y cm 15,16 BM2 range to bottom y cm 17,18 BM3 range to bottom y cm 19,20 BM4 range to bottom y cm 21 Bottom status y bool 22,23 X-Velocity reference layer n 24,25 Y-Velocity reference layer n 26,27 Z-Velocity reference layer n 28,29 E-Velocity reference layer n 30,31 Reference layer start n 32,33 Reference layer end n 34 Reference layer status n 35 Time of first ping - hour y hours 36 Time of first ping - minute y minutes 37 Time of first ping - second y seconds 38 Time of first ping - hundreths y centi-seconds 39,40 Bit result n 41,42 Speed of Sound y m/s 43,44 Temperature n 45,46 Checksum y N/A","title":"Data Format"},{"location":"dvl/dvl-protocol/#notes","text":"To use the BM1-BM4 correctly you should use this translation. The numbering comes from the Transducer numbering (see image below) BM1 is transducer 3 BM2 is transducer 1 BM3 is transducer 4 BM4 is transducer 2 Tells that the velocities are in ship coordinates, Tilt is used, Three beam not computed, and 600 Khz \u21a9","title":"Notes"},{"location":"dvl/dvl-troubleshooting/","text":"DVL Troubleshooting Is my DVL faulty? Below is a small list to check if your DVL is faulty or you are experiencing any issues. It starts with the basic before moving on to more advanced troubleshooting. When you come to the point of failure or the troubleshooting do not help, please submit a support ticket to our support team through our Support portal . Please write what is the issue and how you have tested the DVL. Please describe how the test environment is setup and how the DVL is mounted. Please add any Diagnostic reports and pictures of the test setup. This will help our support team greatly! If the trouble shooting guide do not help, please check out FAQ DVL ! Check if DVL is powered Put the DVL under water and power it on with an adequate power supply. LED Check the LED status, see LED Signals . Wiring Check that you have wired your DVL correctly, see Wiring interface . 1.1 If you have custom connector you need to ask the supplier for the correct drawings. Check for damages along the cable and that there are good connection where you have terminated your DVL. Check for short between Negative/Ground and Positive (10-30V). Environmental Check The Line og sight should be clear of any obstacles including walls, see Line of sight . 1.1 One easy way to make sure the Line of sight is clear from any walls is to observe that all beam shows approximately the same distance to the bottom. If some of the beams are flickering or showing another distance it might pick up a reflection from a wall or some other obstacle in the line of sight. Obstacle free radius from the DVL to the wall depending on the distance to the bottom can be calculated with this formula: Obstacle free radius = tan(32.5\u00b0) \u00d7 distance from DVL to bottom . If testing in a pool, tank or bucket it should not be made out of a polished metal or very clean surfaces. This can introduce more noise and make it harder for the DVL to get a bottom lock. Check that there are no motors, echo sunders, pumps, running house. This can create noise in the same frequency as the DVL and have an impact on the acoustic signal. Make sure the environment is not acting on the DVL in a way that makes it pitch and yaw (waves). That will send the acoustic signal in many directions making it hard to achieve a bottom lock. GUI Connect your DVL yo Ethernet by following the Network documentation, see Setup Network . Use the Fallback IP if you are struggling. You are able to access and see the Dashboard like displayed in our Web Demo . Check that you hav have latest software, see Software Updates Collecting data Assuming you have checked the above and your testing environment will not affect the performance of the DVL you can now start collecting data! Go into the Diagnostic report and collect data. Fill the description with relevant information of the test environment and observed issue. Take picture of the test environment and how DVL is mounted to bracket or ROV. If there are know issues under certain conditions/setup please perform these tests as well and collect diagnostic reports. Open a ticker through our support portal Support portal where you upload the diagnostic reports, pictures with a description of your issue.","title":"Troubleshooting"},{"location":"dvl/dvl-troubleshooting/#dvl-troubleshooting","text":"","title":"DVL Troubleshooting"},{"location":"dvl/dvl-troubleshooting/#is-my-dvl-faulty","text":"Below is a small list to check if your DVL is faulty or you are experiencing any issues. It starts with the basic before moving on to more advanced troubleshooting. When you come to the point of failure or the troubleshooting do not help, please submit a support ticket to our support team through our Support portal . Please write what is the issue and how you have tested the DVL. Please describe how the test environment is setup and how the DVL is mounted. Please add any Diagnostic reports and pictures of the test setup. This will help our support team greatly! If the trouble shooting guide do not help, please check out FAQ DVL !","title":"Is my DVL faulty?"},{"location":"dvl/dvl-troubleshooting/#check-if-dvl-is-powered","text":"Put the DVL under water and power it on with an adequate power supply.","title":"Check if DVL is powered"},{"location":"dvl/dvl-troubleshooting/#led","text":"Check the LED status, see LED Signals .","title":"LED"},{"location":"dvl/dvl-troubleshooting/#wiring","text":"Check that you have wired your DVL correctly, see Wiring interface . 1.1 If you have custom connector you need to ask the supplier for the correct drawings. Check for damages along the cable and that there are good connection where you have terminated your DVL. Check for short between Negative/Ground and Positive (10-30V).","title":"Wiring"},{"location":"dvl/dvl-troubleshooting/#environmental-check","text":"The Line og sight should be clear of any obstacles including walls, see Line of sight . 1.1 One easy way to make sure the Line of sight is clear from any walls is to observe that all beam shows approximately the same distance to the bottom. If some of the beams are flickering or showing another distance it might pick up a reflection from a wall or some other obstacle in the line of sight. Obstacle free radius from the DVL to the wall depending on the distance to the bottom can be calculated with this formula: Obstacle free radius = tan(32.5\u00b0) \u00d7 distance from DVL to bottom . If testing in a pool, tank or bucket it should not be made out of a polished metal or very clean surfaces. This can introduce more noise and make it harder for the DVL to get a bottom lock. Check that there are no motors, echo sunders, pumps, running house. This can create noise in the same frequency as the DVL and have an impact on the acoustic signal. Make sure the environment is not acting on the DVL in a way that makes it pitch and yaw (waves). That will send the acoustic signal in many directions making it hard to achieve a bottom lock.","title":"Environmental Check"},{"location":"dvl/dvl-troubleshooting/#gui","text":"Connect your DVL yo Ethernet by following the Network documentation, see Setup Network . Use the Fallback IP if you are struggling. You are able to access and see the Dashboard like displayed in our Web Demo . Check that you hav have latest software, see Software Updates","title":"GUI"},{"location":"dvl/dvl-troubleshooting/#collecting-data","text":"Assuming you have checked the above and your testing environment will not affect the performance of the DVL you can now start collecting data! Go into the Diagnostic report and collect data. Fill the description with relevant information of the test environment and observed issue. Take picture of the test environment and how DVL is mounted to bracket or ROV. If there are know issues under certain conditions/setup please perform these tests as well and collect diagnostic reports. Open a ticker through our support portal Support portal where you upload the diagnostic reports, pictures with a description of your issue.","title":"Collecting data"},{"location":"dvl/faq/","text":"DVL FAQ Below are some frequently asked questions about the DVL. Click on a question in the table of contents to the right or simply scroll down to read the FAQs. 1. Do I need to calibrate the IMU each time I power on the DVL? No. If you use the software version 2.4.5 or later, the calibration is saved in memory. 2. Will the temperature affect the IMU? Yes. The IMU will perform differently under temperatures that differ significantly from the conditions at which it was calibrated. 3. Why does the yaw angle change rapidly? Yaw angle in the DVL GUI may increase or otherwise change rapidly if the DVL\u2019s gyro has not been calibrated or temperature changes. Please see the following for more on calibration: Calibrate the IMU Note If only the velocity output of the DVL is required, you can ignore changes in yaw angle. The yaw angle is only relevant (and thus calibration is needed) if the DVL\u2019s dead reckoning functionality is used. 4. Can we test/operate the DVL in air? You will not be able to get valid velocity measurements in air. It is possible to power the DVL out of the water for a short time, but the DVL warms up quickly. If possible, we recommend avoiding this. A great setup for lab work is to keep the DVL submerged in a small bucket of water. We realize it may be impractical to avoid air usage altogether when the DVL is mounted. One option is to disable the DVL\u2019s acoustics while it is out of water to reduce heating. This option is available under Configuration in the DVL GUI. Note If you do use the DVL in air, we strongly recommend running software version 2.0.8 or higher, which allows the DVL to shut down safely if it reaches a critical temperature. 5. What is the connector on the DVL? The DVL A50/A125 is supplied with a cable tail that includes an interface board containing: An Ethernet connector, allowing a direct plug-and-play link to your computer. A Micro-USB port (Revision 4 I/O card), enabling USB output. Simply plug a USB cable from the DVL to your computer. Earlier revisions have a UART interface on the board, which can be soldered to for serial connections. The interface board can be removed for permanent mounting on a vehicle. Refer to the wiring interface documentation for setting up Ethernet and/or serial connections as needed. Water Linked does not provide a specific connector for this purpose. 6. Can the DVL be used as an ADCP? No. The DVL\u2019s algorithms are specifically designed to track reflections from the seafloor. An ADCP requires measuring reflections from water-borne particles at various depths, which uses a different processing approach. 7. Why does the DVL lose connection? If you notice periodic data dropouts or lost connections, there are a few common causes to consider: Insufficient Power If the DVL is not receiving enough power, you may see periodic dropouts. Try using a power supply with higher voltage/current (for instance, 18V at up to 2A or 24V at up to 1.5A). Poor Physical Connection If the DVL was previously functioning but suddenly loses connection, inspect cables, connectors, and any terminations on the ROV or topside computer. Thermal Shutdown To protect the DVL from damage due to overheating, it may shut down automatically. This will result in a lost connection until it cools and restarts. 8. What is the Source level (dB re 1 \u03bcPa @ 1 m)? The maximum transmit source level is 200 dB. 9. Can the DVL overheat? Yes. The DVL has a thermal shutdown to avoid damage. It will issue a warning before shutting down at 55\u2103. Once it cools below 50\u2103, it automatically restarts. If the overheating issue is not addressed, it may repeat this shutdown/restart cycle. For more details, see Protocol . 10. What is the latency when using the API over Ethernet? When sending commands over TCP, the average latency is around 4 ms, with a standard deviation of 2 ms. The maximum observed latency is 13 ms. 11. Does the DVL have an RS-232 interface? No. The DVL does not support RS-232. It only provides a TTL (3.3V) UART interface, which is inherently incompatible with RS-232. If RS-232 is required, you will need an external level converter. 12. What is the velocity output frequency? The velocity output frequency varies with altitude. - At lower altitudes (close to the seafloor), the DVL can reach an update frequency of 15 Hz . - At higher altitudes, it typically operates between 2\u20134 Hz . For more details, see Range mode . In Auto mode , the DVL automatically selects the range mode it deems optimal. 13. Will the DVL work over a soft seabed, such as sand? Yes, the DVL can operate over soft bottoms. However, softer seabeds absorb more acoustic energy, which reduces the maximum altitude at which the DVL can reliably track. The degree of range reduction varies from environment to environment and may require on-site testing to determine.","title":"DVL FAQ"},{"location":"dvl/faq/#dvl-faq","text":"Below are some frequently asked questions about the DVL. Click on a question in the table of contents to the right or simply scroll down to read the FAQs.","title":"DVL FAQ"},{"location":"dvl/faq/#1-do-i-need-to-calibrate-the-imu-each-time-i-power-on-the-dvl","text":"No. If you use the software version 2.4.5 or later, the calibration is saved in memory.","title":"1. Do I need to calibrate the IMU each time I power on the DVL?"},{"location":"dvl/faq/#2-will-the-temperature-affect-the-imu","text":"Yes. The IMU will perform differently under temperatures that differ significantly from the conditions at which it was calibrated.","title":"2. Will the temperature affect the IMU?"},{"location":"dvl/faq/#3-why-does-the-yaw-angle-change-rapidly","text":"Yaw angle in the DVL GUI may increase or otherwise change rapidly if the DVL\u2019s gyro has not been calibrated or temperature changes. Please see the following for more on calibration: Calibrate the IMU Note If only the velocity output of the DVL is required, you can ignore changes in yaw angle. The yaw angle is only relevant (and thus calibration is needed) if the DVL\u2019s dead reckoning functionality is used.","title":"3. Why does the yaw angle change rapidly?"},{"location":"dvl/faq/#4-can-we-testoperate-the-dvl-in-air","text":"You will not be able to get valid velocity measurements in air. It is possible to power the DVL out of the water for a short time, but the DVL warms up quickly. If possible, we recommend avoiding this. A great setup for lab work is to keep the DVL submerged in a small bucket of water. We realize it may be impractical to avoid air usage altogether when the DVL is mounted. One option is to disable the DVL\u2019s acoustics while it is out of water to reduce heating. This option is available under Configuration in the DVL GUI. Note If you do use the DVL in air, we strongly recommend running software version 2.0.8 or higher, which allows the DVL to shut down safely if it reaches a critical temperature.","title":"4. Can we test/operate the DVL in air?"},{"location":"dvl/faq/#5-what-is-the-connector-on-the-dvl","text":"The DVL A50/A125 is supplied with a cable tail that includes an interface board containing: An Ethernet connector, allowing a direct plug-and-play link to your computer. A Micro-USB port (Revision 4 I/O card), enabling USB output. Simply plug a USB cable from the DVL to your computer. Earlier revisions have a UART interface on the board, which can be soldered to for serial connections. The interface board can be removed for permanent mounting on a vehicle. Refer to the wiring interface documentation for setting up Ethernet and/or serial connections as needed. Water Linked does not provide a specific connector for this purpose.","title":"5. What is the connector on the DVL?"},{"location":"dvl/faq/#6-can-the-dvl-be-used-as-an-adcp","text":"No. The DVL\u2019s algorithms are specifically designed to track reflections from the seafloor. An ADCP requires measuring reflections from water-borne particles at various depths, which uses a different processing approach.","title":"6. Can the DVL be used as an ADCP?"},{"location":"dvl/faq/#7-why-does-the-dvl-lose-connection","text":"If you notice periodic data dropouts or lost connections, there are a few common causes to consider: Insufficient Power If the DVL is not receiving enough power, you may see periodic dropouts. Try using a power supply with higher voltage/current (for instance, 18V at up to 2A or 24V at up to 1.5A). Poor Physical Connection If the DVL was previously functioning but suddenly loses connection, inspect cables, connectors, and any terminations on the ROV or topside computer. Thermal Shutdown To protect the DVL from damage due to overheating, it may shut down automatically. This will result in a lost connection until it cools and restarts.","title":"7. Why does the DVL lose connection?"},{"location":"dvl/faq/#8-what-is-the-source-level-db-re-1-pa-1-m","text":"The maximum transmit source level is 200 dB.","title":"8. What is the Source level (dB re 1 \u03bcPa @ 1 m)?"},{"location":"dvl/faq/#9-can-the-dvl-overheat","text":"Yes. The DVL has a thermal shutdown to avoid damage. It will issue a warning before shutting down at 55\u2103. Once it cools below 50\u2103, it automatically restarts. If the overheating issue is not addressed, it may repeat this shutdown/restart cycle. For more details, see Protocol .","title":"9. Can the DVL overheat?"},{"location":"dvl/faq/#10-what-is-the-latency-when-using-the-api-over-ethernet","text":"When sending commands over TCP, the average latency is around 4 ms, with a standard deviation of 2 ms. The maximum observed latency is 13 ms.","title":"10. What is the latency when using the API over Ethernet?"},{"location":"dvl/faq/#11-does-the-dvl-have-an-rs-232-interface","text":"No. The DVL does not support RS-232. It only provides a TTL (3.3V) UART interface, which is inherently incompatible with RS-232. If RS-232 is required, you will need an external level converter.","title":"11. Does the DVL have an RS-232 interface?"},{"location":"dvl/faq/#12-what-is-the-velocity-output-frequency","text":"The velocity output frequency varies with altitude. - At lower altitudes (close to the seafloor), the DVL can reach an update frequency of 15 Hz . - At higher altitudes, it typically operates between 2\u20134 Hz . For more details, see Range mode . In Auto mode , the DVL automatically selects the range mode it deems optimal.","title":"12. What is the velocity output frequency?"},{"location":"dvl/faq/#13-will-the-dvl-work-over-a-soft-seabed-such-as-sand","text":"Yes, the DVL can operate over soft bottoms. However, softer seabeds absorb more acoustic energy, which reduces the maximum altitude at which the DVL can reliably track. The degree of range reduction varies from environment to environment and may require on-site testing to determine.","title":"13. Will the DVL work over a soft seabed, such as sand?"},{"location":"dvl/interfaces/","text":"Interfaces For both the DVL-A50 and the DVL-A125. LED Signals No green light: Power is off. Fixed green light: The DVL is powering on. Depending on configuration it can take ~30-60 seconds to power on. Flashing green light, mostly off (slow, every few seconds): DVL looking for bottom lock. Flashing green light, mostly on (slow, every few seconds): DVL has bottom lock. Flashing green light (fast, many times a second): DVL is in thermal shutdown. Wiring interface The tables below shows the pinning of the DVL interface. Interface Color Negative/Ground Black Positive (10-30V) Red ETH RX+ Green/White ETH RX- Green ETH TX- Orange ETH TX+ Orange/White UART TX Brown/White UART RX Brown Shielded wire Naked (silver) Seacon MCOM8M Connector (DVL A50 only) The table below shows the specific pinout for the Seacon MCOM8M connector. Interface Pin Negative/Ground 1 Positive (10-30V) 2 ETH RX+ 3 ETH RX- 4 ETH TX- 5 ETH TX+ 6 UART TX 7 UART RX 8 Note Power must be applied to the power terminals before applying voltage to UART pins Shielded Cable Information The DVL is equipped with a shielded cable that helps protect the communication and power lines from external electromagnetic interference (EMI) and radio frequency interference (RFI). Please note that the DVL electronics themselves are not internally connected to the shield; it is up to the user to decide whether and how to connect the shield. Connecting the Shield For optimal performance, especially when mounted on an ROV (Remotely Operated Vehicle) or AUV (Autonomous Underwater Vehicle), it is recommended to connect the shield to reduce the impact of interference on the communication and power signals. The most common connection methods are: Chassis Ground : Connecting the shield to the chassis of the ROV/AUV is the most typical practice. This method allows the shield to provide a path to ground for any noise or interference, helping to improve signal integrity. The ROV or AUV chassis often acts as a common reference point for grounding, which makes this a natural choice. Common Ground : Alternatively, you can connect the shield to the common electrical ground of the ROV/AUV. This method may be used when the electrical and signal systems are designed to share a common ground. It helps ensure that interference is grounded without creating ground loops. Recommendation We recommend connecting the shield to the chassis ground of the ROV or AUV (if possible). This approach generally provides the best noise suppression by using the vehicle\u2019s structure as a solid grounding point. However, if your system design prefers the use of a common electrical ground, that option can also be considered. Always ensure that the shield is grounded at one end only to avoid ground loops, unless your system design calls for grounding at both ends for specific applications. Terminal Interface The DVL-A50 has a 3.3 volt UART interface (5V tolerant). Settings Value Baud rate 115200 Data parity stop 8N1 Flow control None Warning There can be a momentary (<10 us) power spike (~5 V) on the UART lines when power is applied to the DVL, which may damage equipment which is not 5V tolerant. See the DVL's serial protocol . Ethernet Interface See networking and the DVL's TCP protocol . Code examples Code for parsing of the data outputted by the DVL over TCP. I/O interface The I/O Interface provides a simple means of connection to the Water Linked DVLs. It provides magnetics for the ethernet connection and utilizes the Molex Micro-Fit 3.0 power connector (Part number: 436500204) which is standard for Water Linked products. Female connectors is listed under Mates with Part(s) There currently exists three revisions of the I/O Interface. Revision 2 and 3 are electrically identical. Revision 4 has an integrated USB-to-UART interface and a micro USB port. Revision 4 Dimensions: 50.6 x 47 x 18.6 mm (Width x Height x Thickness) Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T Micro USB Serial FTDI based Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power Fits W\u00fcrth 691137710002 Revision 3 Dimensions: 40 x 42 x 18.6 mm (Width x Height x Thickness) Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T 3x1 header Serial TX, RX, GND Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power Fits W\u00fcrth 691137710002 Revision 2 Dimensions: 30.6 mm x 50 x 18.6 mm (Width x Height x Thickness) Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T 3x1 header Serial TX, RX, GND Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power Note The Molex Micro-Fit 3.0 on revision 2 is prone to damage by excessive sideways force. Take care not the yank the power cable when connected.","title":"Interfaces"},{"location":"dvl/interfaces/#interfaces","text":"For both the DVL-A50 and the DVL-A125.","title":"Interfaces"},{"location":"dvl/interfaces/#led-signals","text":"No green light: Power is off. Fixed green light: The DVL is powering on. Depending on configuration it can take ~30-60 seconds to power on. Flashing green light, mostly off (slow, every few seconds): DVL looking for bottom lock. Flashing green light, mostly on (slow, every few seconds): DVL has bottom lock. Flashing green light (fast, many times a second): DVL is in thermal shutdown.","title":"LED Signals"},{"location":"dvl/interfaces/#wiring-interface","text":"The tables below shows the pinning of the DVL interface. Interface Color Negative/Ground Black Positive (10-30V) Red ETH RX+ Green/White ETH RX- Green ETH TX- Orange ETH TX+ Orange/White UART TX Brown/White UART RX Brown Shielded wire Naked (silver)","title":"Wiring interface"},{"location":"dvl/interfaces/#seacon-mcom8m-connector-dvl-a50-only","text":"The table below shows the specific pinout for the Seacon MCOM8M connector. Interface Pin Negative/Ground 1 Positive (10-30V) 2 ETH RX+ 3 ETH RX- 4 ETH TX- 5 ETH TX+ 6 UART TX 7 UART RX 8 Note Power must be applied to the power terminals before applying voltage to UART pins","title":"Seacon MCOM8M Connector (DVL A50 only)"},{"location":"dvl/interfaces/#shielded-cable-information","text":"The DVL is equipped with a shielded cable that helps protect the communication and power lines from external electromagnetic interference (EMI) and radio frequency interference (RFI). Please note that the DVL electronics themselves are not internally connected to the shield; it is up to the user to decide whether and how to connect the shield.","title":"Shielded Cable Information"},{"location":"dvl/interfaces/#connecting-the-shield","text":"For optimal performance, especially when mounted on an ROV (Remotely Operated Vehicle) or AUV (Autonomous Underwater Vehicle), it is recommended to connect the shield to reduce the impact of interference on the communication and power signals. The most common connection methods are: Chassis Ground : Connecting the shield to the chassis of the ROV/AUV is the most typical practice. This method allows the shield to provide a path to ground for any noise or interference, helping to improve signal integrity. The ROV or AUV chassis often acts as a common reference point for grounding, which makes this a natural choice. Common Ground : Alternatively, you can connect the shield to the common electrical ground of the ROV/AUV. This method may be used when the electrical and signal systems are designed to share a common ground. It helps ensure that interference is grounded without creating ground loops.","title":"Connecting the Shield"},{"location":"dvl/interfaces/#recommendation","text":"We recommend connecting the shield to the chassis ground of the ROV or AUV (if possible). This approach generally provides the best noise suppression by using the vehicle\u2019s structure as a solid grounding point. However, if your system design prefers the use of a common electrical ground, that option can also be considered. Always ensure that the shield is grounded at one end only to avoid ground loops, unless your system design calls for grounding at both ends for specific applications.","title":"Recommendation"},{"location":"dvl/interfaces/#terminal-interface","text":"The DVL-A50 has a 3.3 volt UART interface (5V tolerant). Settings Value Baud rate 115200 Data parity stop 8N1 Flow control None Warning There can be a momentary (<10 us) power spike (~5 V) on the UART lines when power is applied to the DVL, which may damage equipment which is not 5V tolerant. See the DVL's serial protocol .","title":"Terminal Interface"},{"location":"dvl/interfaces/#ethernet-interface","text":"See networking and the DVL's TCP protocol .","title":"Ethernet Interface"},{"location":"dvl/interfaces/#code-examples","text":"Code for parsing of the data outputted by the DVL over TCP.","title":"Code examples"},{"location":"dvl/interfaces/#io-interface","text":"The I/O Interface provides a simple means of connection to the Water Linked DVLs. It provides magnetics for the ethernet connection and utilizes the Molex Micro-Fit 3.0 power connector (Part number: 436500204) which is standard for Water Linked products. Female connectors is listed under Mates with Part(s) There currently exists three revisions of the I/O Interface. Revision 2 and 3 are electrically identical. Revision 4 has an integrated USB-to-UART interface and a micro USB port.","title":"I/O interface"},{"location":"dvl/interfaces/#revision-4","text":"Dimensions: 50.6 x 47 x 18.6 mm (Width x Height x Thickness) Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T Micro USB Serial FTDI based Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power Fits W\u00fcrth 691137710002","title":"Revision 4"},{"location":"dvl/interfaces/#revision-3","text":"Dimensions: 40 x 42 x 18.6 mm (Width x Height x Thickness) Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T 3x1 header Serial TX, RX, GND Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power Fits W\u00fcrth 691137710002","title":"Revision 3"},{"location":"dvl/interfaces/#revision-2","text":"Dimensions: 30.6 mm x 50 x 18.6 mm (Width x Height x Thickness) Connector Function Comment RJ45 (8P8C) Ethernet 10/100 BASE-T 3x1 header Serial TX, RX, GND Molex Micro-Fit 3.0 Power 10 - 30 VDC 2x \u00d81.5mm pads Alt. power Note The Molex Micro-Fit 3.0 on revision 2 is prone to damage by excessive sideways force. Take care not the yank the power cable when connected.","title":"Revision 2"},{"location":"dvl/networking/","text":"Networking The DVL has several services available over ethernet: Multicast DNS (mDNS) for easy discovery Web GUI , providing a visualisation of the data outputted by the DVL, as well as configuration, updating of software , diagnostics, and more. TCP data stream Software updates Network configuration Multicast DNS (mDNS) The DVL runs a DHCP client which will attempt to obtain an IP address from a DHCP server (e.g. in a router) on the same network, and supports mDNS: the mDNS name of the DVL is waterlinked-dvl . On a computer which supports mDNS, one can then simply access the web GUI at http://waterlinked-dvl . Note If no DHCP server is available on the network, it is recommended to use the fallback IP or configure a static IP address , as the DVL can spend up to 5 minutes searching for a DHCP server. Fallback IP The DVL will always be available with the static IP address: 192.168.194.95 . To be able to connect to the DVL using it: Connect an ethernet cable directly from the DVL to your computer. For an/the ethernet interface of your computer, configure it to have a static IP address in the same subnet as 192.168.194.95, e.g. 192.168.194.90 or anything else of the form 192.168.194.xxx if using a subnet of the form 255.255.255.0 (aka 192.168.194.0/24). Activate the ethernet interface of your computer which you configured in the previous step. In a web browser, open http://192.168.194.95 to access the web GUI . Via the GUI The IP address of the DVL can be configured in two ways via the web GUI : DCHP client: an IP address is obtained from a DHCP server (e.g. in a router) on the same network, as in the discussion of mDNS above. Static: equip the DVL with a certain static IP address. After the IP configuration of the DVL is modified, the DVL needs to be rebooted for the settings take effect. Note The boot time, i.e. the time it takes from the DVL receives power until it starts operating normally, will depend upon the IP configuration. Using the fallback IP , the boot time can be as much as 1 min 30 sec, whilst it can be as low as 20 sec with a static IP. TCP data stream The DVL can output data and receive commands over Transmission Control Protocol (TCP). A TCP server is available on port 16171 which outputs the latest data to all connected clients, and which listens to commands from any of these connected clients. See the DVL's TCP protocol .","title":"Networking"},{"location":"dvl/networking/#networking","text":"The DVL has several services available over ethernet: Multicast DNS (mDNS) for easy discovery Web GUI , providing a visualisation of the data outputted by the DVL, as well as configuration, updating of software , diagnostics, and more. TCP data stream Software updates","title":"Networking"},{"location":"dvl/networking/#network-configuration","text":"","title":"Network configuration"},{"location":"dvl/networking/#multicast-dns-mdns","text":"The DVL runs a DHCP client which will attempt to obtain an IP address from a DHCP server (e.g. in a router) on the same network, and supports mDNS: the mDNS name of the DVL is waterlinked-dvl . On a computer which supports mDNS, one can then simply access the web GUI at http://waterlinked-dvl . Note If no DHCP server is available on the network, it is recommended to use the fallback IP or configure a static IP address , as the DVL can spend up to 5 minutes searching for a DHCP server.","title":"Multicast DNS (mDNS)"},{"location":"dvl/networking/#fallback-ip","text":"The DVL will always be available with the static IP address: 192.168.194.95 . To be able to connect to the DVL using it: Connect an ethernet cable directly from the DVL to your computer. For an/the ethernet interface of your computer, configure it to have a static IP address in the same subnet as 192.168.194.95, e.g. 192.168.194.90 or anything else of the form 192.168.194.xxx if using a subnet of the form 255.255.255.0 (aka 192.168.194.0/24). Activate the ethernet interface of your computer which you configured in the previous step. In a web browser, open http://192.168.194.95 to access the web GUI .","title":"Fallback IP"},{"location":"dvl/networking/#via-the-gui","text":"The IP address of the DVL can be configured in two ways via the web GUI : DCHP client: an IP address is obtained from a DHCP server (e.g. in a router) on the same network, as in the discussion of mDNS above. Static: equip the DVL with a certain static IP address. After the IP configuration of the DVL is modified, the DVL needs to be rebooted for the settings take effect. Note The boot time, i.e. the time it takes from the DVL receives power until it starts operating normally, will depend upon the IP configuration. Using the fallback IP , the boot time can be as much as 1 min 30 sec, whilst it can be as low as 20 sec with a static IP.","title":"Via the GUI"},{"location":"dvl/networking/#tcp-data-stream","text":"The DVL can output data and receive commands over Transmission Control Protocol (TCP). A TCP server is available on port 16171 which outputs the latest data to all connected clients, and which listens to commands from any of these connected clients. See the DVL's TCP protocol .","title":"TCP data stream"},{"location":"dvl/sw-update/","text":"Software updates It is recommended to always run the latest DVL software where possible. The latest software can be obtained automatically or manually . The release notes for each release is available in the GUI and also in the GUI demo . Warning During the software upgrade, the thermal protection feature is turned off. To prevent the DVL from overheating, it is important to submerge the DVL in water throughout the update process.\u201d Automatic software update The DVL's GUI automatically checks and indicates if a new software version is available. Connect the DVL over ethernet to a network connected to the internet. If on a personal computer, it may be necessary to make a network bridge between a network interface (such as wifi) which has access to the internet and the ethernet interface through which the DVL is connected. Go to http://[IP_ADDRESS_OF_THE_DVL]:9000 in a web browser. The GUI will automatically check if there is a new version available, and if so, initiate installation of it with a single click. Offline software update If it is not possible to connect the DVL to the internet, one can proceed as follows. Find the current version and chip ID of the DVL at Menu -> About in the GUI . Manually download an update package ( .wlup ) from the update server using the chip ID. Verify if the downloaded version is newer than the currently running version. Set system time as shown below. Navigate to http://[IP_ADDRESS_OF_THE_DVL]:9000 in a web browser. Select 'Manual upload' and then upload the downloaded .wlup file. Failure during upgrade (set system time) When performing an offline software upgrade it the following error might occur: Failed: Error upgrading: resize: non-zero exit code: exit status 1 . This error is resolved by setting the system time before performing an upgrade. Proceed as follows. Go to DVL GUI and click on \"Configuration\" in left menu Open \"Advanced configuration\" menu Scroll to \"System time configuration\" Select \"Manual time\" in \"System time source\" and click \"Set manual time\" Click on \"About\" in left menu and click \"Software upgrade\" Perform upgrade again","title":"Software updates"},{"location":"dvl/sw-update/#software-updates","text":"It is recommended to always run the latest DVL software where possible. The latest software can be obtained automatically or manually . The release notes for each release is available in the GUI and also in the GUI demo . Warning During the software upgrade, the thermal protection feature is turned off. To prevent the DVL from overheating, it is important to submerge the DVL in water throughout the update process.\u201d","title":"Software updates"},{"location":"dvl/sw-update/#automatic-software-update","text":"The DVL's GUI automatically checks and indicates if a new software version is available. Connect the DVL over ethernet to a network connected to the internet. If on a personal computer, it may be necessary to make a network bridge between a network interface (such as wifi) which has access to the internet and the ethernet interface through which the DVL is connected. Go to http://[IP_ADDRESS_OF_THE_DVL]:9000 in a web browser. The GUI will automatically check if there is a new version available, and if so, initiate installation of it with a single click.","title":"Automatic software update"},{"location":"dvl/sw-update/#offline-software-update","text":"If it is not possible to connect the DVL to the internet, one can proceed as follows. Find the current version and chip ID of the DVL at Menu -> About in the GUI . Manually download an update package ( .wlup ) from the update server using the chip ID. Verify if the downloaded version is newer than the currently running version. Set system time as shown below. Navigate to http://[IP_ADDRESS_OF_THE_DVL]:9000 in a web browser. Select 'Manual upload' and then upload the downloaded .wlup file.","title":"Offline software update"},{"location":"dvl/sw-update/#failure-during-upgrade-set-system-time","text":"When performing an offline software upgrade it the following error might occur: Failed: Error upgrading: resize: non-zero exit code: exit status 1 . This error is resolved by setting the system time before performing an upgrade. Proceed as follows. Go to DVL GUI and click on \"Configuration\" in left menu Open \"Advanced configuration\" menu Scroll to \"System time configuration\" Select \"Manual time\" in \"System time source\" and click \"Set manual time\" Click on \"About\" in left menu and click \"Software upgrade\" Perform upgrade again","title":"Failure during upgrade (set system time)"},{"location":"dvl/gui/configuration/","text":"Configuration Configuration of the DVL is available in the the GUI by pressing Menu -> Configuration . Output configuration is available by pressing Menu -> Outputs . Configuration can also be performed via the DVL protocol . Screenshot Parameters Name Description Speed of sound Speed of sound in the environment (sea water, fresh water etc) Acoustic enabled Enable/disable sending acoustic waves from the DVL Mounting rotation offset Configure DVL mounting direction in relation to vehicle. 0 if LED on DVL is pointing forward on the vehicle. See axes Dark mode Disable the LED to avoid interference with camera Save drift compensation Calibrate the gyro bias in the IMU. Place the DVL on a stationary surface (preferably at the environment operating temperature) and press the button. Recommended to improve dead reckoning positioning estimation Advanced configuration Name Description Network configuration Static IP address or get IP address from DHCP server System time configuration Configure Network time protocol (NTP) server to use or set time manually Factory reset Reset all configuration of the DVL. Reboot is required. Reboot Reboot the DVL Recommended configuration when only serial port is used Configure network to \"Static IP\" to shorten boot time Recommended configuration when only ethernet is used Configure serial output protocol to \"Disabled\" to lower latency for TCP protocol","title":"Configuration"},{"location":"dvl/gui/configuration/#configuration","text":"Configuration of the DVL is available in the the GUI by pressing Menu -> Configuration . Output configuration is available by pressing Menu -> Outputs . Configuration can also be performed via the DVL protocol .","title":"Configuration"},{"location":"dvl/gui/configuration/#screenshot","text":"","title":"Screenshot"},{"location":"dvl/gui/configuration/#parameters","text":"Name Description Speed of sound Speed of sound in the environment (sea water, fresh water etc) Acoustic enabled Enable/disable sending acoustic waves from the DVL Mounting rotation offset Configure DVL mounting direction in relation to vehicle. 0 if LED on DVL is pointing forward on the vehicle. See axes Dark mode Disable the LED to avoid interference with camera Save drift compensation Calibrate the gyro bias in the IMU. Place the DVL on a stationary surface (preferably at the environment operating temperature) and press the button. Recommended to improve dead reckoning positioning estimation Advanced configuration Name Description Network configuration Static IP address or get IP address from DHCP server System time configuration Configure Network time protocol (NTP) server to use or set time manually Factory reset Reset all configuration of the DVL. Reboot is required. Reboot Reboot the DVL Recommended configuration when only serial port is used Configure network to \"Static IP\" to shorten boot time Recommended configuration when only ethernet is used Configure serial output protocol to \"Disabled\" to lower latency for TCP protocol","title":"Parameters"},{"location":"dvl/gui/dashboard/","text":"Dashboard Both the DVL-A50 and the DVL-A125 have a web-based GUI. In your favorite web browser, simply navigate to the DVL's IP address . The default page is a dashboard which provides a summary and visualisation of both the velocity and dead reckoning data outputted by the DVL, as well as an indication of current status. Screenshot Dashboard Parameters Doppler Velocity Parameter Description Speed Combined speed from x, y, z velocities. Altitude Distance from seabed to DVL (unless beams blocked by something else). Figure of merit (See note below) Maximum uncertainty of measurement given in m/s. Ping rate Rate at which data velocity is being outputted (depends on velocity). Velocity valid Indicates if the velocity is valid to be used. Note Figure of merit (FOM) represent the maximum possible uncertainty and indicates the largest potential error in the measured speed from our DVL. This value is derived from the covariance matrix, which identifies the direction with the highest uncertainty in the sensor data. It provides a worst-case error margin. The maximum amount by which the actual speed may differ from the measured speed due to various factors from environment such as acoustic noise from other sources. Dead reckoning Parameter Description Speed Speeds in x,y,z(Downward) directions with FOM that is the Euclidean norm of the standard deviations for each direction. Position Calculated position with FOM that is the Euclidean norm of the standard deviations for each direction. Roll, pitch, Yaw Orientation from the gyro. When dead reckoning is reset on the DVL, the gyro reinitializes its orientation. This means that the current orientation of the DVL at the time of reset will be set as the new zero orientation. Horizontal velocity Graphical indication of the horizontal direction of speed. Vertical velocity Graphical indication of the vertical velocity. Map controls Button Description +/-/[ ] Zoom and fullscreen controls Center map to dvl position Reset calculated position and start position tracking from zero. ... More Set trail length Set grid size Calibrate gyro","title":"Dashboard"},{"location":"dvl/gui/dashboard/#dashboard","text":"Both the DVL-A50 and the DVL-A125 have a web-based GUI. In your favorite web browser, simply navigate to the DVL's IP address . The default page is a dashboard which provides a summary and visualisation of both the velocity and dead reckoning data outputted by the DVL, as well as an indication of current status.","title":"Dashboard"},{"location":"dvl/gui/dashboard/#screenshot","text":"","title":"Screenshot"},{"location":"dvl/gui/dashboard/#dashboard-parameters","text":"","title":"Dashboard Parameters"},{"location":"dvl/gui/dashboard/#doppler-velocity","text":"Parameter Description Speed Combined speed from x, y, z velocities. Altitude Distance from seabed to DVL (unless beams blocked by something else). Figure of merit (See note below) Maximum uncertainty of measurement given in m/s. Ping rate Rate at which data velocity is being outputted (depends on velocity). Velocity valid Indicates if the velocity is valid to be used. Note Figure of merit (FOM) represent the maximum possible uncertainty and indicates the largest potential error in the measured speed from our DVL. This value is derived from the covariance matrix, which identifies the direction with the highest uncertainty in the sensor data. It provides a worst-case error margin. The maximum amount by which the actual speed may differ from the measured speed due to various factors from environment such as acoustic noise from other sources.","title":"Doppler Velocity"},{"location":"dvl/gui/dashboard/#dead-reckoning","text":"Parameter Description Speed Speeds in x,y,z(Downward) directions with FOM that is the Euclidean norm of the standard deviations for each direction. Position Calculated position with FOM that is the Euclidean norm of the standard deviations for each direction. Roll, pitch, Yaw Orientation from the gyro. When dead reckoning is reset on the DVL, the gyro reinitializes its orientation. This means that the current orientation of the DVL at the time of reset will be set as the new zero orientation.","title":"Dead reckoning"},{"location":"dvl/gui/dashboard/#horizontal-velocity","text":"Graphical indication of the horizontal direction of speed.","title":"Horizontal velocity"},{"location":"dvl/gui/dashboard/#vertical-velocity","text":"Graphical indication of the vertical velocity.","title":"Vertical velocity"},{"location":"dvl/gui/dashboard/#map-controls","text":"Button Description +/-/[ ] Zoom and fullscreen controls Center map to dvl position Reset calculated position and start position tracking from zero. ... More Set trail length Set grid size Calibrate gyro","title":"Map controls"},{"location":"dvl/gui/demo-gui/","text":"Demo site We maintain a demo of the DVL's GUI, running on simulated data.","title":"Demo GUI"},{"location":"dvl/gui/demo-gui/#demo-site","text":"We maintain a demo of the DVL's GUI, running on simulated data.","title":"Demo site"},{"location":"dvl/gui/diagnostic-report/","text":"Diagnostic report Allows for generation of a log file for sending to Water Linked customer support. Enter a small description of the problem you are experiencing, and then click on the button. Attach the generated .wdat file when contacting Water Linked support. Screenshot","title":"Diagnostic report"},{"location":"dvl/gui/diagnostic-report/#diagnostic-report","text":"Allows for generation of a log file for sending to Water Linked customer support. Enter a small description of the problem you are experiencing, and then click on the button. Attach the generated .wdat file when contacting Water Linked support.","title":"Diagnostic report"},{"location":"dvl/gui/diagnostic-report/#screenshot","text":"","title":"Screenshot"},{"location":"explorer-kit/hardware/","text":"Hardware Setup Connectors Connect the four Receiver-D1 cables to channel 1 to 4 on the housing. If using the Locator-D1, connect this to the D1 connector on the housing. If using the Locator-A1, connect this to the A1 connector on the housing. If using the Locator-S1, no connections to the housing is needed. Just power the Locator and make sure both the status led on S1 and master is solid green. GPS The on-board GPS module is used to position the system in a global reference system. An external antenna with integrated amplifier is used to improve GPS reception. The signal strength of the GPS can be seen on the top bar in the web GUI. GPS-antenna assembly The GPS-antenna can be mounted anywhere you want, but remember the GPS-antenna is the origin of the master electronics position. Therefor it is recommended to fasten the antenna on the lid of the peli case. With the 3M double sided tape, attach the GPS- antenna to the lid of the peli case. Connect the GPS-antenna cable to the SMA connector on the master electronics. Torque the SMA nut to 3\u20135 in\u00b7lbf (0.3 to 0.6 N\u00b7m) or slightly more than finger tight. IMU The master electronics has an built in IMU used to provide the orientation of the master electronics. This is used in combination with the acoustic position and GPS to generate the global position of the Locator. IMU Calibration For the IMU to work properly it needs to be calibrated. The calibration data is stored when full calibration is obtained for faster calibration on restart of the system. If the system is started on a new location a new calibration is needed for the IMU to work as intended. To calibrate the IMU disconnect all Recivers and Locator cables, but leave power and Ethernet connected. This is to prevent damaging the cables and connector when performing the calibration. While looking at the top bar in the web GUI on the IMU status, move the peli case in a figure of 8 until all the bars are green.","title":"Hardware"},{"location":"explorer-kit/hardware/#hardware-setup","text":"","title":"Hardware Setup"},{"location":"explorer-kit/hardware/#connectors","text":"Connect the four Receiver-D1 cables to channel 1 to 4 on the housing. If using the Locator-D1, connect this to the D1 connector on the housing. If using the Locator-A1, connect this to the A1 connector on the housing. If using the Locator-S1, no connections to the housing is needed. Just power the Locator and make sure both the status led on S1 and master is solid green.","title":"Connectors"},{"location":"explorer-kit/hardware/#gps","text":"The on-board GPS module is used to position the system in a global reference system. An external antenna with integrated amplifier is used to improve GPS reception. The signal strength of the GPS can be seen on the top bar in the web GUI.","title":"GPS"},{"location":"explorer-kit/hardware/#gps-antenna-assembly","text":"The GPS-antenna can be mounted anywhere you want, but remember the GPS-antenna is the origin of the master electronics position. Therefor it is recommended to fasten the antenna on the lid of the peli case. With the 3M double sided tape, attach the GPS- antenna to the lid of the peli case. Connect the GPS-antenna cable to the SMA connector on the master electronics. Torque the SMA nut to 3\u20135 in\u00b7lbf (0.3 to 0.6 N\u00b7m) or slightly more than finger tight.","title":"GPS-antenna assembly"},{"location":"explorer-kit/hardware/#imu","text":"The master electronics has an built in IMU used to provide the orientation of the master electronics. This is used in combination with the acoustic position and GPS to generate the global position of the Locator.","title":"IMU"},{"location":"explorer-kit/hardware/#imu-calibration","text":"For the IMU to work properly it needs to be calibrated. The calibration data is stored when full calibration is obtained for faster calibration on restart of the system. If the system is started on a new location a new calibration is needed for the IMU to work as intended. To calibrate the IMU disconnect all Recivers and Locator cables, but leave power and Ethernet connected. This is to prevent damaging the cables and connector when performing the calibration. While looking at the top bar in the web GUI on the IMU status, move the peli case in a figure of 8 until all the bars are green.","title":"IMU Calibration"},{"location":"explorer-kit/introduction/","text":"Introduction The Underwater GPS Explorer Kit retired and no longer available for sale. Underwater GPS Explorer Kit The Underwater GPS Explorer Kit is a robust and reliable acoustic positioning system with a range of 100m. The purpose of the system is to give a live GPS position of ROVs, divers and other moving objects below the water surface. The Underwater GPS system is based on Short Baseline (SBL) acoustic positioning. The Locator is placed on the device to be positioned and functions as a beacon that send out an acoustic pulse. Near the surface, there are four Receiver hydrophones lowered into the water. The Receivers listen for the pulse from the locator. Time-of-arrival to each Receiver is used to calculate the Locator\u2019s position. SBL systems, compared to the USBL systems, have the advantage of working well in shallow water and acoustic reflective environments, such as in fish cages, near harbor installations, close to ship hulls, inside water tanks etc. Once the position is known relative to the Receivers, the global position can be found by adding that to the position obtained by a GPS receiver. The Underwater GPS system does that part internally so that it can provide the actual global position of the ROV as its output. Kit content 1 x Underwater GPS Housing with Master-D1 electronics 4 x Receiver-D1 with 10m cable 1 x Locator of choice 1 x 3m Ethernet cable 1 x 3m power cable 1 x External GPS antenna Quickstart Getting started with Water Linked Underwater GPS Discussion If you have questions, you are very welcome to contact our customer support , where we will be happy to help you.","title":"Introduction"},{"location":"explorer-kit/introduction/#introduction","text":"The Underwater GPS Explorer Kit retired and no longer available for sale.","title":"Introduction"},{"location":"explorer-kit/introduction/#underwater-gps-explorer-kit","text":"The Underwater GPS Explorer Kit is a robust and reliable acoustic positioning system with a range of 100m. The purpose of the system is to give a live GPS position of ROVs, divers and other moving objects below the water surface. The Underwater GPS system is based on Short Baseline (SBL) acoustic positioning. The Locator is placed on the device to be positioned and functions as a beacon that send out an acoustic pulse. Near the surface, there are four Receiver hydrophones lowered into the water. The Receivers listen for the pulse from the locator. Time-of-arrival to each Receiver is used to calculate the Locator\u2019s position. SBL systems, compared to the USBL systems, have the advantage of working well in shallow water and acoustic reflective environments, such as in fish cages, near harbor installations, close to ship hulls, inside water tanks etc. Once the position is known relative to the Receivers, the global position can be found by adding that to the position obtained by a GPS receiver. The Underwater GPS system does that part internally so that it can provide the actual global position of the ROV as its output.","title":"Underwater GPS Explorer Kit"},{"location":"explorer-kit/introduction/#kit-content","text":"1 x Underwater GPS Housing with Master-D1 electronics 4 x Receiver-D1 with 10m cable 1 x Locator of choice 1 x 3m Ethernet cable 1 x 3m power cable 1 x External GPS antenna","title":"Kit content"},{"location":"explorer-kit/introduction/#quickstart","text":"Getting started with Water Linked Underwater GPS","title":"Quickstart"},{"location":"explorer-kit/introduction/#discussion","text":"If you have questions, you are very welcome to contact our customer support , where we will be happy to help you.","title":"Discussion"},{"location":"explorer-kit/network-settings/","text":"Network Settings At power-up, the Master-D1 reads the DIP-switch settings. The network mode depends on the GP0 and GP1 position. Network mode GP0 GP1 DIP switch position DHCP client ON ON Static IP 192.168.2.94 OFF ON Static custom IP ON OFF DHCP Server, 192.168.0.1 OFF OFF The BS0 and BS1 positions on the dip switch shall both be ON. These boot-select pins are used in factory programming only. Use the supplied Ethernet cable to connect the Underwater GPS to a network switch or directly into the host computer. Note The host computer connected to the topside unit needs to have an IP-address on the same subnet as set on the Master-D1. For example: If the IP address of the UGPS is 192.168.2.94 the host computer needs to be configured to a different 192.168.2.x address e.g. 192.168.2.100.","title":"Network settings"},{"location":"explorer-kit/network-settings/#network-settings","text":"At power-up, the Master-D1 reads the DIP-switch settings. The network mode depends on the GP0 and GP1 position. Network mode GP0 GP1 DIP switch position DHCP client ON ON Static IP 192.168.2.94 OFF ON Static custom IP ON OFF DHCP Server, 192.168.0.1 OFF OFF The BS0 and BS1 positions on the dip switch shall both be ON. These boot-select pins are used in factory programming only. Use the supplied Ethernet cable to connect the Underwater GPS to a network switch or directly into the host computer. Note The host computer connected to the topside unit needs to have an IP-address on the same subnet as set on the Master-D1. For example: If the IP address of the UGPS is 192.168.2.94 the host computer needs to be configured to a different 192.168.2.x address e.g. 192.168.2.100.","title":"Network Settings"},{"location":"explorer-kit/power-supply/","text":"Power supply The power cable comes with stripped jacket. Connect the stripped cables to your favorite 12V power source. Black : Negative Red : Positive Voltage : 10 \u2013 18V Current : 0.7A (12V nominal)","title":"Power supply"},{"location":"explorer-kit/power-supply/#power-supply","text":"The power cable comes with stripped jacket. Connect the stripped cables to your favorite 12V power source. Black : Negative Red : Positive Voltage : 10 \u2013 18V Current : 0.7A (12V nominal)","title":"Power supply"},{"location":"explorer-kit/quickstart/","text":"Quickstart Intro This is a guide on how to start using the Underwater GPS system. The steps are: Power the topside unit Calibrate IMU Deploying receivers Connect everything Select locator and channel Configure receiver placement in GUI Power the topside unit Start by connecting power to the topside unit. We do this first because we want the GPS receiver to start receiving signals and acheive a lock while we setup the rest of the system. If you are using the Locator-S1, power it on now so it also have time to get GPS lock. Calibrate IMU Connect the Ethernet cable to the topside unit and your computer. Then open your web browser and type in the IP-address of your topside unit which is defined by the position of the dip-switch on the Master-D1. How to change the IP-address is described here . At the top bar on the GUI you will see a calibration bar for the IMU. To calibrate the IMU rotate it in a figure of 8 and keep doing it until the IMU calibration bar becomes full and green. Deploying of receivers Before starting to deploy the receivers in the water, add a piece of tape on the receiver cable on the desired depth to make setup easier. Place the receivers in the water on the desired location and decide which number (1-4) each receiver will have. This is important when connecting the receivers to the topside unit. Tip Adding lead weights just above the receiver helps keep them stable when doing the positioning. Connect everything When connecting the receiver cables to the topside unit remember the numbering you decided on and connect the connector to the accordingly port. If this is not correct the position will be completely wrong. Next you connect the Locator if you are using the A1 or D1. Select locator and channel Now that everything is connected and ready it is time to select the right locator and choose which channal to listen on. This is configurated on the setting page of the web GUI. The Water Linked standard is to use channel 17 and this is also the default channel for the Locator-S1. Configure receiver placement and seach range in GUI After selecting the correct locator, you need to provide the correct placement of the receivers to the GUI for the positioning to work correctly. This is done by drag'n drop of each receiver to the correct placment relative to the topside unit. The position of each receiver is seen below in the map view. It you click on the receiver you get a pop up with the possibility to write its exact placment. Once this is done you can limit the search range by using the same drag and drop feature. Warning If you are using the Locator-A1 or S1, you need to provide depth information to the topside unit. Description on how to do this is found here . Tip Reducing the search range helps to improve the performance of the system. It is recomended to limith this range if you are operating in a smaller area. This is especially important in tanks. You are now ready to explore the underwater world and knowing where you are at the same time.","title":"Quickstart"},{"location":"explorer-kit/quickstart/#quickstart","text":"","title":"Quickstart"},{"location":"explorer-kit/quickstart/#intro","text":"This is a guide on how to start using the Underwater GPS system. The steps are: Power the topside unit Calibrate IMU Deploying receivers Connect everything Select locator and channel Configure receiver placement in GUI","title":"Intro"},{"location":"explorer-kit/quickstart/#power-the-topside-unit","text":"Start by connecting power to the topside unit. We do this first because we want the GPS receiver to start receiving signals and acheive a lock while we setup the rest of the system. If you are using the Locator-S1, power it on now so it also have time to get GPS lock.","title":"Power the topside unit"},{"location":"explorer-kit/quickstart/#calibrate-imu","text":"Connect the Ethernet cable to the topside unit and your computer. Then open your web browser and type in the IP-address of your topside unit which is defined by the position of the dip-switch on the Master-D1. How to change the IP-address is described here . At the top bar on the GUI you will see a calibration bar for the IMU. To calibrate the IMU rotate it in a figure of 8 and keep doing it until the IMU calibration bar becomes full and green.","title":"Calibrate IMU"},{"location":"explorer-kit/quickstart/#deploying-of-receivers","text":"Before starting to deploy the receivers in the water, add a piece of tape on the receiver cable on the desired depth to make setup easier. Place the receivers in the water on the desired location and decide which number (1-4) each receiver will have. This is important when connecting the receivers to the topside unit. Tip Adding lead weights just above the receiver helps keep them stable when doing the positioning.","title":"Deploying of receivers"},{"location":"explorer-kit/quickstart/#connect-everything","text":"When connecting the receiver cables to the topside unit remember the numbering you decided on and connect the connector to the accordingly port. If this is not correct the position will be completely wrong. Next you connect the Locator if you are using the A1 or D1.","title":"Connect everything"},{"location":"explorer-kit/quickstart/#select-locator-and-channel","text":"Now that everything is connected and ready it is time to select the right locator and choose which channal to listen on. This is configurated on the setting page of the web GUI. The Water Linked standard is to use channel 17 and this is also the default channel for the Locator-S1.","title":"Select locator and channel"},{"location":"explorer-kit/quickstart/#configure-receiver-placement-and-seach-range-in-gui","text":"After selecting the correct locator, you need to provide the correct placement of the receivers to the GUI for the positioning to work correctly. This is done by drag'n drop of each receiver to the correct placment relative to the topside unit. The position of each receiver is seen below in the map view. It you click on the receiver you get a pop up with the possibility to write its exact placment. Once this is done you can limit the search range by using the same drag and drop feature. Warning If you are using the Locator-A1 or S1, you need to provide depth information to the topside unit. Description on how to do this is found here . Tip Reducing the search range helps to improve the performance of the system. It is recomended to limith this range if you are operating in a smaller area. This is especially important in tanks. You are now ready to explore the underwater world and knowing where you are at the same time.","title":"Configure receiver placement and seach range in GUI"},{"location":"explorer-kit/receiver-d1/","text":"Receiver-D1 Buy Receiver-D1 here! Description The Receiver-D1 is a digital low-noise, high sensitivity hydro acoustic receiver that converts acoustic waves to a digital data stream. The receiver is equipped with a wideband analog front-end width a large dynamic range followed by advanced digital signal processing functionality. The electrical interface complies with the Water Linked D1 communication standard. Benefits Extremely small footprint enabling easy integration in other equipment. Highly robust operation in areas with reflections (shallow water, around installations etc.) Wiring interface The tables below shows the pinning of the Receiver interface connectors. Dimensions Datasheet Datasheet","title":"Receiver-D1"},{"location":"explorer-kit/receiver-d1/#receiver-d1","text":"Buy Receiver-D1 here!","title":"Receiver-D1"},{"location":"explorer-kit/receiver-d1/#description","text":"The Receiver-D1 is a digital low-noise, high sensitivity hydro acoustic receiver that converts acoustic waves to a digital data stream. The receiver is equipped with a wideband analog front-end width a large dynamic range followed by advanced digital signal processing functionality. The electrical interface complies with the Water Linked D1 communication standard.","title":"Description"},{"location":"explorer-kit/receiver-d1/#benefits","text":"Extremely small footprint enabling easy integration in other equipment. Highly robust operation in areas with reflections (shallow water, around installations etc.)","title":"Benefits"},{"location":"explorer-kit/receiver-d1/#wiring-interface","text":"The tables below shows the pinning of the Receiver interface connectors.","title":"Wiring interface"},{"location":"explorer-kit/receiver-d1/#dimensions","text":"","title":"Dimensions"},{"location":"explorer-kit/receiver-d1/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"explorer-kit/upgrader/","text":"Software update As of software release 2.1.0 the system automatically checks for updates when the host computer is connected to internet. If you have the latest release you will see a green checkmark as shown below. An exclamation mark will indicate if a newer release is available. A software update package (.wlup file) includes all files required to update the system. The software package is encrypted and will only work for the Chip ID it is generated for. The Chip ID can be found in the About tab of the GUI. Update process Please select the update process that is best suited to you: If the Underwater GPS GUI is visible to you on http://192.168.2.94 please use the Update with static IP . If the Underwater GPS GUI is not shown when using the link above, please use the Update with DHCP . Warning The software upgrade will clear the receiver configuration, settings and POIs. Make sure to save the information you need before upgrading. Download software package To get the latest software package for your kit: Download directly from the \"About\" page of the Underwater GPS GUI Alternatively: Go to update.waterlinked.com and enter the Chip ID of your kit. Update using static IP This procedure works if you have haven't changed the jumpers on the Master-D1, you have set up a static IP address on your computer and you are able to see the gui on http://192.168.2.94 . Step Description 1 Download the software package (.wlup) for your kit Download software package 2 Power off the system 3 Connect the upgrade plug included in the kit or connect GPIO0 to ground using a jumper cable 4 Power on the system 6 Go to web gui http://192.168.2.94 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 7 Remove the upgade plug or the jumper grounding GP0. 8 Click \u201cBrowse file\u201d and select correct <>.wlup file 9 Wait for update process to complete 10 When the update process is complete and successful, the system will automatically reboot to standard mode If process fails, please try again 11 Verify that the SW version has updated by going to the web gui http://192.168.2.94 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 12 Upgrade process complete Celebrate with your favorite beverage Update using DHCP This procedure works if you don't know how to set a static IP address on your computer. Step Description 1 Download the software package (.wlup) for your kit Download software package 2 Power off the system 3 Set Master-D1 to DHCP Server. (Remember original setting) See network settings 4 Connect a network cable directly from your computer to the Master-D1 5 Configure the network on your computer to get IP address from DHCP (this is default on most computers, so if you haven't set a static ip you're good) 6 Connect the upgrade plug included in the kit or connect GPIO0 to ground using a jumper cable 7 Power on the system 8 Go to web GUI http://192.168.0.1 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 9 Remove the grounding of GP0. 10 Click \u201cBrowse file\u201d and select correct <>.wlup file 11 Wait for update process to complete 12 When the update process is complete and successful, the system will automatically reboot to standard mode If process fails, please try again 13 Verify that the SW version has updated by going to the web gui http://192.168.0.1 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 14 Reset network settings to original setting from step 2 See network settings . 15 Upgrade process complete Celebrate with your favorite beverage","title":"Software updates"},{"location":"explorer-kit/upgrader/#software-update","text":"As of software release 2.1.0 the system automatically checks for updates when the host computer is connected to internet. If you have the latest release you will see a green checkmark as shown below. An exclamation mark will indicate if a newer release is available. A software update package (.wlup file) includes all files required to update the system. The software package is encrypted and will only work for the Chip ID it is generated for. The Chip ID can be found in the About tab of the GUI.","title":"Software update"},{"location":"explorer-kit/upgrader/#update-process","text":"Please select the update process that is best suited to you: If the Underwater GPS GUI is visible to you on http://192.168.2.94 please use the Update with static IP . If the Underwater GPS GUI is not shown when using the link above, please use the Update with DHCP . Warning The software upgrade will clear the receiver configuration, settings and POIs. Make sure to save the information you need before upgrading.","title":"Update process"},{"location":"explorer-kit/upgrader/#download-software-package","text":"To get the latest software package for your kit: Download directly from the \"About\" page of the Underwater GPS GUI Alternatively: Go to update.waterlinked.com and enter the Chip ID of your kit.","title":"Download software package"},{"location":"explorer-kit/upgrader/#update-using-static-ip","text":"This procedure works if you have haven't changed the jumpers on the Master-D1, you have set up a static IP address on your computer and you are able to see the gui on http://192.168.2.94 . Step Description 1 Download the software package (.wlup) for your kit Download software package 2 Power off the system 3 Connect the upgrade plug included in the kit or connect GPIO0 to ground using a jumper cable 4 Power on the system 6 Go to web gui http://192.168.2.94 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 7 Remove the upgade plug or the jumper grounding GP0. 8 Click \u201cBrowse file\u201d and select correct <>.wlup file 9 Wait for update process to complete 10 When the update process is complete and successful, the system will automatically reboot to standard mode If process fails, please try again 11 Verify that the SW version has updated by going to the web gui http://192.168.2.94 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 12 Upgrade process complete Celebrate with your favorite beverage","title":"Update using static IP"},{"location":"explorer-kit/upgrader/#update-using-dhcp","text":"This procedure works if you don't know how to set a static IP address on your computer. Step Description 1 Download the software package (.wlup) for your kit Download software package 2 Power off the system 3 Set Master-D1 to DHCP Server. (Remember original setting) See network settings 4 Connect a network cable directly from your computer to the Master-D1 5 Configure the network on your computer to get IP address from DHCP (this is default on most computers, so if you haven't set a static ip you're good) 6 Connect the upgrade plug included in the kit or connect GPIO0 to ground using a jumper cable 7 Power on the system 8 Go to web GUI http://192.168.0.1 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 9 Remove the grounding of GP0. 10 Click \u201cBrowse file\u201d and select correct <>.wlup file 11 Wait for update process to complete 12 When the update process is complete and successful, the system will automatically reboot to standard mode If process fails, please try again 13 Verify that the SW version has updated by going to the web gui http://192.168.0.1 If you see a blank or partly broken page, try to clean browser cache by pressing Ctrl-F5 or opening the page in \"Private\"/\"Incognito\" mode 14 Reset network settings to original setting from step 2 See network settings . 15 Upgrade process complete Celebrate with your favorite beverage","title":"Update using DHCP"},{"location":"explorer-kit/warnings/","text":"Warnings To avoid the risk of damage to the Underwater GPS, please read this user manual carefully before it is installed and used for the first time. Operation area The Underwater GPS system ONLY work in water. It does not work in air. Max voltage The absolute maximum voltage rating of the equipment is 18V. Voltages above this will damage the electronics. Reverse voltage The board does not have reverse polarity protection. Do not apply a negative voltage to the red power wire as this will damage the electronics. Temperature Make sure the system does not overheat. Avoid placing it in direct sunlight over extended periods of time. Salt water The Master-D1 Electronics will corrode if it comes in contact with salt water. Keep the housing lid closed when in the field to avoid salt water to get in contact with any electronics. Force Avoid using excessive force on connectors, screws and other parts of the system as this can lead to mechanical damage.","title":"Warnings"},{"location":"explorer-kit/warnings/#warnings","text":"To avoid the risk of damage to the Underwater GPS, please read this user manual carefully before it is installed and used for the first time. Operation area The Underwater GPS system ONLY work in water. It does not work in air. Max voltage The absolute maximum voltage rating of the equipment is 18V. Voltages above this will damage the electronics. Reverse voltage The board does not have reverse polarity protection. Do not apply a negative voltage to the red power wire as this will damage the electronics. Temperature Make sure the system does not overheat. Avoid placing it in direct sunlight over extended periods of time. Salt water The Master-D1 Electronics will corrode if it comes in contact with salt water. Keep the housing lid closed when in the field to avoid salt water to get in contact with any electronics. Force Avoid using excessive force on connectors, screws and other parts of the system as this can lead to mechanical damage.","title":"Warnings"},{"location":"explorer-kit/gui/api/","text":"API The Underwater GPS system comes with an easy-to-use software HTTP API. Through the API you can, amongst other things: Read acoustic and global position data Read GPS and IMU raw data Read and set POIs Set configuration parameters See demo.waterlinked.com/swagger for the details of the API. Interaction Any programming language can be used to interact with the API. We have examples in both python and go , which currently cover, for instance: Sending of locator depth when using the A1 locator (see the script externaldepth.py ). Sending in of satellite GPS data (positioning and/or heading) from an external GPS receiver (see the script nmeainput.py or its go analogue ) Export of tracks to a GPX file (see the script tracklog.py ) Output of the positions calculated by the UGPS G2 system in NMEA format (see the script nmeaoutput.py or its go analogue )","title":"API"},{"location":"explorer-kit/gui/api/#api","text":"The Underwater GPS system comes with an easy-to-use software HTTP API. Through the API you can, amongst other things: Read acoustic and global position data Read GPS and IMU raw data Read and set POIs Set configuration parameters See demo.waterlinked.com/swagger for the details of the API.","title":"API"},{"location":"explorer-kit/gui/api/#interaction","text":"Any programming language can be used to interact with the API. We have examples in both python and go , which currently cover, for instance: Sending of locator depth when using the A1 locator (see the script externaldepth.py ). Sending in of satellite GPS data (positioning and/or heading) from an external GPS receiver (see the script nmeainput.py or its go analogue ) Export of tracks to a GPX file (see the script tracklog.py ) Output of the positions calculated by the UGPS G2 system in NMEA format (see the script nmeaoutput.py or its go analogue )","title":"Interaction"},{"location":"explorer-kit/gui/diagnostic/","text":"Diagnostics Verify Receiver signal strength in the diagnostic page on the web GUI by going to the diagnostic tab in the side panel on the left. This view will show the signal strength from all Receivers. It should look something like this: In the diagnostic plot you should see the signal from all 4 Receivers. The signals should be well above the noise floor. Interference Acoustic interference can be observed in the diagnostic plot. Echo sounders from your boat or nearby boats typically appears like burst noise. If it is coming from your boat, try to turn off the echo sounder to improve position accuracy. In case of interference from other acoustic sources, use the GUI to try other channels to avoid the interference.","title":"Diagnostic"},{"location":"explorer-kit/gui/diagnostic/#diagnostics","text":"Verify Receiver signal strength in the diagnostic page on the web GUI by going to the diagnostic tab in the side panel on the left. This view will show the signal strength from all Receivers. It should look something like this: In the diagnostic plot you should see the signal from all 4 Receivers. The signals should be well above the noise floor.","title":"Diagnostics"},{"location":"explorer-kit/gui/diagnostic/#interference","text":"Acoustic interference can be observed in the diagnostic plot. Echo sounders from your boat or nearby boats typically appears like burst noise. If it is coming from your boat, try to turn off the echo sounder to improve position accuracy. In case of interference from other acoustic sources, use the GUI to try other channels to avoid the interference.","title":"Interference"},{"location":"explorer-kit/gui/position/","text":"Position view The Underwater GPS GUI is web based. Using your favorite web browser, go the IP address as defined here . We currently support and recommend Chrome, Firefox and Safari. Attention Internet Explorer is not supported as of now.","title":"Position"},{"location":"explorer-kit/gui/position/#position-view","text":"The Underwater GPS GUI is web based. Using your favorite web browser, go the IP address as defined here . We currently support and recommend Chrome, Firefox and Safari. Attention Internet Explorer is not supported as of now.","title":"Position view"},{"location":"explorer-kit/gui/receivers/","text":"Receivers Receiver Guidelines You may place the Receivers at any location within 100m from the top-side housing / Master_D1. In order to ensure the best performance, you should follow a few guidelines: Line-of-sight Try to place the Receivers so they all have a free line-of-sight to the Locator. Good Separation The system performs better when there is a decent distance between the Receivers. More separation is better, but 2x2 meters is sufficient for good performance. Max Range There should be maximum of 100m from any Receiver to the Locator Receiver Depth Place the Receivers at a few meters depth. Near the surface there are typically small air bubbles caused by waves. These small air bubbles attenuate the acoustic signal and can reduce the system performance. Limit search area You will get a better position if you help the search algorithm to narrow the search area. Limit the search range setting to the area where the Locator is expected to be. Directivity The Receivers and Locators are fully omnidirectional and transmits/receives equally good in all directions. The only direction with less performance is backwards where the cable enters. Receiver stability Add some weight to the Receiver cable just above the Receiver so they hang straight down in the water On board GPS If the master electronics is static during operation it is recommended to use the static option for the GPS. This is to remove the inaccuracy of the GPS Receiver in global position. Only use onboard GPS when the reference system is moving eg. if mounted to a boat. Reference Systems In order to calculate the absolute position of the Locator we need to define two reference systems, the acoustic and the global reference system. The global reference system is defined by latitude and longitude and is the reference system used by the GPS and in maps. The acoustic reference system (the x and y axis) is defined by the orientation of the housing. The housing is by definition located in origin (x=0, y=0). A label on top of the lid indicates the x-y coordinate system. Boat Example The illustration bellow shows a typical Receiver configuration when installed on a boat. The Receivers are hanging from the side of the boat, one in each corner. The depth of the Receivers are typically 2-4m, deep enough to get below the hull and get free line-of-sight to the Locator. Notice how the housing defines the origin and coordinate system of the acoustic reference system.","title":"Receivers"},{"location":"explorer-kit/gui/receivers/#receivers","text":"","title":"Receivers"},{"location":"explorer-kit/gui/receivers/#receiver-guidelines","text":"You may place the Receivers at any location within 100m from the top-side housing / Master_D1. In order to ensure the best performance, you should follow a few guidelines: Line-of-sight Try to place the Receivers so they all have a free line-of-sight to the Locator. Good Separation The system performs better when there is a decent distance between the Receivers. More separation is better, but 2x2 meters is sufficient for good performance. Max Range There should be maximum of 100m from any Receiver to the Locator Receiver Depth Place the Receivers at a few meters depth. Near the surface there are typically small air bubbles caused by waves. These small air bubbles attenuate the acoustic signal and can reduce the system performance. Limit search area You will get a better position if you help the search algorithm to narrow the search area. Limit the search range setting to the area where the Locator is expected to be. Directivity The Receivers and Locators are fully omnidirectional and transmits/receives equally good in all directions. The only direction with less performance is backwards where the cable enters. Receiver stability Add some weight to the Receiver cable just above the Receiver so they hang straight down in the water On board GPS If the master electronics is static during operation it is recommended to use the static option for the GPS. This is to remove the inaccuracy of the GPS Receiver in global position. Only use onboard GPS when the reference system is moving eg. if mounted to a boat.","title":"Receiver Guidelines"},{"location":"explorer-kit/gui/receivers/#reference-systems","text":"In order to calculate the absolute position of the Locator we need to define two reference systems, the acoustic and the global reference system. The global reference system is defined by latitude and longitude and is the reference system used by the GPS and in maps. The acoustic reference system (the x and y axis) is defined by the orientation of the housing. The housing is by definition located in origin (x=0, y=0). A label on top of the lid indicates the x-y coordinate system.","title":"Reference Systems"},{"location":"explorer-kit/gui/receivers/#boat-example","text":"The illustration bellow shows a typical Receiver configuration when installed on a boat. The Receivers are hanging from the side of the boat, one in each corner. The depth of the Receivers are typically 2-4m, deep enough to get below the hull and get free line-of-sight to the Locator. Notice how the housing defines the origin and coordinate system of the acoustic reference system.","title":"Boat Example"},{"location":"explorer-kit/gui/settings/","text":"Settings Locator setup In this section you choose which locator you are using with the system and on which channel it is sending. The Water Linked default channel is 17 and this is the channel that the Locator-S1 is running on. If using the Locator-U1 the channel needs to macth the rotary switch at the back of the U1. Warning If you are using the Locator-A1 or S1, you need to provid depth information to the topside unit. Description on how to do this is found here . Top-side Setup In this section you have the option to choose which GPS and IMU source you are going to use. We strongly advise to use static or external GPS when operation allow for it. Because the master-D1 electronics has a standard GPS receiver it has a standard deviation of around 2-3 meters. How to input external GPS and IMU with the API is decribed here . User preferences In the user preferences section you can select the unit of messurments you want to use. We support both Metric and Imperial. You can also select if you want a dummy boat to be displayed on the map pages and the receiver configuration page.","title":"Settings"},{"location":"explorer-kit/gui/settings/#settings","text":"","title":"Settings"},{"location":"explorer-kit/gui/settings/#locator-setup","text":"In this section you choose which locator you are using with the system and on which channel it is sending. The Water Linked default channel is 17 and this is the channel that the Locator-S1 is running on. If using the Locator-U1 the channel needs to macth the rotary switch at the back of the U1. Warning If you are using the Locator-A1 or S1, you need to provid depth information to the topside unit. Description on how to do this is found here .","title":"Locator setup"},{"location":"explorer-kit/gui/settings/#top-side-setup","text":"In this section you have the option to choose which GPS and IMU source you are going to use. We strongly advise to use static or external GPS when operation allow for it. Because the master-D1 electronics has a standard GPS receiver it has a standard deviation of around 2-3 meters. How to input external GPS and IMU with the API is decribed here .","title":"Top-side Setup"},{"location":"explorer-kit/gui/settings/#user-preferences","text":"In the user preferences section you can select the unit of messurments you want to use. We support both Metric and Imperial. You can also select if you want a dummy boat to be displayed on the map pages and the receiver configuration page.","title":"User preferences"},{"location":"explorer-kit/locators/locator-a1/","text":"Locator-A1 Buy Locator-A1 here! Description The Locator-A1 has the smallest physical footprint in our series of locators. It can be integrated into even the most compact ROVs. The Locator-A1 does not carry its own depth sensor, and the Master-D1 requires that the depth be provided from your underwater vehicle (ROV etc.) This can be achieved by means of the UGPS API . Wiring interface The tables below shows the pinning of the A1 interface connectors. Dimensions Datasheet Datasheet","title":"Locator-A1"},{"location":"explorer-kit/locators/locator-a1/#locator-a1","text":"Buy Locator-A1 here!","title":"Locator-A1"},{"location":"explorer-kit/locators/locator-a1/#description","text":"The Locator-A1 has the smallest physical footprint in our series of locators. It can be integrated into even the most compact ROVs. The Locator-A1 does not carry its own depth sensor, and the Master-D1 requires that the depth be provided from your underwater vehicle (ROV etc.) This can be achieved by means of the UGPS API .","title":"Description"},{"location":"explorer-kit/locators/locator-a1/#wiring-interface","text":"The tables below shows the pinning of the A1 interface connectors.","title":"Wiring interface"},{"location":"explorer-kit/locators/locator-a1/#dimensions","text":"","title":"Dimensions"},{"location":"explorer-kit/locators/locator-a1/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"explorer-kit/locators/locator-d1/","text":"Locator-D1 Buy Locator-D1 here! Description The Locator-D1 carries its own depth sensor and can therefore operate fully stand-alone and independent of the device you want to position. Warning The Locator-D1 can only be submerged for about 6 hours. It then needs to dry the pressure sensor in order to give correct depth readings. Wiring interface The tables below shows the pinning of the D1 interface connectors. Dimensions Datasheet Datasheet","title":"Locator-D1"},{"location":"explorer-kit/locators/locator-d1/#locator-d1","text":"Buy Locator-D1 here!","title":"Locator-D1"},{"location":"explorer-kit/locators/locator-d1/#description","text":"The Locator-D1 carries its own depth sensor and can therefore operate fully stand-alone and independent of the device you want to position. Warning The Locator-D1 can only be submerged for about 6 hours. It then needs to dry the pressure sensor in order to give correct depth readings.","title":"Description"},{"location":"explorer-kit/locators/locator-d1/#wiring-interface","text":"The tables below shows the pinning of the D1 interface connectors.","title":"Wiring interface"},{"location":"explorer-kit/locators/locator-d1/#dimensions","text":"","title":"Dimensions"},{"location":"explorer-kit/locators/locator-d1/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"explorer-kit/locators/locator-s1/","text":"Locator-S1 Description The Locator-S1 carries an internal GPS based time sync module. Because of this, the S1 does not require tether integration for top-side communication. It only requires external power 10-18V to be provided from the underwater device. Some Locator-S1 attributes can be configured using an integrated UART (3V3) interface. This configuration is optional and not required for normal operation. Before deployment in water, the Locator-S1 needs to achieve a GPS lock. The integrated status-LED shows the condition of the GPS lock. Once the Locator-S1 has lock it can operate for approximately 6 hours befor needing resync with GPS. Note The default channel for Locator-S1 is 17 on boot. Locator-S1 supports channel 16,17 and 18. As the Locator-S1 does not carry its own depth sensor, the depth needs to be provided from the underwater vehicle (ROV etc.) to the topside Master-D1 using the software API. Example of how to perform this can be found here . LED Signals No green light: Power is off and the unit is not ready for diving. Flashing green light (once a second): Searching for GPS lock. The unit is not ready to dive. Fixed green light: GPS lock is achieved. The unit is ready to dive. Flashing green light (slow): GPS lock has been acheived but lost. The unit is ready to dive. Wiring interface The tables below shows the pinning of the S1 interface. Interface Color Positive (10-18V) Orange Negative Orange/White UART RX Brown UART TX Brown/White Terminal Interface The Locator-S1 has a simple 3.3 volt UART interface which is used to change the channel of the locator. Settings Value Baud rate 9600 Data parity stop 8N1 Flow control None Dimensions Datasheet Datasheet","title":"Locator-S1 (obsolete)"},{"location":"explorer-kit/locators/locator-s1/#locator-s1","text":"","title":"Locator-S1"},{"location":"explorer-kit/locators/locator-s1/#description","text":"The Locator-S1 carries an internal GPS based time sync module. Because of this, the S1 does not require tether integration for top-side communication. It only requires external power 10-18V to be provided from the underwater device. Some Locator-S1 attributes can be configured using an integrated UART (3V3) interface. This configuration is optional and not required for normal operation. Before deployment in water, the Locator-S1 needs to achieve a GPS lock. The integrated status-LED shows the condition of the GPS lock. Once the Locator-S1 has lock it can operate for approximately 6 hours befor needing resync with GPS. Note The default channel for Locator-S1 is 17 on boot. Locator-S1 supports channel 16,17 and 18. As the Locator-S1 does not carry its own depth sensor, the depth needs to be provided from the underwater vehicle (ROV etc.) to the topside Master-D1 using the software API. Example of how to perform this can be found here .","title":"Description"},{"location":"explorer-kit/locators/locator-s1/#led-signals","text":"No green light: Power is off and the unit is not ready for diving. Flashing green light (once a second): Searching for GPS lock. The unit is not ready to dive. Fixed green light: GPS lock is achieved. The unit is ready to dive. Flashing green light (slow): GPS lock has been acheived but lost. The unit is ready to dive.","title":"LED Signals"},{"location":"explorer-kit/locators/locator-s1/#wiring-interface","text":"The tables below shows the pinning of the S1 interface. Interface Color Positive (10-18V) Orange Negative Orange/White UART RX Brown UART TX Brown/White","title":"Wiring interface"},{"location":"explorer-kit/locators/locator-s1/#terminal-interface","text":"The Locator-S1 has a simple 3.3 volt UART interface which is used to change the channel of the locator. Settings Value Baud rate 9600 Data parity stop 8N1 Flow control None","title":"Terminal Interface"},{"location":"explorer-kit/locators/locator-s1/#dimensions","text":"","title":"Dimensions"},{"location":"explorer-kit/locators/locator-s1/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"explorer-kit/locators/locator-u1/","text":"Locator-U1 Buy Locator-U1 here! Description The Locator-U1 is a battery powered, digital hydro acoustic locator device. It carries an internal GPS based time sync module, which means no tether is required. This Locator fits well for divers, ROVs where power is not easily accessible, or other underwater applications. The internal battery is rechargeable using the USB-C cable that follows and standard 5V USB charger. Before deployment in water, the Locator-U1 needs to achieve a GPS lock. The integrated status-LED shows the condition of the GPS lock. Once the Locator-U1 has lock it can operate for approximately 6 hours befor needing resync with GPS. The Locator-U1 has a rotary switch located on the inside of the cap. This switch is used to change the channel on which the Locator is transmitting. The same channel needs to be selected in the Water Linked Underwater GPS GUI. The Locator has 3 mounting holes on each side for M3 screws. A default bracket is included. Charging Insert included USB-C cable into a wall adapter (2A/5V) and connect it to the Locator-U1. The Locator LED will normally start pulsating while charging and turn solid green once charging has finished. Note : If battery is fully discharged the pulsating will not be activated. The Locator will still charge regardless of the LED not showing the charge indication. The Locator will in this cause show searching for GPS lock or GPS lock achieved indication. Note : Some Locator-U1 units are produced with a fault that causes them to never be able to show the charge indication. The Locator will still charge and operate as normal during use. Charging time is 7 hours. Powering on/off To power on the Locator-U1 simply tighten the lid over the charging port. The the LED will start to blinking indicating that the Locator is searching for GPS lock. The Locator is ready to use when the LED stops blinking and turns solid. Before powering on, ensure the O-ring within the lid is without damage. To power off the Locator-U1 unscrew the back lid until the LED turns off. LED Signals No green light: Power is off and the unit is not ready for diving. Flashing green light (once a second): Searching for GPS lock. The unit is not ready to dive. Fixed green light: GPS lock is acheived. The unit is ready to dive. Flashing green light (slow): GPS lock has been acheived but lost. The unit is ready to dive. Pulsating green light : The Locator-U1 is charging. The unit is not ready to dive. See charge description above. Fast flashing green light (multiple times pr second): Error indication. The unit is not ready to dive. Typically this is caused by exceeding dive time and the pressure sensor needing to dry. Charging the Locator is the fastest way to dry the pressure sensor. Warning The Locator-U1 can only be submerged for about 6 hours. It then needs to dry the pressure sensor in order to give correct depth readings. Wiring interface Because the U1 is battery powered the only interface for it is the charing port which is a standard USB-C type connector. Included in package Locator-U1 USB-C charging cable Bracket for mounting Dimensions Datasheet Datasheet","title":"Locator-U1"},{"location":"explorer-kit/locators/locator-u1/#locator-u1","text":"Buy Locator-U1 here!","title":"Locator-U1"},{"location":"explorer-kit/locators/locator-u1/#description","text":"The Locator-U1 is a battery powered, digital hydro acoustic locator device. It carries an internal GPS based time sync module, which means no tether is required. This Locator fits well for divers, ROVs where power is not easily accessible, or other underwater applications. The internal battery is rechargeable using the USB-C cable that follows and standard 5V USB charger. Before deployment in water, the Locator-U1 needs to achieve a GPS lock. The integrated status-LED shows the condition of the GPS lock. Once the Locator-U1 has lock it can operate for approximately 6 hours befor needing resync with GPS. The Locator-U1 has a rotary switch located on the inside of the cap. This switch is used to change the channel on which the Locator is transmitting. The same channel needs to be selected in the Water Linked Underwater GPS GUI. The Locator has 3 mounting holes on each side for M3 screws. A default bracket is included.","title":"Description"},{"location":"explorer-kit/locators/locator-u1/#charging","text":"Insert included USB-C cable into a wall adapter (2A/5V) and connect it to the Locator-U1. The Locator LED will normally start pulsating while charging and turn solid green once charging has finished. Note : If battery is fully discharged the pulsating will not be activated. The Locator will still charge regardless of the LED not showing the charge indication. The Locator will in this cause show searching for GPS lock or GPS lock achieved indication. Note : Some Locator-U1 units are produced with a fault that causes them to never be able to show the charge indication. The Locator will still charge and operate as normal during use. Charging time is 7 hours.","title":"Charging"},{"location":"explorer-kit/locators/locator-u1/#powering-onoff","text":"To power on the Locator-U1 simply tighten the lid over the charging port. The the LED will start to blinking indicating that the Locator is searching for GPS lock. The Locator is ready to use when the LED stops blinking and turns solid. Before powering on, ensure the O-ring within the lid is without damage. To power off the Locator-U1 unscrew the back lid until the LED turns off.","title":"Powering on/off"},{"location":"explorer-kit/locators/locator-u1/#led-signals","text":"No green light: Power is off and the unit is not ready for diving. Flashing green light (once a second): Searching for GPS lock. The unit is not ready to dive. Fixed green light: GPS lock is acheived. The unit is ready to dive. Flashing green light (slow): GPS lock has been acheived but lost. The unit is ready to dive. Pulsating green light : The Locator-U1 is charging. The unit is not ready to dive. See charge description above. Fast flashing green light (multiple times pr second): Error indication. The unit is not ready to dive. Typically this is caused by exceeding dive time and the pressure sensor needing to dry. Charging the Locator is the fastest way to dry the pressure sensor. Warning The Locator-U1 can only be submerged for about 6 hours. It then needs to dry the pressure sensor in order to give correct depth readings.","title":"LED Signals"},{"location":"explorer-kit/locators/locator-u1/#wiring-interface","text":"Because the U1 is battery powered the only interface for it is the charing port which is a standard USB-C type connector.","title":"Wiring interface"},{"location":"explorer-kit/locators/locator-u1/#included-in-package","text":"Locator-U1 USB-C charging cable Bracket for mounting","title":"Included in package"},{"location":"explorer-kit/locators/locator-u1/#dimensions","text":"","title":"Dimensions"},{"location":"explorer-kit/locators/locator-u1/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"modem-m16/modem-m16-faq/","text":"Modem M16 FAQ Below are some frequently asked questions about the Modem M16. Click on a question in the table of contents to the right or simply scroll down to read the FAQs. 1. Can the M16 modem measure the range/distance between two modems? No, the modem's uses an unsynchronized method of sending data meaning that an time of flight estimate would give large errors in the range estimations. The acoustic signal is not synced but known to be within some time frame of 25ms.","title":"M16 FAQ"},{"location":"modem-m16/modem-m16-faq/#modem-m16-faq","text":"Below are some frequently asked questions about the Modem M16. Click on a question in the table of contents to the right or simply scroll down to read the FAQs.","title":"Modem M16 FAQ"},{"location":"modem-m16/modem-m16-faq/#1-can-the-m16-modem-measure-the-rangedistance-between-two-modems","text":"No, the modem's uses an unsynchronized method of sending data meaning that an time of flight estimate would give large errors in the range estimations. The acoustic signal is not synced but known to be within some time frame of 25ms.","title":"1. Can the M16 modem measure the range/distance between two modems?"},{"location":"modem-m16/modem-m16-uart-interface/","text":"Serial Interface This document describes how to configure and operate the underwater modem via its serial interface. The modem can be controlled using a 3.3V UART or RS422 connection, offering two primary operational modes (transparent serial and diagnostic), various power levels, and user-selectable communication channels. Firmware Release Notes Below is a summary of the new features introduced in this release: FW release (ASCII/HEX) Description o/6f Initial firmware release V/56 Added power-level configuration for extended battery runtime and reduced range Serial Interface Overview The modem implements a half-duplex serial protocol with the following default configuration: Baud rate: 9600 bps Data bits: 8 Stop bits: 1 Parity: None Users can switch between 3.3V TTL UART or RS422 for physical interfacing. Through this serial link, you can: Set operational modes Change communication channels Request diagnostic reports Adjust power levels for transmission range/power consumption Operational Modes The modem supports two main operational modes: Transparent Serial Mode Processes and transmits only 2 bytes of data per packet. Each transmission takes ~1.6 seconds (acoustic wave duration). Data beyond the first 2 bytes in a transmission is discarded. Diagnostic Mode Sends detailed status reports, including: Transport Block (TB) Bit Error Rate (BER) Signal & Noise Power LDPC/CRC Validity Firmware Revision Time Since Power-Up FPGA Chip ID, Hardware Revision Communication Channel TX-Complete Status Power Level Setting Still limited to 2 bytes of payload per transmission (discarding any additional data). Reports are triggered automatically when: A new packet is received (TB Valid bit is set) A transmission completes (TX Complete bit is set) 4 seconds have elapsed since the last report Note You can also request a diagnostic report while in transparent mode. See the Request Report Command section. Quickstart Guide By default: Operational Mode: Transparent serial mode Communication Channel: 1 For a simple point-to-point setup with two modems: 1. Connect each modem (via UART or RS422). 2. Ensure both are set to the same channel (default is 1). 3. Begin sending data; the modems will relay up to 2 bytes each ~1.6 seconds. Settings Interface You can configure the modem by issuing commands over the serial link. Four user-configurable parameters are available: Communication Channel Operation Mode Report Request Power Level Each configuration command requires sending specific characters with a 1-second pause between them, followed by a character that selects the new value. Refer to the relevant section below. Communication Channel Command The modem can operate on 12 channels (1 to 12). Two modems must share the same channel to communicate. Procedure: Send \"c\" (0x63). Wait 1 second . Send another \"c\" (0x63). Within 2 seconds , send one character ( \"1\" \u2013 \"c\" ) to set the desired channel. Channel Character HEX-Value 1 \"1\" 0x31 2 \"2\" 0x32 3 \"3\" 0x33 4 \"4\" 0x34 5 \"5\" 0x35 6 \"6\" 0x36 7 \"7\" 0x37 8 \"8\" 0x38 9 \"9\" 0x39 10 \"a\" 0x61 11 \"b\" 0x62 12 \"c\" 0x63 Example (Channel 11): 1. Send \"c\" 2. Wait 1 second 3. Send \"c\" again 4. Within 2 seconds, send \"b\" (0x62) Setting Operational Mode To toggle between diagnostic mode and transparent serial mode : Send \"m\" (0x6D). Wait 1 second . Send \"m\" again. The modem will switch modes (e.g., if you were in transparent mode, it will switch to diagnostic). Setting Power Level To adjust the modem\u2019s power level (1\u20134): Send \"l\" (0x6C). Wait 1 second . Send \"l\" again. Within 2 seconds, send one character ( \"1\" , \"2\" , \"3\" , or \"4\" ). Power Level Character HEX-Value Avg. TX Power (mW) Typical Max Range (m) 1 \"1\" 0x31 390 300 2 \"2\" 0x32 555 600 3 \"3\" 0x33 790 900 4 (Default) \"4\" 0x34 1105 1000 Note Maximum range is highly dependent on environmental factors, including noise levels and line-of-sight conditions between modems. Example (Set Power Level 3): 1. Send \"l\" (0x6C). 2. Wait 1 second. 3. Send \"l\" (0x6C) again. 4. Within 2 seconds, send \"3\" (0x33). Request Report Command In both diagnostic and transparent modes, you can request a report at any time: Send \"r\" (0x72). Wait 1 second . Send \"r\" (0x72) again. The modem will immediately generate a diagnostic report. Packet Structure of the Diagnostic Report When in diagnostic mode (or upon a report request in transparent mode), the modem sends an 18-byte report. The byte layout is: Byte (bit) Field Description 0 (0:7) START_OF_FRAME (SOF) \u201c$\u201d (0x24) 1:2 (0:15) TB Transport block containing 2 bytes of received data. 3 (0:7) BER Bit error rate 4 (0:7) SIGNAL_POWER Relative signal power (0\u2013255) 5 (0:7) NOISE_POWER Relative noise power (0\u2013255) 6:7 (0:15) PACKET_VALID Indicates packet integrity: LDPC decode + CRC successful 8 (0:7) PACKET_INVALID CRC check failed 9 (0:7) GIT_REV Firmware revision (Git commit hash, 8-bit) 10:12 (0:23) TIME_FROM_BOOT Time since power-up in 10 ms increments 13:14 (0:15) CHIP_ID FPGA chip ID 15 (0:1) HW_REV Hardware revision (2 bits) 15 (2:5) CHANNEL Active communication channel (1\u201312) 15 (6) TB_VALID Transport block valid bit; indicates new TB data 15 (7) TX_COMPLETE Indicates that a transmission has finished 16 (0) DIAGNOSTIC_MODE 1 if in diagnostic mode; 0 otherwise 16 (1) RESERVED Reserved bit 16 (2:3) POWER_LEVEL Current power level (0 = L4, 1 = L3, 2 = L2, 3 = L1) 16 (4:7) RESERVED Reserved bits 17 (0:7) END_OF_FRAME (EOF) New line (\u201c\\n\u201d) Warning Signal Power & Noise Power - Both range from 0 to 255. - When the modem is idle (not transmitting or receiving), Signal Power reflects the background noise floor, which should match Noise Power . - During packet decoding, SIGNAL_POWER should be greater than NOISE_POWER for a successful decode. Practical Tip - Record the Noise Power while idle as your baseline (noise floor). - Compare that with Signal Power during active communication. - The bigger the gap, the better the link quality. Example Python Report Parser def decode_packet ( packet : bytes ) -> Optional [ Dict [ str , Any ]]: \"\"\" Decode a packet received from the modem. Parameters ---------- packet : bytes The raw packet (18 bytes) starting with '$' (0x24) and ending with '\\n' (0x0A). Returns ------- Optional[Dict[str, Any]] A dictionary with decoded values if valid, or None otherwise. \"\"\" if len ( packet ) != 18 or packet [ 0 ] != ord ( '$' ) or packet [ - 1 ] != ord ( ' \\n ' ): return None # The 16 bytes after the '$' and before the '\\n' data = packet [ 1 : 17 ] decoded = struct . unpack ( \"<HBBBHBBBBBHBB\" , data ) decoded_dict = { \"TR_BLOCK\" : decoded [ 0 ], \"BER\" : decoded [ 1 ], \"SIGNAL_POWER\" : decoded [ 2 ], \"NOISE_POWER\" : decoded [ 3 ], \"PACKET_VALID\" : decoded [ 4 ], \"PACKET_INVALID\" : decoded [ 5 ], \"GIT_REV\" : decoded [ 6 ] . to_bytes ( 1 , \"little\" ), \"TIME\" : ( decoded [ 9 ] << 16 ) | ( decoded [ 8 ] << 8 ) | decoded [ 7 ], \"CHIP_ID\" : decoded [ 10 ], \"HW_REV\" : decoded [ 11 ] & 0b00000011 , \"CHANNEL\" : ( decoded [ 11 ] & 0b00111100 ) >> 2 , \"TB_VALID\" : ( decoded [ 11 ] & 0b01000000 ) >> 6 , \"TX_COMPLETE\" : ( decoded [ 11 ] & 0b10000000 ) >> 7 , \"DIAGNOSTIC_MODE\" : decoded [ 12 ] & 0b00000001 , \"LEVEL\" : ( decoded [ 12 ] & 0b00001100 ) >> 2 , } return decoded_dict Ensuring Successful Transmission & Optimization Diagnostic Mode A report is sent immediately after each transmission. Monitor the TX_COMPLETE bit in the report to know when the modem is ready for the next 2-byte packet. This approach maximizes overall throughput. Transparent Serial Mode Send 2 bytes, then wait at least 1.6 seconds (the transmission duration) before sending the next 2 bytes to avoid data loss. Flash Memory Considerations Changing the modem mode , channel , or power level initiates a flash write operation , which takes about 1 second . During this time: The modem will not respond to commands. Do not power off the modem to avoid corrupting settings. Once the flash write completes, the modem resumes normal operation with the updated configuration.","title":"Serial Interface"},{"location":"modem-m16/modem-m16-uart-interface/#serial-interface","text":"This document describes how to configure and operate the underwater modem via its serial interface. The modem can be controlled using a 3.3V UART or RS422 connection, offering two primary operational modes (transparent serial and diagnostic), various power levels, and user-selectable communication channels.","title":"Serial Interface"},{"location":"modem-m16/modem-m16-uart-interface/#firmware-release-notes","text":"Below is a summary of the new features introduced in this release: FW release (ASCII/HEX) Description o/6f Initial firmware release V/56 Added power-level configuration for extended battery runtime and reduced range","title":"Firmware Release Notes"},{"location":"modem-m16/modem-m16-uart-interface/#serial-interface-overview","text":"The modem implements a half-duplex serial protocol with the following default configuration: Baud rate: 9600 bps Data bits: 8 Stop bits: 1 Parity: None Users can switch between 3.3V TTL UART or RS422 for physical interfacing. Through this serial link, you can: Set operational modes Change communication channels Request diagnostic reports Adjust power levels for transmission range/power consumption","title":"Serial Interface Overview"},{"location":"modem-m16/modem-m16-uart-interface/#operational-modes","text":"The modem supports two main operational modes: Transparent Serial Mode Processes and transmits only 2 bytes of data per packet. Each transmission takes ~1.6 seconds (acoustic wave duration). Data beyond the first 2 bytes in a transmission is discarded. Diagnostic Mode Sends detailed status reports, including: Transport Block (TB) Bit Error Rate (BER) Signal & Noise Power LDPC/CRC Validity Firmware Revision Time Since Power-Up FPGA Chip ID, Hardware Revision Communication Channel TX-Complete Status Power Level Setting Still limited to 2 bytes of payload per transmission (discarding any additional data). Reports are triggered automatically when: A new packet is received (TB Valid bit is set) A transmission completes (TX Complete bit is set) 4 seconds have elapsed since the last report Note You can also request a diagnostic report while in transparent mode. See the Request Report Command section.","title":"Operational Modes"},{"location":"modem-m16/modem-m16-uart-interface/#quickstart-guide","text":"By default: Operational Mode: Transparent serial mode Communication Channel: 1 For a simple point-to-point setup with two modems: 1. Connect each modem (via UART or RS422). 2. Ensure both are set to the same channel (default is 1). 3. Begin sending data; the modems will relay up to 2 bytes each ~1.6 seconds.","title":"Quickstart Guide"},{"location":"modem-m16/modem-m16-uart-interface/#settings-interface","text":"You can configure the modem by issuing commands over the serial link. Four user-configurable parameters are available: Communication Channel Operation Mode Report Request Power Level Each configuration command requires sending specific characters with a 1-second pause between them, followed by a character that selects the new value. Refer to the relevant section below.","title":"Settings Interface"},{"location":"modem-m16/modem-m16-uart-interface/#communication-channel-command","text":"The modem can operate on 12 channels (1 to 12). Two modems must share the same channel to communicate. Procedure: Send \"c\" (0x63). Wait 1 second . Send another \"c\" (0x63). Within 2 seconds , send one character ( \"1\" \u2013 \"c\" ) to set the desired channel. Channel Character HEX-Value 1 \"1\" 0x31 2 \"2\" 0x32 3 \"3\" 0x33 4 \"4\" 0x34 5 \"5\" 0x35 6 \"6\" 0x36 7 \"7\" 0x37 8 \"8\" 0x38 9 \"9\" 0x39 10 \"a\" 0x61 11 \"b\" 0x62 12 \"c\" 0x63 Example (Channel 11): 1. Send \"c\" 2. Wait 1 second 3. Send \"c\" again 4. Within 2 seconds, send \"b\" (0x62)","title":"Communication Channel Command"},{"location":"modem-m16/modem-m16-uart-interface/#setting-operational-mode","text":"To toggle between diagnostic mode and transparent serial mode : Send \"m\" (0x6D). Wait 1 second . Send \"m\" again. The modem will switch modes (e.g., if you were in transparent mode, it will switch to diagnostic).","title":"Setting Operational Mode"},{"location":"modem-m16/modem-m16-uart-interface/#setting-power-level","text":"To adjust the modem\u2019s power level (1\u20134): Send \"l\" (0x6C). Wait 1 second . Send \"l\" again. Within 2 seconds, send one character ( \"1\" , \"2\" , \"3\" , or \"4\" ). Power Level Character HEX-Value Avg. TX Power (mW) Typical Max Range (m) 1 \"1\" 0x31 390 300 2 \"2\" 0x32 555 600 3 \"3\" 0x33 790 900 4 (Default) \"4\" 0x34 1105 1000 Note Maximum range is highly dependent on environmental factors, including noise levels and line-of-sight conditions between modems. Example (Set Power Level 3): 1. Send \"l\" (0x6C). 2. Wait 1 second. 3. Send \"l\" (0x6C) again. 4. Within 2 seconds, send \"3\" (0x33).","title":"Setting Power Level"},{"location":"modem-m16/modem-m16-uart-interface/#request-report-command","text":"In both diagnostic and transparent modes, you can request a report at any time: Send \"r\" (0x72). Wait 1 second . Send \"r\" (0x72) again. The modem will immediately generate a diagnostic report.","title":"Request Report Command"},{"location":"modem-m16/modem-m16-uart-interface/#packet-structure-of-the-diagnostic-report","text":"When in diagnostic mode (or upon a report request in transparent mode), the modem sends an 18-byte report. The byte layout is: Byte (bit) Field Description 0 (0:7) START_OF_FRAME (SOF) \u201c$\u201d (0x24) 1:2 (0:15) TB Transport block containing 2 bytes of received data. 3 (0:7) BER Bit error rate 4 (0:7) SIGNAL_POWER Relative signal power (0\u2013255) 5 (0:7) NOISE_POWER Relative noise power (0\u2013255) 6:7 (0:15) PACKET_VALID Indicates packet integrity: LDPC decode + CRC successful 8 (0:7) PACKET_INVALID CRC check failed 9 (0:7) GIT_REV Firmware revision (Git commit hash, 8-bit) 10:12 (0:23) TIME_FROM_BOOT Time since power-up in 10 ms increments 13:14 (0:15) CHIP_ID FPGA chip ID 15 (0:1) HW_REV Hardware revision (2 bits) 15 (2:5) CHANNEL Active communication channel (1\u201312) 15 (6) TB_VALID Transport block valid bit; indicates new TB data 15 (7) TX_COMPLETE Indicates that a transmission has finished 16 (0) DIAGNOSTIC_MODE 1 if in diagnostic mode; 0 otherwise 16 (1) RESERVED Reserved bit 16 (2:3) POWER_LEVEL Current power level (0 = L4, 1 = L3, 2 = L2, 3 = L1) 16 (4:7) RESERVED Reserved bits 17 (0:7) END_OF_FRAME (EOF) New line (\u201c\\n\u201d) Warning Signal Power & Noise Power - Both range from 0 to 255. - When the modem is idle (not transmitting or receiving), Signal Power reflects the background noise floor, which should match Noise Power . - During packet decoding, SIGNAL_POWER should be greater than NOISE_POWER for a successful decode. Practical Tip - Record the Noise Power while idle as your baseline (noise floor). - Compare that with Signal Power during active communication. - The bigger the gap, the better the link quality.","title":"Packet Structure of the Diagnostic Report"},{"location":"modem-m16/modem-m16-uart-interface/#example-python-report-parser","text":"def decode_packet ( packet : bytes ) -> Optional [ Dict [ str , Any ]]: \"\"\" Decode a packet received from the modem. Parameters ---------- packet : bytes The raw packet (18 bytes) starting with '$' (0x24) and ending with '\\n' (0x0A). Returns ------- Optional[Dict[str, Any]] A dictionary with decoded values if valid, or None otherwise. \"\"\" if len ( packet ) != 18 or packet [ 0 ] != ord ( '$' ) or packet [ - 1 ] != ord ( ' \\n ' ): return None # The 16 bytes after the '$' and before the '\\n' data = packet [ 1 : 17 ] decoded = struct . unpack ( \"<HBBBHBBBBBHBB\" , data ) decoded_dict = { \"TR_BLOCK\" : decoded [ 0 ], \"BER\" : decoded [ 1 ], \"SIGNAL_POWER\" : decoded [ 2 ], \"NOISE_POWER\" : decoded [ 3 ], \"PACKET_VALID\" : decoded [ 4 ], \"PACKET_INVALID\" : decoded [ 5 ], \"GIT_REV\" : decoded [ 6 ] . to_bytes ( 1 , \"little\" ), \"TIME\" : ( decoded [ 9 ] << 16 ) | ( decoded [ 8 ] << 8 ) | decoded [ 7 ], \"CHIP_ID\" : decoded [ 10 ], \"HW_REV\" : decoded [ 11 ] & 0b00000011 , \"CHANNEL\" : ( decoded [ 11 ] & 0b00111100 ) >> 2 , \"TB_VALID\" : ( decoded [ 11 ] & 0b01000000 ) >> 6 , \"TX_COMPLETE\" : ( decoded [ 11 ] & 0b10000000 ) >> 7 , \"DIAGNOSTIC_MODE\" : decoded [ 12 ] & 0b00000001 , \"LEVEL\" : ( decoded [ 12 ] & 0b00001100 ) >> 2 , } return decoded_dict","title":"Example Python Report Parser"},{"location":"modem-m16/modem-m16-uart-interface/#ensuring-successful-transmission-optimization","text":"","title":"Ensuring Successful Transmission &amp; Optimization"},{"location":"modem-m16/modem-m16-uart-interface/#diagnostic-mode","text":"A report is sent immediately after each transmission. Monitor the TX_COMPLETE bit in the report to know when the modem is ready for the next 2-byte packet. This approach maximizes overall throughput.","title":"Diagnostic Mode"},{"location":"modem-m16/modem-m16-uart-interface/#transparent-serial-mode","text":"Send 2 bytes, then wait at least 1.6 seconds (the transmission duration) before sending the next 2 bytes to avoid data loss.","title":"Transparent Serial Mode"},{"location":"modem-m16/modem-m16-uart-interface/#flash-memory-considerations","text":"Changing the modem mode , channel , or power level initiates a flash write operation , which takes about 1 second . During this time: The modem will not respond to commands. Do not power off the modem to avoid corrupting settings. Once the flash write completes, the modem resumes normal operation with the updated configuration.","title":"Flash Memory Considerations"},{"location":"modem-m16/modem-m16/","text":"Modem-M16 The Modem M16 is a two-way, half-duplex acoustic modem operating at 10bps that can function dependably in the presence of other modems configured on distinct channels. Boasting an impressively compact size, minimal power consumption, and affordable cost, the Modem M16 is a groundbreaking addition to the field. This innovation paves the way for successful underwater communication in complex environments, particularly where power resources for sensors are scarce. Buy Modem-M16 here! Description The Modem M16 is a two-way half-duplex 10bps acoustic modem with a robust and user configurable data link. The modem is delivered in four different versions, OEM , Flange , Standard , and Extended (RS422) Terminal Interface The Modem-M16 has a 3.3 volt UART interface and a RS422 interface. Settings Value Baud rate 9600 Data parity stop 8N1 Flow control None Wiring interface The tables below shows the pinning of the Modem-M16 interface. Depending on which type is used, the wires may have different colors. Interface Colour (OEM) Colour (Standard) Colour (Extended) VIN Orange (3V - 4.2V) Orange (3V - 4.2V) Orange (10V - 30V) GND Orange-White Orange-White Orange-White UART RX Blue Blue NA UART TX Blue-White Blue-White NA Shutdown (Active Low) Green Green NA RS422 RX+ NA NA Blue RS422 RX- NA NA Blue-White RS422 TX+ NA NA Green RS422 TX- NA NA Green-White Note: Shutdown line can be used to control the ON/OFF state of the Modem. If Shutdown is left floating, the Modem is ON. If Shutdown is short to GND, the modem is OFF. Shutdown line can be controlled by an external open-drain, open-collector or relay device. DO NOT apply voltage to Shutdown line. Wiring OEM/Standard Wiring Extended (RS422) Mechnical Information All Modem M-16 Versions Device length 47 mm (ex cable) Device weight (air) 40 gram Device weight (submerged) 14 gram Depth rating 600 meter Materials POM (housing), PEEK (transducer) Operating temperature -10 to 70 \u00b0C Device diameter 29.5 mm Acoustics Information All Modem M-16 Versions Range 1000 m Transducer directivity Omnidirectional Transducer frequency 58.5 kHz Bits per package 16 Package duration 1.6 seconds","title":"Introduction"},{"location":"modem-m16/modem-m16/#modem-m16","text":"The Modem M16 is a two-way, half-duplex acoustic modem operating at 10bps that can function dependably in the presence of other modems configured on distinct channels. Boasting an impressively compact size, minimal power consumption, and affordable cost, the Modem M16 is a groundbreaking addition to the field. This innovation paves the way for successful underwater communication in complex environments, particularly where power resources for sensors are scarce. Buy Modem-M16 here!","title":"Modem-M16"},{"location":"modem-m16/modem-m16/#description","text":"The Modem M16 is a two-way half-duplex 10bps acoustic modem with a robust and user configurable data link. The modem is delivered in four different versions, OEM , Flange , Standard , and Extended (RS422)","title":"Description"},{"location":"modem-m16/modem-m16/#terminal-interface","text":"The Modem-M16 has a 3.3 volt UART interface and a RS422 interface. Settings Value Baud rate 9600 Data parity stop 8N1 Flow control None","title":"Terminal Interface"},{"location":"modem-m16/modem-m16/#wiring-interface","text":"The tables below shows the pinning of the Modem-M16 interface. Depending on which type is used, the wires may have different colors. Interface Colour (OEM) Colour (Standard) Colour (Extended) VIN Orange (3V - 4.2V) Orange (3V - 4.2V) Orange (10V - 30V) GND Orange-White Orange-White Orange-White UART RX Blue Blue NA UART TX Blue-White Blue-White NA Shutdown (Active Low) Green Green NA RS422 RX+ NA NA Blue RS422 RX- NA NA Blue-White RS422 TX+ NA NA Green RS422 TX- NA NA Green-White Note: Shutdown line can be used to control the ON/OFF state of the Modem. If Shutdown is left floating, the Modem is ON. If Shutdown is short to GND, the modem is OFF. Shutdown line can be controlled by an external open-drain, open-collector or relay device. DO NOT apply voltage to Shutdown line.","title":"Wiring interface"},{"location":"modem-m16/modem-m16/#wiring-oemstandard","text":"","title":"Wiring OEM/Standard"},{"location":"modem-m16/modem-m16/#wiring-extended-rs422","text":"","title":"Wiring Extended (RS422)"},{"location":"modem-m16/modem-m16/#mechnical","text":"Information All Modem M-16 Versions Device length 47 mm (ex cable) Device weight (air) 40 gram Device weight (submerged) 14 gram Depth rating 600 meter Materials POM (housing), PEEK (transducer) Operating temperature -10 to 70 \u00b0C Device diameter 29.5 mm","title":"Mechnical"},{"location":"modem-m16/modem-m16/#acoustics","text":"Information All Modem M-16 Versions Range 1000 m Transducer directivity Omnidirectional Transducer frequency 58.5 kHz Bits per package 16 Package duration 1.6 seconds","title":"Acoustics"},{"location":"modem-m64/modem-m64-protocol/","text":"Modem-M64 serial protocol This document describes the Water Linked Underwater Modem Link Layer protocol. Terminology Modem - Unit for transmitting/receiving data Packet - Unit of data transmitted together ACK - Acknowledgement. The command issued was successful. NAK - Negative acknowledgement. The command issued failed. Version This document describes protocol/software version 1,0,x (major,minor,patch) The protocol versioning follows semantic versioning in that: MAJOR version increments represents incompatible API changes, MINOR version increments represents added functionality in a backwards-compatible manner PATCH version increments represents backwards-compatible bug fixes Overview The serial communication format is 115200 8-N-1 (no hardware flow control). Packets sent to and received from the modem start with a w and end with LF or CR+LF. The packet format is: Start byte Direction Command Options (0 to many) Checksum End byte w c or r x ,[option] *xx \\n or \\r\\n Direction is command ( c ) for commands issued to the modem and the modem replies with direction set to response ( r ). The commands can be sent as a string or entered one char at a time from a terminal. The protocol can support Water Linked modems with different payload sizes and extended features. To support any Water Linked modem the connection procedure is to: Get protocol version. Verify that the major version number is 1. Get payload size. Use this size when queuing packets for transmission the modem. For Water Linked Modem-M64 the payload size is 8 bytes. In order for two modems to communicate they must be configured to use different roles (A/B) on the same channel. The modem with role A will always transmit. The modem with role B will listen until it detects a signal from a modem of role A. It will then start transmitting responses back to the modem with role A. The modem with role B will go back to listen mode if several consecutive packets from the modem with role A cannot be decoded (i.e. signal is lost). Note Payload where every byte is \\0 is reserved. It is used to keep modems in sync if no data packet is queued by the user. This sync packet is filtered out by the receiver. Avoid this payload by compressing the data or otherwise ensuring atleast 1 bit is non-zero. Checksum is optional when sending commands to the modem. The modem always returns a checksum. The checksum algorithm is CRC-8 and it is formatted as a hexadecimal number using 2 lower-case charaters (ex: *c3 ). See the checksum section of the manual for our DVL product (which uses the same CRC-8 algorithm) for further details and example code. Commands Commands in the table are shown without the checksum for readability. Command Description Response Description wcv Get protocol version wrv, [major],[minor],[patch] Protocol version. eg: wrv,1,0,1 wcn Get supported payload size wrn, [size] Where size is supported payload size: eg: wrn,8 wcc Get modem configuration wrc, [role],[channel] Where role=a or b and channel=1-7 eg: wrc,a,3 wcs, [role],[channel] Set modem configuration - Where role=a or b and channel 1-7: eg: wrs,b,3 wrs,a or wrs,n ACK or NAK wcl Get transmit queue length wrl, [q] Number of packets currently queued for transmission. eg: wrl,107 wcf Flush transmit queue wrf,a or wrf,n ACK or NAK wcd Get diagnostic wrd, [link],[packet_count],[packet_loss_count],[bit_error_rate] link=y if connection with other modem, otherwise n. eg: wrd,y,1234,17,3.5 [1] wcq, [size],[payload] Queue packet for transmission. Number of characters in payload need to be exactly same as size. Payload can be binary. eg: wcq,8,HelloSea [2] wrq,a or wrq,n ACK or NAK wrp, [size],[payload] Got packet from other modem eg: wrp,8,Welcome! wr? Malformed request: Response when packet cannot be understood wr! Malformed request: Packet does not match the given checksum [1] packet_count is the number of packets received. If a packet cannot be decoded the packet_loss_count increments regardless of the packet being queued is data or a sync packet from the other modem. [2] Payload with just zeros ( \\0 ) is reserved for keeping the modems in sync if no packet is queued. It will be filtered out by the receiving modem. Examples Here is an example of setting up two modems and sending packets between them. On top side modem (using role A): Command Response Description wcv wrv,1,0,1*44 Get protocol version wcn wrn,8*ba Get payload size wcs,a,3 wrs,a*01 Set role A and channel 3 wcq,8,HelloSea wrq,a*d7 Send packet Wait packet from other modem wrp,8,HelloTop*bb Got response On AUV/ROV modem (using role B): Command Response Description wcv wrv,1,0,1*44 Get protocol version wcn wrn,8*ba Get payload size wcs,b,3 wrs,a*01 Set role B and channel 3 Wait packet from other modem wrp,8,HelloSea*58 Got packet wcq,8,HelloTop wrq,a*d7 Send response back","title":"Protocol"},{"location":"modem-m64/modem-m64-protocol/#modem-m64-serial-protocol","text":"This document describes the Water Linked Underwater Modem Link Layer protocol.","title":"Modem-M64 serial protocol"},{"location":"modem-m64/modem-m64-protocol/#terminology","text":"Modem - Unit for transmitting/receiving data Packet - Unit of data transmitted together ACK - Acknowledgement. The command issued was successful. NAK - Negative acknowledgement. The command issued failed.","title":"Terminology"},{"location":"modem-m64/modem-m64-protocol/#version","text":"This document describes protocol/software version 1,0,x (major,minor,patch) The protocol versioning follows semantic versioning in that: MAJOR version increments represents incompatible API changes, MINOR version increments represents added functionality in a backwards-compatible manner PATCH version increments represents backwards-compatible bug fixes","title":"Version"},{"location":"modem-m64/modem-m64-protocol/#overview","text":"The serial communication format is 115200 8-N-1 (no hardware flow control). Packets sent to and received from the modem start with a w and end with LF or CR+LF. The packet format is: Start byte Direction Command Options (0 to many) Checksum End byte w c or r x ,[option] *xx \\n or \\r\\n Direction is command ( c ) for commands issued to the modem and the modem replies with direction set to response ( r ). The commands can be sent as a string or entered one char at a time from a terminal. The protocol can support Water Linked modems with different payload sizes and extended features. To support any Water Linked modem the connection procedure is to: Get protocol version. Verify that the major version number is 1. Get payload size. Use this size when queuing packets for transmission the modem. For Water Linked Modem-M64 the payload size is 8 bytes. In order for two modems to communicate they must be configured to use different roles (A/B) on the same channel. The modem with role A will always transmit. The modem with role B will listen until it detects a signal from a modem of role A. It will then start transmitting responses back to the modem with role A. The modem with role B will go back to listen mode if several consecutive packets from the modem with role A cannot be decoded (i.e. signal is lost). Note Payload where every byte is \\0 is reserved. It is used to keep modems in sync if no data packet is queued by the user. This sync packet is filtered out by the receiver. Avoid this payload by compressing the data or otherwise ensuring atleast 1 bit is non-zero. Checksum is optional when sending commands to the modem. The modem always returns a checksum. The checksum algorithm is CRC-8 and it is formatted as a hexadecimal number using 2 lower-case charaters (ex: *c3 ). See the checksum section of the manual for our DVL product (which uses the same CRC-8 algorithm) for further details and example code.","title":"Overview"},{"location":"modem-m64/modem-m64-protocol/#commands","text":"Commands in the table are shown without the checksum for readability. Command Description Response Description wcv Get protocol version wrv, [major],[minor],[patch] Protocol version. eg: wrv,1,0,1 wcn Get supported payload size wrn, [size] Where size is supported payload size: eg: wrn,8 wcc Get modem configuration wrc, [role],[channel] Where role=a or b and channel=1-7 eg: wrc,a,3 wcs, [role],[channel] Set modem configuration - Where role=a or b and channel 1-7: eg: wrs,b,3 wrs,a or wrs,n ACK or NAK wcl Get transmit queue length wrl, [q] Number of packets currently queued for transmission. eg: wrl,107 wcf Flush transmit queue wrf,a or wrf,n ACK or NAK wcd Get diagnostic wrd, [link],[packet_count],[packet_loss_count],[bit_error_rate] link=y if connection with other modem, otherwise n. eg: wrd,y,1234,17,3.5 [1] wcq, [size],[payload] Queue packet for transmission. Number of characters in payload need to be exactly same as size. Payload can be binary. eg: wcq,8,HelloSea [2] wrq,a or wrq,n ACK or NAK wrp, [size],[payload] Got packet from other modem eg: wrp,8,Welcome! wr? Malformed request: Response when packet cannot be understood wr! Malformed request: Packet does not match the given checksum [1] packet_count is the number of packets received. If a packet cannot be decoded the packet_loss_count increments regardless of the packet being queued is data or a sync packet from the other modem. [2] Payload with just zeros ( \\0 ) is reserved for keeping the modems in sync if no packet is queued. It will be filtered out by the receiving modem.","title":"Commands"},{"location":"modem-m64/modem-m64-protocol/#examples","text":"Here is an example of setting up two modems and sending packets between them. On top side modem (using role A): Command Response Description wcv wrv,1,0,1*44 Get protocol version wcn wrn,8*ba Get payload size wcs,a,3 wrs,a*01 Set role A and channel 3 wcq,8,HelloSea wrq,a*d7 Send packet Wait packet from other modem wrp,8,HelloTop*bb Got response On AUV/ROV modem (using role B): Command Response Description wcv wrv,1,0,1*44 Get protocol version wcn wrn,8*ba Get payload size wcs,b,3 wrs,a*01 Set role B and channel 3 Wait packet from other modem wrp,8,HelloSea*58 Got packet wcq,8,HelloTop wrq,a*d7 Send response back","title":"Examples"},{"location":"modem-m64/modem-m64/","text":"Modem-M64 The Modem-M64 is retired and no longer available for sale. Description The Modem M64 is a two-way half-duplex 64bps acoustic modem with a robust and user configurable data link. The M64 sets a new market standard with its record-breaking physical size, low power requirement and cost. All this combined with a very useful technical specification, the M64 opens new possibilities for underwater communication in both existing and new areas. LED Signals No green light: Power is off. Flashing green light (every 3 seconds): Modem is trying to pair with another modem. Fixed green light: Modem has sync with another modem. The LED will blink each time it receives a packet from the other modem (once a second). Wiring interface The tables below shows the pinning of the Modem-M64 interface. Depending on which cable type is used, the power wires may have different colors. Interface Color (Belden) Color (4TP1P) Positive (10-18V) Orange Red Negative/Ground Orange/White Black UART RX Brown Brown UART TX Brown/White Brown/White Note Power must be applied to the power terminals before applying voltage to UART pins Terminal Interface The Modem-M64 has a 3.3 volt UART interface. Settings Value Baud rate 115200 Data parity stop 8N1 Flow control None Channels Modem M64 supports channels 1-7. From (kHz) To (kHz) Channels using this frequency band 31.25 62.25 1 62.25 93.75 2 (16) 93.75 125.00 3 (16) 125.00 156.00 4 (17) 156.00 187.00 5 (17) 187.00 218.00 6 (18) 218.00 250.00 7 (18) Please note that the Underwater GPS Explorer kit channels 16, 17, 18 overlaps and all channels overlaps with Underwater GPS G2. Libraries and code examples Example code and libraries that can be used to communicate with the modem on the terminal interface: Python Dimensions","title":"Introduction"},{"location":"modem-m64/modem-m64/#modem-m64","text":"The Modem-M64 is retired and no longer available for sale.","title":"Modem-M64"},{"location":"modem-m64/modem-m64/#description","text":"The Modem M64 is a two-way half-duplex 64bps acoustic modem with a robust and user configurable data link. The M64 sets a new market standard with its record-breaking physical size, low power requirement and cost. All this combined with a very useful technical specification, the M64 opens new possibilities for underwater communication in both existing and new areas.","title":"Description"},{"location":"modem-m64/modem-m64/#led-signals","text":"No green light: Power is off. Flashing green light (every 3 seconds): Modem is trying to pair with another modem. Fixed green light: Modem has sync with another modem. The LED will blink each time it receives a packet from the other modem (once a second).","title":"LED Signals"},{"location":"modem-m64/modem-m64/#wiring-interface","text":"The tables below shows the pinning of the Modem-M64 interface. Depending on which cable type is used, the power wires may have different colors. Interface Color (Belden) Color (4TP1P) Positive (10-18V) Orange Red Negative/Ground Orange/White Black UART RX Brown Brown UART TX Brown/White Brown/White Note Power must be applied to the power terminals before applying voltage to UART pins","title":"Wiring interface"},{"location":"modem-m64/modem-m64/#terminal-interface","text":"The Modem-M64 has a 3.3 volt UART interface. Settings Value Baud rate 115200 Data parity stop 8N1 Flow control None","title":"Terminal Interface"},{"location":"modem-m64/modem-m64/#channels","text":"Modem M64 supports channels 1-7. From (kHz) To (kHz) Channels using this frequency band 31.25 62.25 1 62.25 93.75 2 (16) 93.75 125.00 3 (16) 125.00 156.00 4 (17) 156.00 187.00 5 (17) 187.00 218.00 6 (18) 218.00 250.00 7 (18) Please note that the Underwater GPS Explorer kit channels 16, 17, 18 overlaps and all channels overlaps with Underwater GPS G2.","title":"Channels"},{"location":"modem-m64/modem-m64/#libraries-and-code-examples","text":"Example code and libraries that can be used to communicate with the modem on the terminal interface: Python","title":"Libraries and code examples"},{"location":"modem-m64/modem-m64/#dimensions","text":"","title":"Dimensions"},{"location":"underwater-gps/antenna/","text":"Antenna Buy Antenna here! Description The Antenna is a quick deployable analog hydro acoustic receiver compatible with the Underwater GPS G2 system. The Antenna is equipped with 4 Receiver-A1 with large dynamic range followed by advanced digital signal processing functionality when connected to the Underwater GPS G2 topside unit. Benefits Foldable to minimize space during travel (54 x 12.5 x 14.5 cm). Quick deployable to minimize setup time. Small baseline (98 x 53.5 cm) suitable for small boats and tanks/pools. Highly robust operation in areas with reflections (shallow water, around installations etc.) Includes C-Size RAM Mount fixtures for universal mounting capabilities. Wiring interface The Antenna comes with 10 meters of cable. This is the maximum cable length available for the Antenna due to noise limitations on the analog signals. The table below shows the pinning of the Antenna connector. Dimensions Top view Side view","title":"Antenna"},{"location":"underwater-gps/antenna/#antenna","text":"Buy Antenna here!","title":"Antenna"},{"location":"underwater-gps/antenna/#description","text":"The Antenna is a quick deployable analog hydro acoustic receiver compatible with the Underwater GPS G2 system. The Antenna is equipped with 4 Receiver-A1 with large dynamic range followed by advanced digital signal processing functionality when connected to the Underwater GPS G2 topside unit.","title":"Description"},{"location":"underwater-gps/antenna/#benefits","text":"Foldable to minimize space during travel (54 x 12.5 x 14.5 cm). Quick deployable to minimize setup time. Small baseline (98 x 53.5 cm) suitable for small boats and tanks/pools. Highly robust operation in areas with reflections (shallow water, around installations etc.) Includes C-Size RAM Mount fixtures for universal mounting capabilities.","title":"Benefits"},{"location":"underwater-gps/antenna/#wiring-interface","text":"The Antenna comes with 10 meters of cable. This is the maximum cable length available for the Antenna due to noise limitations on the analog signals. The table below shows the pinning of the Antenna connector.","title":"Wiring interface"},{"location":"underwater-gps/antenna/#dimensions","text":"Top view Side view","title":"Dimensions"},{"location":"underwater-gps/hardware/","text":"Hardware Setup Connectors External * Locator-D1 is not compatible with the BlueROV2 Integration Kit . Internal LED Indicators LED name Description Power Solid green: Topside has power Ready Solid Green: Topside has booted successfully GPS Blinking green: Searching for GPS lock, solid green: Topside has GPS lock LED 1 Solid green: Firmware successfully loaded LED 2 Not in use Locator Solid green: Locator D1 is connected Receiver 1 Solid green: Receiver 1 connected Receiver 2 Solid green: Receiver 2 connected Receiver 3 Solid green: Receiver 3 connected Receiver 4 Solid green: Receiver 4 connected Note There is No indication when the Antenna is connected. Note NC : Not Connected. DNC : Do Not Connect, pins used for production. GND : Boldface indicate power lines (12 V, 3.3 V, VIN, GND). 40 pin Molex Interface Signal Pin Pin Signal Function GPIO 2* 1 2 GPIO 3 D1 TX+ 3 4 D1 TX- Locator-D1 D1 RX+ 5 6 D1 RX- | GND 7 8 12 V Power out R1 TX+ 9 10 R1 TX- Receiver-D1 R1 RX+ 11 12 R1 RX- | GND 13 14 12 V Power out R2 TX+ 15 16 R2 TX- Receiver-D1 R2 RX+ 17 18 R2 RX- | GND 19 20 12 V Power out R3 TX+ 21 22 R3 TX- Receiver-D1 R3 RX+ 23 24 R3 RX- | GND 25 26 12 V Power out R4 TX+ 27 28 R4 TX- Receiver-D1 R4 RX+ 29 30 R4 RX- | ANT RX 1+ 31 32 ANT RX 1- Antenna ANT RX 2+ 33 34 ANT RX 2- | ANT RX 3+ 35 36 ANT RX 3- | ANT RX 4+ 37 38 ANT RX 4- | A1 TX+ 39 40 A1 TX- Locator-A1 * Used to control relays for switching between Receivers and Antenna. 6 pin NMEA 0183 GPS + PPS (not currently implemented) Signal Pin Pin Signal GND 1 2 12 V NMEA GPS TX 3 4 NMEA GPS RX NMEA GPS PPS 5 6 GND 6 pin NMEA 0183 Compass (not currently implemented) Signal Pin Pin Signal GND 1 2 12 V NMEAS COMPASS TX 3 4 NMEA COMPASS RX NC 5 6 GND 6 pin NMEA 0183 Out (not currently implemented) Signal Pin Pin Signal GND 1 2 12 V NMEA OUT 3 4 NC NC 5 6 GND 16 pin TTL GPIO Signal Pin Pin Signal GND 1 2 12 V DNC 3 4 DNC DNC 5 6 DNC DNC 7 8 DNC GND 9 10 PPS OUT GND 11 12 PPS IN GPIO 0 13 14 GPIO 1 GND 15 16 3.3 V Note TTL voltage: 3.3 V (5.0 V tolerant). 2 pin MicroFit 3.0 Power Signal Pin Pin Signal GND 1 2 VIN * * 10 - 30 VDC, 0.7 A (12 V nominal). Fits Molex Micro-Fit 3.0 43645 series. Receiver-D1 setup Connect the four Receiver-D1 cables to bulkheads marked \"Receiver 1\" to \"Receiver 4\" on the housing. If using the Locator-D1, connect this to the bulkhead marked \"Locator\" on the housing. If using the Locator-A1, connect this to the bulkhead marked \"Locator\" on the housing. If using the Locator-U1, no connections to the housing is needed. Just power the Locator and make sure both status leds on U1 and Master-D1 are solid green. IMU The master electronics has an built in IMU used to provide the orientation of the master electronics. This is used in combination with the acoustic position and GPS to generate the global position of the Locator. IMU Calibration For the IMU to work properly it needs to be calibrated. If the system is started on a new location a new calibration is needed for the IMU to work as intended. The IMU is calibrated in the settings page of the user interface.","title":"Hardware"},{"location":"underwater-gps/hardware/#hardware-setup","text":"","title":"Hardware Setup"},{"location":"underwater-gps/hardware/#connectors","text":"","title":"Connectors"},{"location":"underwater-gps/hardware/#external","text":"* Locator-D1 is not compatible with the BlueROV2 Integration Kit .","title":"External"},{"location":"underwater-gps/hardware/#internal","text":"","title":"Internal"},{"location":"underwater-gps/hardware/#led-indicators","text":"LED name Description Power Solid green: Topside has power Ready Solid Green: Topside has booted successfully GPS Blinking green: Searching for GPS lock, solid green: Topside has GPS lock LED 1 Solid green: Firmware successfully loaded LED 2 Not in use Locator Solid green: Locator D1 is connected Receiver 1 Solid green: Receiver 1 connected Receiver 2 Solid green: Receiver 2 connected Receiver 3 Solid green: Receiver 3 connected Receiver 4 Solid green: Receiver 4 connected Note There is No indication when the Antenna is connected. Note NC : Not Connected. DNC : Do Not Connect, pins used for production. GND : Boldface indicate power lines (12 V, 3.3 V, VIN, GND).","title":"LED Indicators"},{"location":"underwater-gps/hardware/#40-pin-molex-interface","text":"Signal Pin Pin Signal Function GPIO 2* 1 2 GPIO 3 D1 TX+ 3 4 D1 TX- Locator-D1 D1 RX+ 5 6 D1 RX- | GND 7 8 12 V Power out R1 TX+ 9 10 R1 TX- Receiver-D1 R1 RX+ 11 12 R1 RX- | GND 13 14 12 V Power out R2 TX+ 15 16 R2 TX- Receiver-D1 R2 RX+ 17 18 R2 RX- | GND 19 20 12 V Power out R3 TX+ 21 22 R3 TX- Receiver-D1 R3 RX+ 23 24 R3 RX- | GND 25 26 12 V Power out R4 TX+ 27 28 R4 TX- Receiver-D1 R4 RX+ 29 30 R4 RX- | ANT RX 1+ 31 32 ANT RX 1- Antenna ANT RX 2+ 33 34 ANT RX 2- | ANT RX 3+ 35 36 ANT RX 3- | ANT RX 4+ 37 38 ANT RX 4- | A1 TX+ 39 40 A1 TX- Locator-A1 * Used to control relays for switching between Receivers and Antenna.","title":"40 pin Molex Interface"},{"location":"underwater-gps/hardware/#6-pin-nmea-0183-gps-pps-not-currently-implemented","text":"Signal Pin Pin Signal GND 1 2 12 V NMEA GPS TX 3 4 NMEA GPS RX NMEA GPS PPS 5 6 GND","title":"6 pin NMEA 0183 GPS + PPS (not currently implemented)"},{"location":"underwater-gps/hardware/#6-pin-nmea-0183-compass-not-currently-implemented","text":"Signal Pin Pin Signal GND 1 2 12 V NMEAS COMPASS TX 3 4 NMEA COMPASS RX NC 5 6 GND","title":"6 pin NMEA 0183 Compass (not currently implemented)"},{"location":"underwater-gps/hardware/#6-pin-nmea-0183-out-not-currently-implemented","text":"Signal Pin Pin Signal GND 1 2 12 V NMEA OUT 3 4 NC NC 5 6 GND","title":"6 pin NMEA 0183 Out (not currently implemented)"},{"location":"underwater-gps/hardware/#16-pin-ttl-gpio","text":"Signal Pin Pin Signal GND 1 2 12 V DNC 3 4 DNC DNC 5 6 DNC DNC 7 8 DNC GND 9 10 PPS OUT GND 11 12 PPS IN GPIO 0 13 14 GPIO 1 GND 15 16 3.3 V Note TTL voltage: 3.3 V (5.0 V tolerant).","title":"16 pin TTL GPIO"},{"location":"underwater-gps/hardware/#2-pin-microfit-30-power","text":"Signal Pin Pin Signal GND 1 2 VIN * * 10 - 30 VDC, 0.7 A (12 V nominal). Fits Molex Micro-Fit 3.0 43645 series.","title":"2 pin MicroFit 3.0 Power"},{"location":"underwater-gps/hardware/#receiver-d1-setup","text":"Connect the four Receiver-D1 cables to bulkheads marked \"Receiver 1\" to \"Receiver 4\" on the housing. If using the Locator-D1, connect this to the bulkhead marked \"Locator\" on the housing. If using the Locator-A1, connect this to the bulkhead marked \"Locator\" on the housing. If using the Locator-U1, no connections to the housing is needed. Just power the Locator and make sure both status leds on U1 and Master-D1 are solid green.","title":"Receiver-D1 setup"},{"location":"underwater-gps/hardware/#imu","text":"The master electronics has an built in IMU used to provide the orientation of the master electronics. This is used in combination with the acoustic position and GPS to generate the global position of the Locator.","title":"IMU"},{"location":"underwater-gps/hardware/#imu-calibration","text":"For the IMU to work properly it needs to be calibrated. If the system is started on a new location a new calibration is needed for the IMU to work as intended. The IMU is calibrated in the settings page of the user interface.","title":"IMU Calibration"},{"location":"underwater-gps/introduction/","text":"Introduction Underwater GPS G2 Buy Underwater GPS G2 here! Underwater GPS G2 is a new and improved version of the Explorer Kit. It provides an even more robust and reliable acoustic positioning system with a range of up to 300m (R300 edition). The purpose of the system is to give a live GPS position of ROVs, divers and other moving objects below the water surface. The Underwater GPS G2 system is based upon Short Baseline (SBL) acoustic positioning. A locator ( U1 , A1 , or D1 ) is attached to the device to be positioned. It functions as a beacon, sending out acoustic signals. Near the surface, either an antenna containing four receivers is lowered into the water, or four loose receivers are lowered into the water. These listen for the beacon signals. Time-of-flight from the locator to each of the four receivers is used in an innovative algorithm to calculate the position of the locator relative to the UGPS G2 topside unit. We refer to as the acoustic position . The UGPS G2 system obtains a global position by combining this acoustic position with the global GPS coordinates of the topside unit. This may be provided by the topside unit's in-built GPS antenna, or, for greater precision, passed in externally by means of the UGPS G2 API . This API provides output of both the acoustic and global positions calculated by the UGPS G2 system, as well as comprehensive programmatic configuration of the system. Compared to USBL systems, the UGPS G2 system has the advantage of working well in challenging environments, for example shallow water, or reflective environments such as near ship hulls, in fish cages, near harbour installations, inside water tanks, etc. One of our FAQs elaborates further on this. Features Range up to 300m (R300 version only) Quick deployment using an antenna WiFi connectivity Integrated global GPS antenna Interface supporting BlueROV2 hardware integration Simple and quick updating of firmware/software Kit content 1 x Underwater GPS Topside housing with Master-D1 and WiFi dongle 4 x Receiver-D1 with 10m cable / 1 x Antenna 1 x Locator U1/A1/D1 1 x 5m power cable Warnings Please read the following carefully before the UGPS G2 system is installed and used for the first time. Operation medium The Underwater GPS G2 system is designed only to work in water. It will not work if the locator and/or antenna/receivers are out of water. Max voltage The absolute maximum voltage rating of the equipment is 30V. Voltages above this will damage the electronics. Temperature Make sure the system does not overheat. Avoid placing it in direct sunlight over extended periods of time. Salt water The contents of the topside housing will corrode and/or short if in contact with salt water. Keep the housing lid closed when in the field to avoid salt water getting inside. Force Avoid using excessive force on connectors, screws and other parts of the system, as this can lead to mechanical failure. Discussion If you have questions, you are very welcome to contact our customer support , where we will be happy to help you. Datasheet Datasheet","title":"Introduction"},{"location":"underwater-gps/introduction/#introduction","text":"","title":"Introduction"},{"location":"underwater-gps/introduction/#underwater-gps-g2","text":"Buy Underwater GPS G2 here! Underwater GPS G2 is a new and improved version of the Explorer Kit. It provides an even more robust and reliable acoustic positioning system with a range of up to 300m (R300 edition). The purpose of the system is to give a live GPS position of ROVs, divers and other moving objects below the water surface. The Underwater GPS G2 system is based upon Short Baseline (SBL) acoustic positioning. A locator ( U1 , A1 , or D1 ) is attached to the device to be positioned. It functions as a beacon, sending out acoustic signals. Near the surface, either an antenna containing four receivers is lowered into the water, or four loose receivers are lowered into the water. These listen for the beacon signals. Time-of-flight from the locator to each of the four receivers is used in an innovative algorithm to calculate the position of the locator relative to the UGPS G2 topside unit. We refer to as the acoustic position . The UGPS G2 system obtains a global position by combining this acoustic position with the global GPS coordinates of the topside unit. This may be provided by the topside unit's in-built GPS antenna, or, for greater precision, passed in externally by means of the UGPS G2 API . This API provides output of both the acoustic and global positions calculated by the UGPS G2 system, as well as comprehensive programmatic configuration of the system. Compared to USBL systems, the UGPS G2 system has the advantage of working well in challenging environments, for example shallow water, or reflective environments such as near ship hulls, in fish cages, near harbour installations, inside water tanks, etc. One of our FAQs elaborates further on this.","title":"Underwater GPS G2"},{"location":"underwater-gps/introduction/#features","text":"Range up to 300m (R300 version only) Quick deployment using an antenna WiFi connectivity Integrated global GPS antenna Interface supporting BlueROV2 hardware integration Simple and quick updating of firmware/software","title":"Features"},{"location":"underwater-gps/introduction/#kit-content","text":"1 x Underwater GPS Topside housing with Master-D1 and WiFi dongle 4 x Receiver-D1 with 10m cable / 1 x Antenna 1 x Locator U1/A1/D1 1 x 5m power cable","title":"Kit content"},{"location":"underwater-gps/introduction/#warnings","text":"Please read the following carefully before the UGPS G2 system is installed and used for the first time. Operation medium The Underwater GPS G2 system is designed only to work in water. It will not work if the locator and/or antenna/receivers are out of water. Max voltage The absolute maximum voltage rating of the equipment is 30V. Voltages above this will damage the electronics. Temperature Make sure the system does not overheat. Avoid placing it in direct sunlight over extended periods of time. Salt water The contents of the topside housing will corrode and/or short if in contact with salt water. Keep the housing lid closed when in the field to avoid salt water getting inside. Force Avoid using excessive force on connectors, screws and other parts of the system, as this can lead to mechanical failure.","title":"Warnings"},{"location":"underwater-gps/introduction/#discussion","text":"If you have questions, you are very welcome to contact our customer support , where we will be happy to help you.","title":"Discussion"},{"location":"underwater-gps/introduction/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"underwater-gps/network-settings/","text":"Network Settings WiFi The local Underwater GPS WiFi is configured as: Mode : Access Point SSID : UnderwaterGPS Password : waterlinked Security : WPA2-Personal Once connected to the UnderwaterGPS WiFi the GUI is available on: http://192.168.7.1/ Ethernet At power-up, the Master-D1 reads the IP switch settings. The ethernet network mode depends on the switch position. Network mode Direction IP switch position Configurable UP Static IP 192.168.2.94 DOWN Note The host computer connected to the topside unit needs to have an IP-address on the same subnet as set on the Master-D1. For example: If the IP address of the UGPS is 192.168.2.94 the host computer needs to be configured to a different 192.168.2.x address e.g. 192.168.2.100.","title":"Network settings"},{"location":"underwater-gps/network-settings/#network-settings","text":"","title":"Network Settings"},{"location":"underwater-gps/network-settings/#wifi","text":"The local Underwater GPS WiFi is configured as: Mode : Access Point SSID : UnderwaterGPS Password : waterlinked Security : WPA2-Personal Once connected to the UnderwaterGPS WiFi the GUI is available on: http://192.168.7.1/","title":"WiFi"},{"location":"underwater-gps/network-settings/#ethernet","text":"At power-up, the Master-D1 reads the IP switch settings. The ethernet network mode depends on the switch position. Network mode Direction IP switch position Configurable UP Static IP 192.168.2.94 DOWN Note The host computer connected to the topside unit needs to have an IP-address on the same subnet as set on the Master-D1. For example: If the IP address of the UGPS is 192.168.2.94 the host computer needs to be configured to a different 192.168.2.x address e.g. 192.168.2.100.","title":"Ethernet"},{"location":"underwater-gps/power-supply/","text":"Power supply The Underwater GPS G2 can be powered using either the provided power cable connected to a 12VDC source, or with a battery (not provided). Power cable Connector position Manufacturer Part number Underwater GPS Housing Switchcraft 17282-2PG-300 Power cable Switchcraft CARA162802S19790 The power cable comes with a blunt cut end. Strip the jacket and connect the wires to your favorite 12V power source. Black Negative White Positive Input voltage 10V \u2013 30V Current consumption 0.25A at 12V Power-on current surge 2.30A at 12V Protection Reverse polarity Both the power button and the power input can be found on the right side of the Underwater GPS housing. The power button will illuminate when the power is switched on. Note There is both an external latching power button and an internal power switch. These are OR configured, meaning they override each other. By default, the internal power switch is in the OFF position. Battery A battery may be used instead of wired power. Use a battery with a nominal voltage within the voltage range. A Molex-to-XT60 cable assembly is provided with the Underwater GPS kit for ease of connection to battery packs with XT60 connectors. The battery pack can be secured within the Underwater GPS housing using the provided non-slip battery strap. Maximum battery width: 50 mm (2\"). Power usage The power usage of the Underwater GPS G2 will vary based on the supplied voltage, Receiver and Locator setup, and whether or not the BlueROV2 Integration Kit has been installed. The table below list the average current consumption for components used with Underwater GPS G2, assuming an input voltage of 12 VDC. Component Current consumption (12V in) Master Electronics 250 mA Locator-A1 10 mA Locator-D1 130 mA Locator-S1 60 mA 4x Receiver-D1 4x35 mA Antenna 20 mA","title":"Power supply"},{"location":"underwater-gps/power-supply/#power-supply","text":"The Underwater GPS G2 can be powered using either the provided power cable connected to a 12VDC source, or with a battery (not provided).","title":"Power supply"},{"location":"underwater-gps/power-supply/#power-cable","text":"Connector position Manufacturer Part number Underwater GPS Housing Switchcraft 17282-2PG-300 Power cable Switchcraft CARA162802S19790 The power cable comes with a blunt cut end. Strip the jacket and connect the wires to your favorite 12V power source. Black Negative White Positive Input voltage 10V \u2013 30V Current consumption 0.25A at 12V Power-on current surge 2.30A at 12V Protection Reverse polarity Both the power button and the power input can be found on the right side of the Underwater GPS housing. The power button will illuminate when the power is switched on. Note There is both an external latching power button and an internal power switch. These are OR configured, meaning they override each other. By default, the internal power switch is in the OFF position.","title":"Power cable"},{"location":"underwater-gps/power-supply/#battery","text":"A battery may be used instead of wired power. Use a battery with a nominal voltage within the voltage range. A Molex-to-XT60 cable assembly is provided with the Underwater GPS kit for ease of connection to battery packs with XT60 connectors. The battery pack can be secured within the Underwater GPS housing using the provided non-slip battery strap. Maximum battery width: 50 mm (2\").","title":"Battery"},{"location":"underwater-gps/power-supply/#power-usage","text":"The power usage of the Underwater GPS G2 will vary based on the supplied voltage, Receiver and Locator setup, and whether or not the BlueROV2 Integration Kit has been installed. The table below list the average current consumption for components used with Underwater GPS G2, assuming an input voltage of 12 VDC. Component Current consumption (12V in) Master Electronics 250 mA Locator-A1 10 mA Locator-D1 130 mA Locator-S1 60 mA 4x Receiver-D1 4x35 mA Antenna 20 mA","title":"Power usage"},{"location":"underwater-gps/quickstart/","text":"Quickstart Intro A quick guide on how to start using the Underwater GPS system: Power the topside unit Connect to the Underwater GPS topside box Deploy locator and antenna/receivers Select locator and channel in the GUI Configure antenna/receiver placement in the GUI Set heading Power the topside unit Start by connecting power to the UGPS G2 topside box. The GPS receiver in the topside box will begin receiving signals and achieve a lock whilst we setup the rest of the system. If you are using the Locator-U1, power it on now as well; it too will acquire a GPS lock whilst we setup the rest of the system. If you are inside, use of a GPS repeater or similar will be necessary. Connect to the Underwater GPS topside box Connect to the WiFi access point UnderwaterGPS on your PC/tablet/smartphone. The WiFi password is waterlinked . Navigate to http://192.168.7.1/ in a web browser to access the Underwater GPS web GUI. Deploy locator and antenna/receivers Locator Attach the locator ( U1 , A1 , or D1 ) to your vehicle. The BlueROV2 integration guide may be helpful if integrating an A1 or D1 locator with a vehicle tether. If using an A1 or D1 locator, connect it to the 'Locator' bulkhead on the UGPS G2 topside box. The U1 connector is wireless, and this step can be omitted. Antenna Unfold the antenna and lock the mast straight using the latches on the folding joints. Secure the three arms in place using the thumb screw. Place the antenna in water at the desired location. Secure the Antenna using the RAM Mount components included with the antenna. Connect the antenna to the bulkhead marked 'Receiver 1/Antenna' on the UGPS G2 topside box (see the above picture). Tip If the RAM Mount components included with the antenna do not meet your needs, many alternative RAM Mount Arms and Bases are available . Loose receivers Before deploying the receivers in the water, add a piece of tape to each receiver cable at the desired depth, to make configuration easier. Place the receivers in the water at the desired location, and connect one to each of the four bulkheads 'Receiver 1', 'Receiver 2', 'Receiver 3', and 'Receiver 4' of the UGPS G2 topside box (see the above picture). Tip Add a weight just above each receiver to improvement stability in the water. Select locator and channel in the GUI Select the correct locator type in the GUI settings , and choose which channel to listen on. Channel 2 is the default. If using a Locator-U1 , ensure that its channel (set by completely unscrewing the lid and turning the dial inside) is set to the same as you configure in the GUI. Note If you are using the Locator-A1, depth information needs to be provided the topside unit by means of the UGPS API . You can ignore this if following the BlueROV2 integration guide . Configure antenna/receiver placement and search range Provide the correct placement of the antenna/receivers relative to the topside box in the GUI settings , and, if using an antenna, specify if it has been rotated from the default indicated in the GUI. Specifically, for the antenna, enter the position and optionally the rotational angle manually under Advanced settings . If using loose receivers, either drag and drop each receiver to its position, or enter the positions manually. Limit the search area by changing its radius, direction or sector size in the GUI Tip Reducing the search area can improve the performance of the system, and we recommend to do this as far as possible, even if operating in a small area such as a tank or pool. Set heading In the top bar of the GUI you will see a warning about missing heading. Click the link, click to zero the gyros, then set compass heading to a reference heading (e.g. from an analogue compass, compass app, or boat compass). Info Setting the heading replaces IMU calibration as of release 3.3.0. You are now ready to explore the underwater world while knowing where you are!","title":"Quickstart"},{"location":"underwater-gps/quickstart/#quickstart","text":"","title":"Quickstart"},{"location":"underwater-gps/quickstart/#intro","text":"A quick guide on how to start using the Underwater GPS system: Power the topside unit Connect to the Underwater GPS topside box Deploy locator and antenna/receivers Select locator and channel in the GUI Configure antenna/receiver placement in the GUI Set heading","title":"Intro"},{"location":"underwater-gps/quickstart/#power-the-topside-unit","text":"Start by connecting power to the UGPS G2 topside box. The GPS receiver in the topside box will begin receiving signals and achieve a lock whilst we setup the rest of the system. If you are using the Locator-U1, power it on now as well; it too will acquire a GPS lock whilst we setup the rest of the system. If you are inside, use of a GPS repeater or similar will be necessary.","title":"Power the topside unit"},{"location":"underwater-gps/quickstart/#connect-to-the-underwater-gps-topside-box","text":"Connect to the WiFi access point UnderwaterGPS on your PC/tablet/smartphone. The WiFi password is waterlinked . Navigate to http://192.168.7.1/ in a web browser to access the Underwater GPS web GUI.","title":"Connect to the Underwater GPS topside box"},{"location":"underwater-gps/quickstart/#deploy-locator-and-antennareceivers","text":"","title":"Deploy locator and antenna/receivers"},{"location":"underwater-gps/quickstart/#locator","text":"Attach the locator ( U1 , A1 , or D1 ) to your vehicle. The BlueROV2 integration guide may be helpful if integrating an A1 or D1 locator with a vehicle tether. If using an A1 or D1 locator, connect it to the 'Locator' bulkhead on the UGPS G2 topside box. The U1 connector is wireless, and this step can be omitted.","title":"Locator"},{"location":"underwater-gps/quickstart/#antenna","text":"Unfold the antenna and lock the mast straight using the latches on the folding joints. Secure the three arms in place using the thumb screw. Place the antenna in water at the desired location. Secure the Antenna using the RAM Mount components included with the antenna. Connect the antenna to the bulkhead marked 'Receiver 1/Antenna' on the UGPS G2 topside box (see the above picture). Tip If the RAM Mount components included with the antenna do not meet your needs, many alternative RAM Mount Arms and Bases are available .","title":"Antenna"},{"location":"underwater-gps/quickstart/#loose-receivers","text":"Before deploying the receivers in the water, add a piece of tape to each receiver cable at the desired depth, to make configuration easier. Place the receivers in the water at the desired location, and connect one to each of the four bulkheads 'Receiver 1', 'Receiver 2', 'Receiver 3', and 'Receiver 4' of the UGPS G2 topside box (see the above picture). Tip Add a weight just above each receiver to improvement stability in the water.","title":"Loose receivers"},{"location":"underwater-gps/quickstart/#select-locator-and-channel-in-the-gui","text":"Select the correct locator type in the GUI settings , and choose which channel to listen on. Channel 2 is the default. If using a Locator-U1 , ensure that its channel (set by completely unscrewing the lid and turning the dial inside) is set to the same as you configure in the GUI. Note If you are using the Locator-A1, depth information needs to be provided the topside unit by means of the UGPS API . You can ignore this if following the BlueROV2 integration guide .","title":"Select locator and channel in the GUI"},{"location":"underwater-gps/quickstart/#configure-antennareceiver-placement-and-search-range","text":"Provide the correct placement of the antenna/receivers relative to the topside box in the GUI settings , and, if using an antenna, specify if it has been rotated from the default indicated in the GUI. Specifically, for the antenna, enter the position and optionally the rotational angle manually under Advanced settings . If using loose receivers, either drag and drop each receiver to its position, or enter the positions manually. Limit the search area by changing its radius, direction or sector size in the GUI Tip Reducing the search area can improve the performance of the system, and we recommend to do this as far as possible, even if operating in a small area such as a tank or pool.","title":"Configure antenna/receiver placement and search range"},{"location":"underwater-gps/quickstart/#set-heading","text":"In the top bar of the GUI you will see a warning about missing heading. Click the link, click to zero the gyros, then set compass heading to a reference heading (e.g. from an analogue compass, compass app, or boat compass). Info Setting the heading replaces IMU calibration as of release 3.3.0. You are now ready to explore the underwater world while knowing where you are!","title":"Set heading"},{"location":"underwater-gps/receiver-d1/","text":"Receiver-D1 Buy Receiver-D1 here! Description The Receiver-D1 is a digital low-noise, high sensitivity hydro acoustic receiver that converts acoustic waves to a digital data stream. The receiver is equipped with a wideband analog front-end width a large dynamic range followed by advanced digital signal processing functionality. The electrical interface complies with the Water Linked D1 communication standard. Benefits Extremely small footprint enabling easy integration in other equipment. Highly robust operation in areas with reflections (shallow water, around installations etc.) Wiring interface The tables below shows the pinning of the Receiver interface connectors. Dimensions Datasheet Datasheet","title":"Receiver-D1"},{"location":"underwater-gps/receiver-d1/#receiver-d1","text":"Buy Receiver-D1 here!","title":"Receiver-D1"},{"location":"underwater-gps/receiver-d1/#description","text":"The Receiver-D1 is a digital low-noise, high sensitivity hydro acoustic receiver that converts acoustic waves to a digital data stream. The receiver is equipped with a wideband analog front-end width a large dynamic range followed by advanced digital signal processing functionality. The electrical interface complies with the Water Linked D1 communication standard.","title":"Description"},{"location":"underwater-gps/receiver-d1/#benefits","text":"Extremely small footprint enabling easy integration in other equipment. Highly robust operation in areas with reflections (shallow water, around installations etc.)","title":"Benefits"},{"location":"underwater-gps/receiver-d1/#wiring-interface","text":"The tables below shows the pinning of the Receiver interface connectors.","title":"Wiring interface"},{"location":"underwater-gps/receiver-d1/#dimensions","text":"","title":"Dimensions"},{"location":"underwater-gps/receiver-d1/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"underwater-gps/reference-frames/","text":"Reference frames UGPS G2 outputs positions in two reference frames: a global frame and an acoustic frame. The position in the global frame is obtained by combining the position in the acoustic frame with global GPS data and orientation data from the topside unit's built-in GPS antenna and IMU. Global frame North (\u00b0 latitude) East (\u00b0 longitude) Acoustic frame y x (Forward) Global frame The positions of the global frame are in terms of latitude and longitude, as defined by the WGS 84 standard, and depth (relative to the sea surface). The Map position tab in the Position panel of the GUI plots the global frame position. Acoustic frame The x-axis of the acoustic frame is defined by the 'Forward' direction of the topside housing (indicated by a label on the lid, as shown in the figure below). The y-axes and z-axes are defined to be 'east' and 'down' respectively in relation to this x-axis. The Relative position tab in the Position panel of the GUI plots the acoustic frame position. The z-coordinate of the acoustic frame is always depth relative to the sea surface (not, say, relative to the antenna base, if using an antenna). The default origin is a point on the topside housing, but can be taken to be anywhere: it is entirely defined by the positioning of the antenna/receivers with respect to it. If using an antenna, it may help intuitively to take the origin to be the base of the antenna, which can be achieved by setting both Distance to topside housing fields to 0 under Baseline -> Antenna configuration -> Advanced settings . Note The axes of the acoustic frame in the first version of UGPS, the Explorer Kit , were slightly different: it was the y-axis which was aligned with the forward direction of the topside housing, and the x-axis which was to the 'east' of this.","title":"Reference frames"},{"location":"underwater-gps/reference-frames/#reference-frames","text":"UGPS G2 outputs positions in two reference frames: a global frame and an acoustic frame. The position in the global frame is obtained by combining the position in the acoustic frame with global GPS data and orientation data from the topside unit's built-in GPS antenna and IMU. Global frame North (\u00b0 latitude) East (\u00b0 longitude) Acoustic frame y x (Forward)","title":"Reference frames"},{"location":"underwater-gps/reference-frames/#global-frame","text":"The positions of the global frame are in terms of latitude and longitude, as defined by the WGS 84 standard, and depth (relative to the sea surface). The Map position tab in the Position panel of the GUI plots the global frame position.","title":"Global frame"},{"location":"underwater-gps/reference-frames/#acoustic-frame","text":"The x-axis of the acoustic frame is defined by the 'Forward' direction of the topside housing (indicated by a label on the lid, as shown in the figure below). The y-axes and z-axes are defined to be 'east' and 'down' respectively in relation to this x-axis. The Relative position tab in the Position panel of the GUI plots the acoustic frame position. The z-coordinate of the acoustic frame is always depth relative to the sea surface (not, say, relative to the antenna base, if using an antenna). The default origin is a point on the topside housing, but can be taken to be anywhere: it is entirely defined by the positioning of the antenna/receivers with respect to it. If using an antenna, it may help intuitively to take the origin to be the base of the antenna, which can be achieved by setting both Distance to topside housing fields to 0 under Baseline -> Antenna configuration -> Advanced settings . Note The axes of the acoustic frame in the first version of UGPS, the Explorer Kit , were slightly different: it was the y-axis which was aligned with the forward direction of the topside housing, and the x-axis which was to the 'east' of this.","title":"Acoustic frame"},{"location":"underwater-gps/sw-update/","text":"Software updates It is recommended to always run the latest UGPS G2 software where possible. The latest software can be obtained automatically or manually . Automatic software update The G2's GUI automatically checks and indicates if a new software version is available. Connect the G2 topside unit over ethernet or wifi to a network connected to the internet. If on a personal computer, it may be necessary to make a network bridge between a network interface which has access to the internet and the interface through which the G2 topside is connected. Go to http://[IP_ADDRESS_OF_THE_G2_TOPSIDE]:9000 in a web browser. The GUI will automatically check if there is a new version available, and if so, initiate installation of it with a single click. Offline software update If it is not possible to connect the G2 topside to the internet, one can proceed as follows. Find the current version and chip ID of the G2 topside unit at Menu -> About in the GUI . Manually download an update package ( .wlup ) from the update server using the chip ID. Verify if the downloaded version is newer than the currently running version. Navigate to http://[IP_ADDRESS_OF_THE_G2_TOPSIDE]:9000 in a web browser. Select 'Manual upload' and then upload the downloaded .wlup file.","title":"Software updates"},{"location":"underwater-gps/sw-update/#software-updates","text":"It is recommended to always run the latest UGPS G2 software where possible. The latest software can be obtained automatically or manually .","title":"Software updates"},{"location":"underwater-gps/sw-update/#automatic-software-update","text":"The G2's GUI automatically checks and indicates if a new software version is available. Connect the G2 topside unit over ethernet or wifi to a network connected to the internet. If on a personal computer, it may be necessary to make a network bridge between a network interface which has access to the internet and the interface through which the G2 topside is connected. Go to http://[IP_ADDRESS_OF_THE_G2_TOPSIDE]:9000 in a web browser. The GUI will automatically check if there is a new version available, and if so, initiate installation of it with a single click.","title":"Automatic software update"},{"location":"underwater-gps/sw-update/#offline-software-update","text":"If it is not possible to connect the G2 topside to the internet, one can proceed as follows. Find the current version and chip ID of the G2 topside unit at Menu -> About in the GUI . Manually download an update package ( .wlup ) from the update server using the chip ID. Verify if the downloaded version is newer than the currently running version. Navigate to http://[IP_ADDRESS_OF_THE_G2_TOPSIDE]:9000 in a web browser. Select 'Manual upload' and then upload the downloaded .wlup file.","title":"Offline software update"},{"location":"underwater-gps/ugps-faq/","text":"Underwater GPS FAQ Below are some frequently asked questions about the Underwater GPS. Click on a question in the table of content to the right or simply scroll down to read the FAQ's. 1. Can I set the speed of sound? Yes, If you have the R300 version you can set the speed of sound in the \"settings\" menu in the GUI. Note If you have the R100 version you can't change teh speed of sound. The option to change the speed of sound is still present, but you will get an error message saying \"Bad request\"","title":"Underwater GPS FAQ"},{"location":"underwater-gps/ugps-faq/#underwater-gps-faq","text":"Below are some frequently asked questions about the Underwater GPS. Click on a question in the table of content to the right or simply scroll down to read the FAQ's.","title":"Underwater GPS FAQ"},{"location":"underwater-gps/ugps-faq/#1-can-i-set-the-speed-of-sound","text":"Yes, If you have the R300 version you can set the speed of sound in the \"settings\" menu in the GUI. Note If you have the R100 version you can't change teh speed of sound. The option to change the speed of sound is still present, but you will get an error message saying \"Bad request\"","title":"1. Can I set the speed of sound?"},{"location":"underwater-gps/gui/demo-gui/","text":"Demo We offer a live demo of the GUI of the UGPS G2 system. It runs on simulated data designed to illustrate various GUI features; this data is not necessarily realistic in all aspects!","title":"Demo"},{"location":"underwater-gps/gui/demo-gui/#demo","text":"We offer a live demo of the GUI of the UGPS G2 system. It runs on simulated data designed to illustrate various GUI features; this data is not necessarily realistic in all aspects!","title":"Demo"},{"location":"underwater-gps/gui/diagnostic-report/","text":"Diagnostic report On the diagnostic report page you can generate a report if you are experiencing problems with the UPGS. First type a small description of the problem you are experiencing and the click on the generate button. Then send the resulting .wdat file to support@waterlinked.com.","title":"Diagnostic report"},{"location":"underwater-gps/gui/diagnostic-report/#diagnostic-report","text":"On the diagnostic report page you can generate a report if you are experiencing problems with the UPGS. First type a small description of the problem you are experiencing and the click on the generate button. Then send the resulting .wdat file to support@waterlinked.com.","title":"Diagnostic report"},{"location":"underwater-gps/gui/diagnostic/","text":"Diagnostics Verify Receiver signal strength in the diagnostic page on the web GUI by going to the diagnostic tab in the side panel on the left. This view will show the signal strength from all Receivers. It should look something like this: In the diagnostic plot you should see the signal from all 4 Receivers. The signals should be well above the noise floor. Interference Acoustic interference can be observed in the diagnostic plot. Echo sounders from your boat or nearby boats typically appears like burst noise. If it is coming from your boat, try to turn off the echo sounder to improve position accuracy. In case of interference from other acoustic sources, use the GUI to try other channels to avoid the interference.","title":"Diagnostic"},{"location":"underwater-gps/gui/diagnostic/#diagnostics","text":"Verify Receiver signal strength in the diagnostic page on the web GUI by going to the diagnostic tab in the side panel on the left. This view will show the signal strength from all Receivers. It should look something like this: In the diagnostic plot you should see the signal from all 4 Receivers. The signals should be well above the noise floor.","title":"Diagnostics"},{"location":"underwater-gps/gui/diagnostic/#interference","text":"Acoustic interference can be observed in the diagnostic plot. Echo sounders from your boat or nearby boats typically appears like burst noise. If it is coming from your boat, try to turn off the echo sounder to improve position accuracy. In case of interference from other acoustic sources, use the GUI to try other channels to avoid the interference.","title":"Interference"},{"location":"underwater-gps/gui/position/","text":"Position view The Underwater GPS GUI is web based. Using your favorite web browser, go the IP address as defined here . We currently support and recommend Chrome, Firefox, Safari and Edge. Attention Internet Explorer is not supported as of now.","title":"Position"},{"location":"underwater-gps/gui/position/#position-view","text":"The Underwater GPS GUI is web based. Using your favorite web browser, go the IP address as defined here . We currently support and recommend Chrome, Firefox, Safari and Edge. Attention Internet Explorer is not supported as of now.","title":"Position view"},{"location":"underwater-gps/gui/receivers/","text":"Baseline Select Antenna or Receivers in the tab at the top according to whether an antenna or loose receivers are used. Antenna The antenna can be placed anywhere up to 10m from the topside housing (limited by cable length). Go through the following. By the antenna base is meant the joining point of the three prongs with the receivers at their ends. Alignment Ensure that the 'Forward' direction of the antenna as defined by a label on one of its prongs (see also the figure below) is aligned with the 'Forward' direction of the topside housing (indicated by a label on the lid). If it is not possible to physically align them, in Baseline -> Antenna configuration -> Advanced settings , specify the clockwise angle in degrees from the forward axis of the topside to the forward axis of the antenna. If this alignment is not carried out, the global position outputted by UGPS G2 will be incorrect. Line-of-sight Ensure that there will be line-of-sight between the antenna and locator. Antenna depth Ensure that the base of the antenna is at a depth of at least one metre (as indicated by a label upon the top folding joint of the pole of the antenna), to avoid acoustic disturbance. The depth of the antenna base (relative to the sea surface) must be specified in Baseline -> Antenna configuration -> Advanced settings -> Antenna depth . If it is not, both the acoustic and global positions may be incorrect. Antenna stability Secure the antenna tightly to the vessel using the provided Ram Mount. Further points of note: Limit search area : a better position will likely be obtained if the search area is restricted as far as possible in the graphical configuration pane at Baseline -> Antenna configuration . Directivity : the antenna and locators are omnidirectional, that is, signal strength should be good in all directions Receivers Loose receivers can be placed anywhere up to 100m from the topside housing. Go through the following, and configure the placement of the receivers in the graphical pane at Baseline -> Receiver and range configuration so that their positions relative to the origin and their depths are correct. Line-of-sight Ensure that all the receivers will have line-of-sight to the locator. Separation Ensure that the receivers are not too close, and are not all in a line. A grid of 2x2 metres should typically be sufficient for good performance, but experiment with different configurations if you experience sub-optimal performance. Depth Place the receivers at a depth of at least a metre, to avoid acoustic disturbance. Stability Consider adding some weight to the receiver cables just above the receivers. Further points of note: Limit search area : a better position will likely be obtained if the search area is restricted as far as possible in the graphical configuration pane at Baseline -> Antenna configuration . Directivity : the receivers and locators are omnidirectional, that is, signal strength should be good in all directions The figure below indicates a typical loose receiver configuration when the topside unit is upon a boat. The receivers hang from the side of the boat. The origin of the the acoustic frame is in this case a point on the topside unit.","title":"Baseline"},{"location":"underwater-gps/gui/receivers/#baseline","text":"Select Antenna or Receivers in the tab at the top according to whether an antenna or loose receivers are used.","title":"Baseline"},{"location":"underwater-gps/gui/receivers/#antenna","text":"The antenna can be placed anywhere up to 10m from the topside housing (limited by cable length). Go through the following. By the antenna base is meant the joining point of the three prongs with the receivers at their ends. Alignment Ensure that the 'Forward' direction of the antenna as defined by a label on one of its prongs (see also the figure below) is aligned with the 'Forward' direction of the topside housing (indicated by a label on the lid). If it is not possible to physically align them, in Baseline -> Antenna configuration -> Advanced settings , specify the clockwise angle in degrees from the forward axis of the topside to the forward axis of the antenna. If this alignment is not carried out, the global position outputted by UGPS G2 will be incorrect. Line-of-sight Ensure that there will be line-of-sight between the antenna and locator. Antenna depth Ensure that the base of the antenna is at a depth of at least one metre (as indicated by a label upon the top folding joint of the pole of the antenna), to avoid acoustic disturbance. The depth of the antenna base (relative to the sea surface) must be specified in Baseline -> Antenna configuration -> Advanced settings -> Antenna depth . If it is not, both the acoustic and global positions may be incorrect. Antenna stability Secure the antenna tightly to the vessel using the provided Ram Mount. Further points of note: Limit search area : a better position will likely be obtained if the search area is restricted as far as possible in the graphical configuration pane at Baseline -> Antenna configuration . Directivity : the antenna and locators are omnidirectional, that is, signal strength should be good in all directions","title":"Antenna"},{"location":"underwater-gps/gui/receivers/#receivers","text":"Loose receivers can be placed anywhere up to 100m from the topside housing. Go through the following, and configure the placement of the receivers in the graphical pane at Baseline -> Receiver and range configuration so that their positions relative to the origin and their depths are correct. Line-of-sight Ensure that all the receivers will have line-of-sight to the locator. Separation Ensure that the receivers are not too close, and are not all in a line. A grid of 2x2 metres should typically be sufficient for good performance, but experiment with different configurations if you experience sub-optimal performance. Depth Place the receivers at a depth of at least a metre, to avoid acoustic disturbance. Stability Consider adding some weight to the receiver cables just above the receivers. Further points of note: Limit search area : a better position will likely be obtained if the search area is restricted as far as possible in the graphical configuration pane at Baseline -> Antenna configuration . Directivity : the receivers and locators are omnidirectional, that is, signal strength should be good in all directions The figure below indicates a typical loose receiver configuration when the topside unit is upon a boat. The receivers hang from the side of the boat. The origin of the the acoustic frame is in this case a point on the topside unit.","title":"Receivers"},{"location":"underwater-gps/gui/settings/","text":"Settings Locator setup Select the type of locator ( U1 , A1 , or D1 ) which you are using, and which channel you wish to use. Note If using the U1 locator, the channel must match the rotary switch at the back of the U1 (screw the lid completely off to access the switch). Note If using the A1 locator, the depth of the locator must be inputted by means of the UGPS API . Channel overview The frequency bands of the available channels are as follows. Lower frequency typically corresponds to greater range due to less acoustic absorption, though there are other factors involved: if you experience issues with signal quality (low RSSI or high NSD), try a different channel. From (kHz) To (kHz) Channel 31.25 62.5 1 62.5 93.75 2 93.75 125.0 3 125.0 156.25 4 156.25 187.5 5 187.5 218.75 6 218.75 250.0 7 Tip Typically, NSD ( Noise spectral density , displayed in the Diagnostic pane of the GUI) is around -100 dBm (in the units of version 3.3.0 or later of the software; 15 nV/sqrt(Hz) in the units of earlier software versions), or a little higher or lower. If it is much higher than this, it is likely that there is acoustic interference in the chosen channel, and a different channel should be tried. Note in particular that acoustic devices quite commonly operate at frequencies lying in Channel 1. Tip If the NSD values are normal, signal quality is mainly indicated by the RSSI values ( Received signal strength indicator , displayed in the Diagnostic pane of the GUI). As long as the RSSI values are not too far below the NSD values, the signal strength should be at usable levels. The UGPS system uses advanced signal processing techniques and can work even with rather weak signals, but an RSSI of -125 dBm or so (in the units of version 3.3.0 or later of the software; -45 dBnW in the units of earlier software versions) is around the lowest possible for an NSD of roughly -100 dBm. Typically one can expect a decrease in signal strength of around 6 dB for each doubling of distance due to spherical spreading, plus a little more due to additional absorption. Topside setup The default source for the topside position and heading is On-board . Since version 3.3.0 of the software, the heading of the topside unit must be set periodically because only the gyroscope of the built-in IMU is used, not the magnetometer. In the on-board mode for heading you will be prompted to enter the heading manually after startup (using an analogue compass, a mobile phone, etc). For best performance on boats or similar with a moving topside unit, we recommend to use an external input of heading data (e.g. from a GPS compass) as well as global position data. This is done via the UGPS API . An external device will likely be more accurate than the topside unit's built-in GPS receiver and IMU. If the topside unit/antenna is at a globally stationary position (like a jetty) the static configuration of position and heading will give best accuracy of the system. Below you can see how the position and heading is set to static. Clicking on the map button opens a map window to help you input the static position. User preferences Select whether to use metric or imperial units, and/or if you would like a dummy boat to be displayed on the map and receiver configuration pages.","title":"Settings"},{"location":"underwater-gps/gui/settings/#settings","text":"","title":"Settings"},{"location":"underwater-gps/gui/settings/#locator-setup","text":"Select the type of locator ( U1 , A1 , or D1 ) which you are using, and which channel you wish to use. Note If using the U1 locator, the channel must match the rotary switch at the back of the U1 (screw the lid completely off to access the switch). Note If using the A1 locator, the depth of the locator must be inputted by means of the UGPS API .","title":"Locator setup"},{"location":"underwater-gps/gui/settings/#channel-overview","text":"The frequency bands of the available channels are as follows. Lower frequency typically corresponds to greater range due to less acoustic absorption, though there are other factors involved: if you experience issues with signal quality (low RSSI or high NSD), try a different channel. From (kHz) To (kHz) Channel 31.25 62.5 1 62.5 93.75 2 93.75 125.0 3 125.0 156.25 4 156.25 187.5 5 187.5 218.75 6 218.75 250.0 7 Tip Typically, NSD ( Noise spectral density , displayed in the Diagnostic pane of the GUI) is around -100 dBm (in the units of version 3.3.0 or later of the software; 15 nV/sqrt(Hz) in the units of earlier software versions), or a little higher or lower. If it is much higher than this, it is likely that there is acoustic interference in the chosen channel, and a different channel should be tried. Note in particular that acoustic devices quite commonly operate at frequencies lying in Channel 1. Tip If the NSD values are normal, signal quality is mainly indicated by the RSSI values ( Received signal strength indicator , displayed in the Diagnostic pane of the GUI). As long as the RSSI values are not too far below the NSD values, the signal strength should be at usable levels. The UGPS system uses advanced signal processing techniques and can work even with rather weak signals, but an RSSI of -125 dBm or so (in the units of version 3.3.0 or later of the software; -45 dBnW in the units of earlier software versions) is around the lowest possible for an NSD of roughly -100 dBm. Typically one can expect a decrease in signal strength of around 6 dB for each doubling of distance due to spherical spreading, plus a little more due to additional absorption.","title":"Channel overview"},{"location":"underwater-gps/gui/settings/#topside-setup","text":"The default source for the topside position and heading is On-board . Since version 3.3.0 of the software, the heading of the topside unit must be set periodically because only the gyroscope of the built-in IMU is used, not the magnetometer. In the on-board mode for heading you will be prompted to enter the heading manually after startup (using an analogue compass, a mobile phone, etc). For best performance on boats or similar with a moving topside unit, we recommend to use an external input of heading data (e.g. from a GPS compass) as well as global position data. This is done via the UGPS API . An external device will likely be more accurate than the topside unit's built-in GPS receiver and IMU. If the topside unit/antenna is at a globally stationary position (like a jetty) the static configuration of position and heading will give best accuracy of the system. Below you can see how the position and heading is set to static. Clicking on the map button opens a map window to help you input the static position.","title":"Topside setup"},{"location":"underwater-gps/gui/settings/#user-preferences","text":"Select whether to use metric or imperial units, and/or if you would like a dummy boat to be displayed on the map and receiver configuration pages.","title":"User preferences"},{"location":"underwater-gps/gui/warnings/","text":"Warnings Warnings that you might experience will using UGPS. Message Solution No external depth received. Is it being sent correctly? The Underwater GPS is not receiving the depth of the Locator from the ROV. This normally means software on the ROV is not working correctly. Details on how the depth is sent to the system can be found here . No signal from Locator-U1. Have you selected the correct channel? Verify that the Locator-U1 is powered on and that it has GPS lock (See LED signals ). Verify that the same channel is selected on the settings page and the Locator rotary switch. Verify that the Locator and Receivers are in the water Missing GPS lock/position. Please provide me with an unobstructed view of the sky The Underwater GPS needs GPS lock for time sync purposes. Move the Topside to another location where it has better view of the sky. Locator-D1 not detected. Please verify connection. Locator-D1 selected but not detected by the Master-D1. Verify connection. Receiver N not detected. Please verify connection. Receiver N is not detected by the Master-D1. Verify connection. External satellite position is required but not received. External position is selected, but not received via the API . Typically this is an external software not started or not working. External orientation is required but not received. External orientation is selected, but not received via the API . Typically this is an external software not started or not working. IMU is not calibrated: position will not be accurate. Please rotate the kit to calibrate or use external orientation source. See IMU calibration for details on how calibrate. GPS has no position, please provide me with an unobstructed view of the sky. The Underwater GPS needs GPS lock for time sync proposes. Move the Topside to another location where it has better view of the sky.","title":"Warnings"},{"location":"underwater-gps/gui/warnings/#warnings","text":"Warnings that you might experience will using UGPS. Message Solution No external depth received. Is it being sent correctly? The Underwater GPS is not receiving the depth of the Locator from the ROV. This normally means software on the ROV is not working correctly. Details on how the depth is sent to the system can be found here . No signal from Locator-U1. Have you selected the correct channel? Verify that the Locator-U1 is powered on and that it has GPS lock (See LED signals ). Verify that the same channel is selected on the settings page and the Locator rotary switch. Verify that the Locator and Receivers are in the water Missing GPS lock/position. Please provide me with an unobstructed view of the sky The Underwater GPS needs GPS lock for time sync purposes. Move the Topside to another location where it has better view of the sky. Locator-D1 not detected. Please verify connection. Locator-D1 selected but not detected by the Master-D1. Verify connection. Receiver N not detected. Please verify connection. Receiver N is not detected by the Master-D1. Verify connection. External satellite position is required but not received. External position is selected, but not received via the API . Typically this is an external software not started or not working. External orientation is required but not received. External orientation is selected, but not received via the API . Typically this is an external software not started or not working. IMU is not calibrated: position will not be accurate. Please rotate the kit to calibrate or use external orientation source. See IMU calibration for details on how calibrate. GPS has no position, please provide me with an unobstructed view of the sky. The Underwater GPS needs GPS lock for time sync proposes. Move the Topside to another location where it has better view of the sky.","title":"Warnings"},{"location":"underwater-gps/integration/api/","text":"API The Underwater GPS G2 system comes with an easy-to-use software HTTP API. Through the API you can, amongst other things: Read acoustic and global position data Read GPS and IMU raw data Read and set POIs Set configuration parameters See demo.waterlinked.com/swagger for the details of the API. Interaction Any programming language can be used to interact with the API. We have examples in both Python and Go , which currently cover, for instance: Sending of locator depth when using the Locator A1 (see the script externaldepth.py ). Sending in of satellite GPS data (positioning and/or heading) from an external GPS receiver (see the script nmeainput.py or its Go analogue ) Export of tracks to a GPX file (see the script tracklog.py ) Output of the positions calculated by the UGPS G2 system in NMEA format (see the Python script nmeaoutput.py or its Go analogue )","title":"API"},{"location":"underwater-gps/integration/api/#api","text":"The Underwater GPS G2 system comes with an easy-to-use software HTTP API. Through the API you can, amongst other things: Read acoustic and global position data Read GPS and IMU raw data Read and set POIs Set configuration parameters See demo.waterlinked.com/swagger for the details of the API.","title":"API"},{"location":"underwater-gps/integration/api/#interaction","text":"Any programming language can be used to interact with the API. We have examples in both Python and Go , which currently cover, for instance: Sending of locator depth when using the Locator A1 (see the script externaldepth.py ). Sending in of satellite GPS data (positioning and/or heading) from an external GPS receiver (see the script nmeainput.py or its Go analogue ) Export of tracks to a GPX file (see the script tracklog.py ) Output of the positions calculated by the UGPS G2 system in NMEA format (see the Python script nmeaoutput.py or its Go analogue )","title":"Interaction"},{"location":"underwater-gps/integration/bluerov-integration-a1/","text":"Installation of Locator-A1 on BlueROV2 with integration kit This guide describes the hardware modifications to the ROV, FXTI and UGPS Topside in order to integrate the Locator-A1 . To summarize, two main changes are performed: A spare twisted wire pair in the tether is used to connect the Locator-A1 and the UGPS Topside. Secondly, the UGPS Topside is connected directly to the communication between ROV and topside computer. Required parts and tools BlueROV2 Integration Kit from Water Linked. It contains the following parts (purpose in parentheses) Mechanical parts (for physical mounting of Locator-A1) Locator-A1 mounting bracket, printable 3D model rubber pad 2 M4x35 Socket head cap screws 2 M4 Lock Nuts A female-to-female jumper wire, white/Blue (for locator connection in FXTI) A Binder-connector-pigtail-assembly, with Binder 770 Series NNC Miniature Cable Connector , pins 1/2: white/blue, pin 7/8: white/brown (analog connection and Powerline connection in FXTI) Powerline communication (PLC) module LX200V30 (for Powerline communication in UGPS Topside) 30cm Cat5e cable (for Powerline connection in UGPS Topside) 8 m cable with Binder 770 connectors \"deck extension cable\"(for analog connection and Powerline communication between FXTI and UGPS Topside)) Powerline communication (PLC) The term Powerline communication describes the technology with which the FXTI and the BlueROV communicate with each other over the Fanthom-X Tether. It is usually used to transmit data and communication signals, e. g. Ethernet, on existing electrical wiring in buildings, allowing for data transfer and communication without the need for dedicated network cables. Locator-A1 UGPS G2 Topside Your BlueROV2 M10-6.5mm-LC WetLink Penetrator from Blue Robotics WetLink Bulkhead Wrench M10 from Blue Robotics Hex Key Set e.g. from Blue Robotics, especially 2, 2.5 and 3 mm hex key Silicone Grease Isopropyl Alcohol Wipe 7 mm spanner or wrench 4 mm drill bit Cable jacket stripper , a utility knife, or a sharp blade Cutting pliers A soldering iron and solder Heat shrink tube Optional components/tools WetLink Penetrator Assembly Block and a vice to secure it WetLink Penetrator Plug Wrench 14mm and a A 1/4 inch (6.3mm) square drive ratchet or torque wrench Large flat head screwdriver Bottle of threadlocker Hot air gun Modifications to the BlueROV2 The Locator-A1 will use one of the spare cable penetrators in the back of the BlueROV2 and will connect to the spare green and white twisted pair in the tether. The locator is attached with a mounting bracket included in the BlueROV2 Integration Kit. Open the electronics enclosure To open the electronics enclosure, you will need the following parts and tools: 2.5 mm hex key Large flat head screwdriver (optional) To ensure your ROV is completely powered off, please remove the battery completely from the 3\u201d enclosure and place to the side. Unscrew the M3x16 screws that mount the electronics enclosure to the ROV cradle (in the front and in the back). The number of screws depends on the model version of your ROV. Remove the Vent Plug from the Vent Penetrator Bolt on the electronics enclosure. Remove the 4\u2033 tube and forward dome assembly from the rear end cap by sliding it forward. A large flat head screw driver can help to do that. Replace blank penetrator with Locator-A1 penetrator To remove a blank penetrator and install the cable of the Locator-A1 into the end cap, you will need the following parts and tools: Locator-A1 M10-6.5mm-LC WetLink Penetrator from Blue Robotics Silicone Grease Isopropyl Alcohol Wipe WetLink Bulkhead Wrench M10 from Blue Robotics WetLink Penetrator Assembly Block and a vice to secure it (optional) WetLink Penetrator Plug Wrench 14mm and a A 1/4 inch (6.3mm) square drive ratchet or torque wrench (optional) Cable jacket stripper , a utility knife, or a sharp blade Cutting pliers Remove the blank penetrator as pictured from the 4\u201d End Cap with the penetrator bulkhead wrench. Cut the cable of the Locator-A1 to the correct length with cutting pliers considering that about 15 cm of cable are needed inside the enclosure. For the recommended mounting position you need a length of around 70 cm. Double check that this is sufficient for your mounting position. Remove 10 cm of the cable jacket using a cable jacket stripper, a utility knife, or a sharp blade. Cut off everything except the twisted pair of wires using cutting pliers. Follow the Blue Robotics WetLink Penetrator Assembly Guide and install the WetLink penetrator onto the Locator-A1 cable. Wipe the exterior surface of the electronics enclosure end cap clean with an isopropyl alcohol wipe, and make sure it is free of any particles in the areas where the penetrator O-ring will sit. Remove the O-ring from the bag and apply silicone grease to it. Install the O-ring onto the WetLink penetrator. Install the WetLink penetrator with the Locator-A1 cable onto the end cap in the hole you previously removed a blank penetrator from. Tighten to finger tight, then use the bulkhead wrench to tighten it an additional ~1/16 of a turn. If you can\u2019t loosen it with your fingers, it is tight enough. Connect Locator-A1 wires to ROV tether One pair of twisted wires from the Locator-A1 (blue/white) must be connected to a spare twisted pair on the BlueROV2 tether. To solder the wires together you will need: A soldering iron and solder A utility knife, or a sharp blade Heat shrink tube Hot air gun (optional) Note Alternatively to soldering you can use your favorite headers to establish an electrical connection. Remove 5mm wire insulation on both the tether wires and the locator wires with a knife. Put heat shrink tube onto the wires before soldering. Connect the Locator-A1 wires (blue/white) to a spare twisted pair of the tether (recommended: green/white) by soldering. Pull the the heat shrink tube over the solder-connection and shrink it with a hot air gun or alternatively with your soldering iron turned to low. Reassemble BlueROV2 Electronics Enclosure To reassemble your BlueROV2 Electronics Enclosure, you will need the following parts and tools: M3x16 screws that were placed off to the side during disassembly (number depends on your BlueROV version) Silicone Grease 2.5 mm hex key Reinstall 4\u201d Watertight Enclosure onto ROV with the following steps: Apply silicone grease to the two radial O-rings on the O-Ring Flange (4\u201d Series) that is attached to the Electronics Tray. Then slide the Watertight Enclosure (4\u201d Series) with installed Dome End Cap over the electronics tray and the O-Ring Flange (4\u201d Series) while trying to align the clips for the screws in the front and back. Mount the Electronics Enclosure to the frame using the M3x16 screws so that the dome is on the same side as the front center panels (the center panels without the 3 large holes). Install the M3x16 screws through the clips and into the Enclosure Cradle (4\u201d Series). It is easier to install these screws if the clips are not fully tightened until all screws are through the clips and threading into the Enclosure Cradle (4\u201d Series). This allows clips to rotate so you can find the threaded hole in the Enclosure Cradle (4\u201d Series) easily. Mount the Locator-A1 to the BlueROV2 frame To mount the Locator-A1 to the BlueROV2 frame, you will need the following parts and tools: Locator-A1 mounting bracket (included in the BlueROV2 Integration Kit) rubber pad (included in the BlueROV2 Integration Kit) 2 M4x35 Socket head cap screws (included in the BlueROV2 Integration Kit) 2 M4 Lock Nuts (included in the BlueROV2 Integration Kit) 3 mm hex key 7 mm spanner or wrench 4 mm drill bit Route the locator cable to one side of the ROV. The below picture illustrates the recommended mounting position. Your mounting bracket might look differently. Find an appropriate spot to attach the Locator-A1 mounting bracket to the frame of the BlueROV2. Drill out two holes spaced 49.25 mm apart using a 4 mm drill bit. Wrap the locator in the rubber pad before inserting into the mounting bracket. Attach the Locator-A1 to the Locator-A1 mounting bracket, and secure the bracket to the BlueROV2 using the M4x35 Socket head cap screws and lock nuts. Modifications to the UGPS Topside In the following steps you will upgrade your UGPS G2 Topside with Powerline communication (PLC) capabilities to communicate directly with the BlueROV2. In order to do that, you will need the following parts and tools: UGPS G2 Topside Ethernet cable (included in the BlueROV2 Integration Kit) Powerline communication (PLC) module LX200V30 (included in the BlueROV2 Integration Kit) Soldering iron Connect Ethernet cable Locate the ethernet ports on the Interface Electronics board and the Master Electronics board. Connect the included Ethernet cable to the two ports. Install the PLC module In this step the the Powerline communication (PLC) module is installed on the Interface Electronics board. What do the LEDs on the PLC module mean? LED Definition Function 1 Power Lights when the PLC module has power 2 Ethernet Flashes when there is data flow from Master Electronics 3 PLC Lights when a link is established with FXTI or BlueROV2 Locate the socket for the PLC module on the Interface board. Press the PLC module into the socket, making sure that the press-fit standoffs latch into the holes in the Interface Electronics board. Modify Interface Electronics Note This step is only necessary for Underwater GPS G2 bought before June 2021. For units produced after June 2021, this step is not necessary. Warning Skipping this step leaves a regulated 12V power source from the Underwater GPS on the PLC lines (pins 1 (GND) and 2 (12V) on the Locator bulkhead connector). Connecting non-isolated equipment to the PLC lines may damage the Underwater GPS or any external equipment. Note Locator-D1 cannot be used unless the resistors are soldered back on to the Interface Electronics. The Interface Electronics board in the Underwater GPS housing comes with resistors R2 and R3 which put GND on pin 1 and 12V on pin 2 of the bulkhead connector with the label \u201cLocator\u201d. The configuration of the FXTI, BlueROV2 and the Underwater GPS G2 are affected by leaving these resistors on the board, so they must be removed for normal operation. Remove the resistors with a soldering iron. Modifications to the FXTI In this step the FXTI will be modified to firstly connect the analog signal of the Locator-A1 between the ROV tether and the UGPS Topside. Secondly the UGPS Topside is connected to the existing communication wires between the BlueROV and the FXTI electronics (Powerline Ethernet signals). A high level diagram of how this will look is shown below. In order to make these connections, you will need the following parts and tools: Binder-connector-pigtail-assembly (included in the BlueROV2 Integration Kit) A female-to-female jumper wire, white/green (included in the BlueROV2 Integration Kit) 2 mm hex key Unscrew the connector panel from the FXTI with the hex key and remove one of the black plastic plugs from one of the auxiliary ports. Thread the Binder-connector-pigtail-assembly into the open port and secure in place with the included bulkhead nut. Connect the green and white twisted pair of the tether connector to the brown and brown/white pair on the new Binder-connector-pigtail-assembly with the included female-to-female jumper wire. Connect the blue and white twisted pair of the Binder-connector-pigtail-assembly to the FXTI Tether Connection PCB, matching the orientation of the pre-installed blue and white wire connections. Reassemble the FXTI box. Establish a network connection between UGPS Topside, BlueROV2 and topside computer Now that all hardware modifications are done, you will connect UGPS Topside, FXTI/BlueROV2 and topside computer and test the network connection. Power up the BlueROV. Connect the BlueROV with the tether to the FXTI. Connect the FXTI with the USB-cable to the computer. FXTI USB port Your topside computer may have a USB port which permits higher than default (which is 500mA) current. Such ports are typically marked with a lightning or battery symbol. Also USB 3.0 ports (blue plastic) provide higher current. If available, we recommend use of one of these for plugging in the FXTI, as this can improve performance. Set your topside computer to have a static IP address of 192.168.2.1 with subnet mask 255.255.255.0. The BlueROV2 typically has IP address 192.168.2.2, so you probably already have this set up. Make sure your firewall allows QGroundControl to communicate with the network. Look at the Network Setup steps at Blue Robotics if you need more details. Set the IP switch inside the UGPS Topside unit to 192.168.2.94 (the down position). This equips the G2 topside unit with the static IP address 192.168.2.94. Connect the Binder-connector named \"Locator\" at the UGPS Topside with the newly installed Binder-connector at the FXTI using the deck extension cable, which came with the BlueROV integration kit. (Power up the UGPS Topside)[https://waterlinked.github.io/underwater-gps/power-supply/]. It is on when the power button is lit. You should now be able to access both the BlueROV by typing 192.168.2.2 in your browser address line and UGPS Topside by typing 192.168.2.94 . Both have to be turned on. Final steps of integration When you have successfully established a network connection and can access both BlueROV2 and UGPS Topside, you can continue with Final steps of integration independent of Locator .","title":"BlueROV2 & Locator-A1"},{"location":"underwater-gps/integration/bluerov-integration-a1/#installation-of-locator-a1-on-bluerov2-with-integration-kit","text":"This guide describes the hardware modifications to the ROV, FXTI and UGPS Topside in order to integrate the Locator-A1 . To summarize, two main changes are performed: A spare twisted wire pair in the tether is used to connect the Locator-A1 and the UGPS Topside. Secondly, the UGPS Topside is connected directly to the communication between ROV and topside computer.","title":"Installation of Locator-A1 on BlueROV2 with integration kit"},{"location":"underwater-gps/integration/bluerov-integration-a1/#required-parts-and-tools","text":"BlueROV2 Integration Kit from Water Linked. It contains the following parts (purpose in parentheses) Mechanical parts (for physical mounting of Locator-A1) Locator-A1 mounting bracket, printable 3D model rubber pad 2 M4x35 Socket head cap screws 2 M4 Lock Nuts A female-to-female jumper wire, white/Blue (for locator connection in FXTI) A Binder-connector-pigtail-assembly, with Binder 770 Series NNC Miniature Cable Connector , pins 1/2: white/blue, pin 7/8: white/brown (analog connection and Powerline connection in FXTI) Powerline communication (PLC) module LX200V30 (for Powerline communication in UGPS Topside) 30cm Cat5e cable (for Powerline connection in UGPS Topside) 8 m cable with Binder 770 connectors \"deck extension cable\"(for analog connection and Powerline communication between FXTI and UGPS Topside)) Powerline communication (PLC) The term Powerline communication describes the technology with which the FXTI and the BlueROV communicate with each other over the Fanthom-X Tether. It is usually used to transmit data and communication signals, e. g. Ethernet, on existing electrical wiring in buildings, allowing for data transfer and communication without the need for dedicated network cables. Locator-A1 UGPS G2 Topside Your BlueROV2 M10-6.5mm-LC WetLink Penetrator from Blue Robotics WetLink Bulkhead Wrench M10 from Blue Robotics Hex Key Set e.g. from Blue Robotics, especially 2, 2.5 and 3 mm hex key Silicone Grease Isopropyl Alcohol Wipe 7 mm spanner or wrench 4 mm drill bit Cable jacket stripper , a utility knife, or a sharp blade Cutting pliers A soldering iron and solder Heat shrink tube Optional components/tools WetLink Penetrator Assembly Block and a vice to secure it WetLink Penetrator Plug Wrench 14mm and a A 1/4 inch (6.3mm) square drive ratchet or torque wrench Large flat head screwdriver Bottle of threadlocker Hot air gun","title":"Required parts and tools"},{"location":"underwater-gps/integration/bluerov-integration-a1/#modifications-to-the-bluerov2","text":"The Locator-A1 will use one of the spare cable penetrators in the back of the BlueROV2 and will connect to the spare green and white twisted pair in the tether. The locator is attached with a mounting bracket included in the BlueROV2 Integration Kit.","title":"Modifications to the BlueROV2"},{"location":"underwater-gps/integration/bluerov-integration-a1/#open-the-electronics-enclosure","text":"To open the electronics enclosure, you will need the following parts and tools: 2.5 mm hex key Large flat head screwdriver (optional) To ensure your ROV is completely powered off, please remove the battery completely from the 3\u201d enclosure and place to the side. Unscrew the M3x16 screws that mount the electronics enclosure to the ROV cradle (in the front and in the back). The number of screws depends on the model version of your ROV. Remove the Vent Plug from the Vent Penetrator Bolt on the electronics enclosure. Remove the 4\u2033 tube and forward dome assembly from the rear end cap by sliding it forward. A large flat head screw driver can help to do that.","title":"Open the electronics enclosure"},{"location":"underwater-gps/integration/bluerov-integration-a1/#replace-blank-penetrator-with-locator-a1-penetrator","text":"To remove a blank penetrator and install the cable of the Locator-A1 into the end cap, you will need the following parts and tools: Locator-A1 M10-6.5mm-LC WetLink Penetrator from Blue Robotics Silicone Grease Isopropyl Alcohol Wipe WetLink Bulkhead Wrench M10 from Blue Robotics WetLink Penetrator Assembly Block and a vice to secure it (optional) WetLink Penetrator Plug Wrench 14mm and a A 1/4 inch (6.3mm) square drive ratchet or torque wrench (optional) Cable jacket stripper , a utility knife, or a sharp blade Cutting pliers Remove the blank penetrator as pictured from the 4\u201d End Cap with the penetrator bulkhead wrench. Cut the cable of the Locator-A1 to the correct length with cutting pliers considering that about 15 cm of cable are needed inside the enclosure. For the recommended mounting position you need a length of around 70 cm. Double check that this is sufficient for your mounting position. Remove 10 cm of the cable jacket using a cable jacket stripper, a utility knife, or a sharp blade. Cut off everything except the twisted pair of wires using cutting pliers. Follow the Blue Robotics WetLink Penetrator Assembly Guide and install the WetLink penetrator onto the Locator-A1 cable. Wipe the exterior surface of the electronics enclosure end cap clean with an isopropyl alcohol wipe, and make sure it is free of any particles in the areas where the penetrator O-ring will sit. Remove the O-ring from the bag and apply silicone grease to it. Install the O-ring onto the WetLink penetrator. Install the WetLink penetrator with the Locator-A1 cable onto the end cap in the hole you previously removed a blank penetrator from. Tighten to finger tight, then use the bulkhead wrench to tighten it an additional ~1/16 of a turn. If you can\u2019t loosen it with your fingers, it is tight enough.","title":"Replace blank penetrator with Locator-A1 penetrator"},{"location":"underwater-gps/integration/bluerov-integration-a1/#connect-locator-a1-wires-to-rov-tether","text":"One pair of twisted wires from the Locator-A1 (blue/white) must be connected to a spare twisted pair on the BlueROV2 tether. To solder the wires together you will need: A soldering iron and solder A utility knife, or a sharp blade Heat shrink tube Hot air gun (optional) Note Alternatively to soldering you can use your favorite headers to establish an electrical connection. Remove 5mm wire insulation on both the tether wires and the locator wires with a knife. Put heat shrink tube onto the wires before soldering. Connect the Locator-A1 wires (blue/white) to a spare twisted pair of the tether (recommended: green/white) by soldering. Pull the the heat shrink tube over the solder-connection and shrink it with a hot air gun or alternatively with your soldering iron turned to low.","title":"Connect Locator-A1 wires to ROV tether"},{"location":"underwater-gps/integration/bluerov-integration-a1/#reassemble-bluerov2-electronics-enclosure","text":"To reassemble your BlueROV2 Electronics Enclosure, you will need the following parts and tools: M3x16 screws that were placed off to the side during disassembly (number depends on your BlueROV version) Silicone Grease 2.5 mm hex key Reinstall 4\u201d Watertight Enclosure onto ROV with the following steps: Apply silicone grease to the two radial O-rings on the O-Ring Flange (4\u201d Series) that is attached to the Electronics Tray. Then slide the Watertight Enclosure (4\u201d Series) with installed Dome End Cap over the electronics tray and the O-Ring Flange (4\u201d Series) while trying to align the clips for the screws in the front and back. Mount the Electronics Enclosure to the frame using the M3x16 screws so that the dome is on the same side as the front center panels (the center panels without the 3 large holes). Install the M3x16 screws through the clips and into the Enclosure Cradle (4\u201d Series). It is easier to install these screws if the clips are not fully tightened until all screws are through the clips and threading into the Enclosure Cradle (4\u201d Series). This allows clips to rotate so you can find the threaded hole in the Enclosure Cradle (4\u201d Series) easily.","title":"Reassemble BlueROV2 Electronics Enclosure"},{"location":"underwater-gps/integration/bluerov-integration-a1/#mount-the-locator-a1-to-the-bluerov2-frame","text":"To mount the Locator-A1 to the BlueROV2 frame, you will need the following parts and tools: Locator-A1 mounting bracket (included in the BlueROV2 Integration Kit) rubber pad (included in the BlueROV2 Integration Kit) 2 M4x35 Socket head cap screws (included in the BlueROV2 Integration Kit) 2 M4 Lock Nuts (included in the BlueROV2 Integration Kit) 3 mm hex key 7 mm spanner or wrench 4 mm drill bit Route the locator cable to one side of the ROV. The below picture illustrates the recommended mounting position. Your mounting bracket might look differently. Find an appropriate spot to attach the Locator-A1 mounting bracket to the frame of the BlueROV2. Drill out two holes spaced 49.25 mm apart using a 4 mm drill bit. Wrap the locator in the rubber pad before inserting into the mounting bracket. Attach the Locator-A1 to the Locator-A1 mounting bracket, and secure the bracket to the BlueROV2 using the M4x35 Socket head cap screws and lock nuts.","title":"Mount the Locator-A1 to the BlueROV2 frame"},{"location":"underwater-gps/integration/bluerov-integration-a1/#modifications-to-the-ugps-topside","text":"In the following steps you will upgrade your UGPS G2 Topside with Powerline communication (PLC) capabilities to communicate directly with the BlueROV2. In order to do that, you will need the following parts and tools: UGPS G2 Topside Ethernet cable (included in the BlueROV2 Integration Kit) Powerline communication (PLC) module LX200V30 (included in the BlueROV2 Integration Kit) Soldering iron","title":"Modifications to the UGPS Topside"},{"location":"underwater-gps/integration/bluerov-integration-a1/#connect-ethernet-cable","text":"Locate the ethernet ports on the Interface Electronics board and the Master Electronics board. Connect the included Ethernet cable to the two ports.","title":"Connect Ethernet cable"},{"location":"underwater-gps/integration/bluerov-integration-a1/#install-the-plc-module","text":"In this step the the Powerline communication (PLC) module is installed on the Interface Electronics board. What do the LEDs on the PLC module mean? LED Definition Function 1 Power Lights when the PLC module has power 2 Ethernet Flashes when there is data flow from Master Electronics 3 PLC Lights when a link is established with FXTI or BlueROV2 Locate the socket for the PLC module on the Interface board. Press the PLC module into the socket, making sure that the press-fit standoffs latch into the holes in the Interface Electronics board.","title":"Install the PLC module"},{"location":"underwater-gps/integration/bluerov-integration-a1/#modify-interface-electronics","text":"Note This step is only necessary for Underwater GPS G2 bought before June 2021. For units produced after June 2021, this step is not necessary. Warning Skipping this step leaves a regulated 12V power source from the Underwater GPS on the PLC lines (pins 1 (GND) and 2 (12V) on the Locator bulkhead connector). Connecting non-isolated equipment to the PLC lines may damage the Underwater GPS or any external equipment. Note Locator-D1 cannot be used unless the resistors are soldered back on to the Interface Electronics. The Interface Electronics board in the Underwater GPS housing comes with resistors R2 and R3 which put GND on pin 1 and 12V on pin 2 of the bulkhead connector with the label \u201cLocator\u201d. The configuration of the FXTI, BlueROV2 and the Underwater GPS G2 are affected by leaving these resistors on the board, so they must be removed for normal operation. Remove the resistors with a soldering iron.","title":"Modify Interface Electronics"},{"location":"underwater-gps/integration/bluerov-integration-a1/#modifications-to-the-fxti","text":"In this step the FXTI will be modified to firstly connect the analog signal of the Locator-A1 between the ROV tether and the UGPS Topside. Secondly the UGPS Topside is connected to the existing communication wires between the BlueROV and the FXTI electronics (Powerline Ethernet signals). A high level diagram of how this will look is shown below. In order to make these connections, you will need the following parts and tools: Binder-connector-pigtail-assembly (included in the BlueROV2 Integration Kit) A female-to-female jumper wire, white/green (included in the BlueROV2 Integration Kit) 2 mm hex key Unscrew the connector panel from the FXTI with the hex key and remove one of the black plastic plugs from one of the auxiliary ports. Thread the Binder-connector-pigtail-assembly into the open port and secure in place with the included bulkhead nut. Connect the green and white twisted pair of the tether connector to the brown and brown/white pair on the new Binder-connector-pigtail-assembly with the included female-to-female jumper wire. Connect the blue and white twisted pair of the Binder-connector-pigtail-assembly to the FXTI Tether Connection PCB, matching the orientation of the pre-installed blue and white wire connections. Reassemble the FXTI box.","title":"Modifications to the FXTI"},{"location":"underwater-gps/integration/bluerov-integration-a1/#establish-a-network-connection-between-ugps-topside-bluerov2-and-topside-computer","text":"Now that all hardware modifications are done, you will connect UGPS Topside, FXTI/BlueROV2 and topside computer and test the network connection. Power up the BlueROV. Connect the BlueROV with the tether to the FXTI. Connect the FXTI with the USB-cable to the computer. FXTI USB port Your topside computer may have a USB port which permits higher than default (which is 500mA) current. Such ports are typically marked with a lightning or battery symbol. Also USB 3.0 ports (blue plastic) provide higher current. If available, we recommend use of one of these for plugging in the FXTI, as this can improve performance. Set your topside computer to have a static IP address of 192.168.2.1 with subnet mask 255.255.255.0. The BlueROV2 typically has IP address 192.168.2.2, so you probably already have this set up. Make sure your firewall allows QGroundControl to communicate with the network. Look at the Network Setup steps at Blue Robotics if you need more details. Set the IP switch inside the UGPS Topside unit to 192.168.2.94 (the down position). This equips the G2 topside unit with the static IP address 192.168.2.94. Connect the Binder-connector named \"Locator\" at the UGPS Topside with the newly installed Binder-connector at the FXTI using the deck extension cable, which came with the BlueROV integration kit. (Power up the UGPS Topside)[https://waterlinked.github.io/underwater-gps/power-supply/]. It is on when the power button is lit. You should now be able to access both the BlueROV by typing 192.168.2.2 in your browser address line and UGPS Topside by typing 192.168.2.94 . Both have to be turned on.","title":"Establish a network connection between UGPS Topside, BlueROV2 and topside computer"},{"location":"underwater-gps/integration/bluerov-integration-a1/#final-steps-of-integration","text":"When you have successfully established a network connection and can access both BlueROV2 and UGPS Topside, you can continue with Final steps of integration independent of Locator .","title":"Final steps of integration"},{"location":"underwater-gps/integration/bluerov-integration-u1/","text":"Installation of Locator-U1 on BlueROV2 This guide contains instructions for installation of the Locator-U1 to a BlueROV2. The first part describes the mechanical installation and the second part describes how to establish a network bridge between UGPS Topside and FXTI/BlueROV2. Mount the Locator-U1 to the BlueROV2 frame Attach the Locator-U1 to the BlueROV2 for example by using zip ties. Make sure the Locator-U1 has free line-of-sight towards the antenna/receivers near the surface. See the general Locator-U instructions for daily operation (charging, powering on, etc.). Establish a network connection between UGPS Topside, BlueROV2 and topside computer In this guide it is described how to establish a network connection between UGPS Topside, FXTI/BlueROV2 and topside computer without hardware modifications to the UGPS Topside. This is opposed to the method used with the BlueROV integration kit for Locator-A1. To put it short, the connection between the three devices is established with a network bridge and a static IP address of 192.168.2.1 (subnet mask 255.255.255.0) for your computer. Set the IP switch inside the UGPS G2 topside unit to 192.168.2.94 (the down position). This equips the G2 topside unit with the static IP address 192.168.2.94. Connect power to the UGPS Topside and switch on the power, resulting in the power switch lighting up. Connect an Ethernet cable to the UGPS Topside. Connect the BlueROV with the tether to the FXTI and plug the USB-cable into the FXTI. Power up the BlueROV. Establish a network bridge on your computer. This depends on your operating system: Windows To create a network bridge between the FXTI/BlueROV2 and the UGPS Topside in Microsoft Windows, open the \"Control Panel\" by searching for it in the start menu. Open \"Network and Internet\". Open \"Network and Sharing Center\". Click \"Change adapter settings\" in the sidebar. The \"Network Connections\" window (see below) shows all network adapters connected to your computer. The number and name of adapters shown depends on your computer hardware. Now identify the adapter for the FXTI by connecting its USB-cable to the computer. Unplug and replug the cable if you plugged it in before. A new adapter should show up, which is called \"Realtek USB...\" in the gray subtitle. Note its name. In the example there are two adapters in the picture below starting with \"Realtek USB\", one additional by a docking station. So you can identify the correct adapter best by comparing which one is new, it is \"Ethernet 4\". Do the same with the UGPS Topside, connect its ethernet cable to the computer. In the shown example the red cross for adapter \"Ethernet\" vanishes, indicating that a device is connected to the network adapter. So in the shown example \"Ethernet\" is the UGPS Topside and \"Ethernet 4\" is the FXTI. Create a network bridge between the two adapters identified in the previous step by selecting both with the help of the \"Ctrl\"-key. Then right click on one of them and select \"Bridge Connections\". A new adapter called \"Network Bridge\" should appear. Right-click on it and select \"Properties\". In the window \"Network Bridge Properties\" scroll through the lower list and select \"Internet Protocol Version 4 (TCP/IPv4)\". Click on the button \"Properties\". In the window \"Internet Protocol Version 4 (TCP/IPv4)\" select \"Use the following IP address\" and type in the IP address \"192.168.2.1\" and Subnet mask \"255.255.255.0\". Click OK to close the window and also close the previous window \"Network Bridge Properties\" with OK. You should now be able to access both the BlueROV by typing 192.168.2.2 in your browser address line and UGPS Topside by typing 192.168.2.94. Both have to be turned on. If you do not need the network bridge anymore, you can delete it by navigating to \"Change Adapter Settings\" as described above, right-clicking on the Network Bridge and then clicking \"Disable\". Linux On Linux the instructions at the Arch Linux wiki, in the section 'With iproute2', should work. Note Unfortunately these instructions do not work for Ubuntu. MacOS On a Mac, the instructions at the Arch Linux wiki should work if the package iproute2mac is installed, providing an analogue of the ip package. Alternatively, essentially the same procedure can be followed using ifconfig , which should be available on a Mac, instead of ip . Final steps of integration When you have successfully established a network bridge and can access both BlueROV2 and UGPS Topside, you can continue with Final steps of integration independent of Locator .","title":"BlueROV2 & Locator-U1"},{"location":"underwater-gps/integration/bluerov-integration-u1/#installation-of-locator-u1-on-bluerov2","text":"This guide contains instructions for installation of the Locator-U1 to a BlueROV2. The first part describes the mechanical installation and the second part describes how to establish a network bridge between UGPS Topside and FXTI/BlueROV2.","title":"Installation of Locator-U1 on BlueROV2"},{"location":"underwater-gps/integration/bluerov-integration-u1/#mount-the-locator-u1-to-the-bluerov2-frame","text":"Attach the Locator-U1 to the BlueROV2 for example by using zip ties. Make sure the Locator-U1 has free line-of-sight towards the antenna/receivers near the surface. See the general Locator-U instructions for daily operation (charging, powering on, etc.).","title":"Mount the Locator-U1 to the BlueROV2 frame"},{"location":"underwater-gps/integration/bluerov-integration-u1/#establish-a-network-connection-between-ugps-topside-bluerov2-and-topside-computer","text":"In this guide it is described how to establish a network connection between UGPS Topside, FXTI/BlueROV2 and topside computer without hardware modifications to the UGPS Topside. This is opposed to the method used with the BlueROV integration kit for Locator-A1. To put it short, the connection between the three devices is established with a network bridge and a static IP address of 192.168.2.1 (subnet mask 255.255.255.0) for your computer. Set the IP switch inside the UGPS G2 topside unit to 192.168.2.94 (the down position). This equips the G2 topside unit with the static IP address 192.168.2.94. Connect power to the UGPS Topside and switch on the power, resulting in the power switch lighting up. Connect an Ethernet cable to the UGPS Topside. Connect the BlueROV with the tether to the FXTI and plug the USB-cable into the FXTI. Power up the BlueROV. Establish a network bridge on your computer. This depends on your operating system: Windows To create a network bridge between the FXTI/BlueROV2 and the UGPS Topside in Microsoft Windows, open the \"Control Panel\" by searching for it in the start menu. Open \"Network and Internet\". Open \"Network and Sharing Center\". Click \"Change adapter settings\" in the sidebar. The \"Network Connections\" window (see below) shows all network adapters connected to your computer. The number and name of adapters shown depends on your computer hardware. Now identify the adapter for the FXTI by connecting its USB-cable to the computer. Unplug and replug the cable if you plugged it in before. A new adapter should show up, which is called \"Realtek USB...\" in the gray subtitle. Note its name. In the example there are two adapters in the picture below starting with \"Realtek USB\", one additional by a docking station. So you can identify the correct adapter best by comparing which one is new, it is \"Ethernet 4\". Do the same with the UGPS Topside, connect its ethernet cable to the computer. In the shown example the red cross for adapter \"Ethernet\" vanishes, indicating that a device is connected to the network adapter. So in the shown example \"Ethernet\" is the UGPS Topside and \"Ethernet 4\" is the FXTI. Create a network bridge between the two adapters identified in the previous step by selecting both with the help of the \"Ctrl\"-key. Then right click on one of them and select \"Bridge Connections\". A new adapter called \"Network Bridge\" should appear. Right-click on it and select \"Properties\". In the window \"Network Bridge Properties\" scroll through the lower list and select \"Internet Protocol Version 4 (TCP/IPv4)\". Click on the button \"Properties\". In the window \"Internet Protocol Version 4 (TCP/IPv4)\" select \"Use the following IP address\" and type in the IP address \"192.168.2.1\" and Subnet mask \"255.255.255.0\". Click OK to close the window and also close the previous window \"Network Bridge Properties\" with OK. You should now be able to access both the BlueROV by typing 192.168.2.2 in your browser address line and UGPS Topside by typing 192.168.2.94. Both have to be turned on. If you do not need the network bridge anymore, you can delete it by navigating to \"Change Adapter Settings\" as described above, right-clicking on the Network Bridge and then clicking \"Disable\". Linux On Linux the instructions at the Arch Linux wiki, in the section 'With iproute2', should work. Note Unfortunately these instructions do not work for Ubuntu. MacOS On a Mac, the instructions at the Arch Linux wiki should work if the package iproute2mac is installed, providing an analogue of the ip package. Alternatively, essentially the same procedure can be followed using ifconfig , which should be available on a Mac, instead of ip .","title":"Establish a network connection between UGPS Topside, BlueROV2 and topside computer"},{"location":"underwater-gps/integration/bluerov-integration-u1/#final-steps-of-integration","text":"When you have successfully established a network bridge and can access both BlueROV2 and UGPS Topside, you can continue with Final steps of integration independent of Locator .","title":"Final steps of integration"},{"location":"underwater-gps/integration/bluerov-integration/","text":"Overview BlueROV2 integration The Water Linked Underwater GPS G2 (from now UGPS) system can be integrated with a BlueROV2 from Blue Robotics in different ways, depending upon the choice of locator. Most common integration methods We recommend you to use the Locator-A1 together with the BlueROV2 Integration Kit when integrating the UGPS system with the BlueROV2. The integration steps are described in BlueROV2 Integration Locator-A1 . Hardware modification must be carried out on the ROV, FXTI and UGPS Topside which serve two purposes: Firstly, a spare twisted wire pair in the tether is used to connect the Locator-A1 to the UGPS Topside. Secondly, the UGPS Topside is modified to connect directly to the communication between ROV and topside computer. The advantage of integrating using this method is that there is no additional topside computer configuration required, which can be challenging with different operating systems (i.e. Linux, iOS). If you wish to avoid carrying out hardware changes to the ROV, as they are required to integrate the A1-Locator, then we recommend you to use the Locator-U1 . The locator can simply be attached to the BlueROV2 in any convenient way. However some configuration steps in the topside computer are required to establish a network bridge, so the position calculated by the UGPS Topside is available in QGroundControl. These steps are described in BlueROV2 Integration Locator-U1 . Be aware that setting up a network bridge in operating systems other than Windows can be challenging. Alternative integration methods If you wish to use a Locator-A1 , however you wish to avoid purchasing the full integration kit then this can be done. The Locator-A1 must be installed on the ROV and connected to the G2 Topside and then it is necessary to set-up a network bridge. The steps in these sections are relevant Modifications to the BlueROV2 Modifications to the FXTI with the deviation that the blue/white twisted pair between Tether Connection PCB and Binder-connector-pigtail-assembly does not need to be connected. Establish a network connection with a network bridge Final steps If you wish to use the Locator-U1 , however you wish to avoid the complication in setting up a network bridge, it is possible to integrate by using the BlueROV2 Integration Kit . The steps in these sections are relevant Mount the Locator-U1 to the BlueROV2 frame Modifications to the UGPS Topside Modifications to the FXTI with the deviation that the green/white twisted pair between tether and Binder-connector-pigtail-assembly does not need to be connected. Establish a network connection with powerline communication Final steps If using a Locator-D1 , use the D1's cable and attach the D1 locator to the BlueROV2 in any convenient way. No further hardware integration is then required. As with the Locator-U1, Establish a network connection with a network bridge and follow the final steps Final steps of integration independent of Locator If you have successfully installed a Locator with one of the above linked guides, these are the final configuration steps to be performed. BlueROV Software Update and UGPS extension Your BlueROV2 runs BlueOS This section is for the R4 version of the BlueROV2 that uses the Navigator Flight Controller or ROVs that have been upgraded to BlueOS software. Info If you have an older R1, R2, or R3 version of the BlueROV2 that uses a Pixhawk autopilot and you want to upgrade to using BlueOS, you can either carry out a software upgrade only (described here) or upgrade the hardware from Pixhawk to Navigator flight controller and the software (described here) . The Water Linked UGPS system requires an extension in BlueOS to be able to communicate with the autopilot (Pixhawk or Navigator flight controller). BlueOS has to be updated to BlueOS 1.1.0 or newer to assure that extensions are supported sufficiently. Follow the Update Software section of the BlueROV Software Setup guide To enable the UGPS extension navigate to \"Extensions\", that should show up in the side bar after the above described BlueOS update. Click on the \"Water Linked UGPS\" extension. In the pop-up make sure the latest version (> 1.0.4) is selected and click \"Install\". The extension should show up in the \"Installed\" tab. Your BlueROV2 runs Ardusub Companion This section is for older R1, R2, or R3 versions of the BlueROV2 that use a Pixhawk autopilot and Companion software. To work properly, the Water Linked UGPS system requires ArduSub Companion image version 0.0.21 or newer and the most recent stable release of QGroundControl for your operating system. If your Companion image is out of date, please follow the BlueROV2 Software Update procedures . Note No special extension for the UGPS system is necessary in Companion OS. It is natively supported. Checking UGPS to autopilot connection on land If you open QGroundControl you should be able to establish a connection to the ROV as before UGPS integration. Furthermore you should be able to see messages of type GPS_INPUT in the MAVLink Inspector (click on Q-logo, then Analyze Tools, then MAVLink Inspector in sidebar). This is the MAVLink message that is provided by the UGPS BlueROV Extension to the autopilot (Pixhawk or Navigator flight controller). For detailed information about the extension see the BlueOS Extension for UGPS GitHub page . Daily operation This section will help you if a UGPS system was already integrated with the BlueROV2 and you want to use and not also install it. Follow the instructions of the UGPS Quickstart-Guide from the Water Linked Documentation for antenna or loose receivers deployment. Connect BlueROV2, FXTI, topside computer and UGPS Topside and assure the network connection is working: For the Locator-A1, follow this section For the Locator-U1, follow this section . In addition, note the channel setting in the Locator-U1 and close the lid to power it up. Follow the steps of the Quickstart-Guide from the Water Linked Documentation for: Selecting the locator in the GUI Configuring antenna/receiver placement and search range. Setting of heading. Start QGroundControl and verify the connection to the BlueROV2. Even if the ROV can not have a location fix above water it should now receive data from the UGPS system. See Checking UGPS to autopilot connection on land Dive the BlueROV2 so the Locator is submerged a few centimeters below the surface. If everything is operating correctly, you should now find a ROV position on the map in QGroundControl. The ROV position is indicated by a BlueROV2 image. The position of the surface vessel or Water Linked UGPS Topside housing is indicated by a red arrow or Q-symbol depending of QGroundControl version. The small \u2018H\u2019 icon indicates the \u2018home position\u2019, the location of the ROV\u2019s first GPS lock. UGPS Topside position The UGPS topside position is not shown reliably on all systems. It is sent as NMEA to UDP port 14401, so check your configuration in QGroundControl. Troubleshooting 'No External Depth' error in UGPS Topside GUI, or QGroundControl connection issues (for Ardusub Companion) This almost certainly means that the network between the UGPS G2 topside and the BlueROV2 has not been successfully established. First carry out the following steps: Ensure you are using the latest versions of ArduSub Companion and QGroundControl: Update Software In the Companion Web Interface, go to the MAVProxy page: http://192.168.2.2:2770/mavproxy Click on the \u201cRestore Default Options\u201d button. Power cycle the BlueROV2. Check the PLC LED (3) on the PLC module (see box \"What do the LEDs on the PLC module mean?\") If the issue persists, if you are using the FXTI approach to the networking, you may wish to try the network bridge approach, as the FTXI sometimes fails to handle the connections satisfactorily. In addition, double-check that you did not skip the Modifications to the FXTI . If none of this solves the problem, you are very welcome to contact us , and we will be happy to support you. Connection to BlueROV2 lost when connecting Underwater GPS to FXTI The current draw by the FXTI can exceed 500 mA when connecting the Underwater GPS to the PLC network. This can then cause the FXTI to become unstable if it's connected to a standard USB 2.0 port on the computer since USB 2.0 allows for a maximum of 500 mA current draw. There are two known solutions: Connect the USB cable of the FXTI to a USB 3.0/3.1 compatible USB-A port. USB 3.0/3.1 allows for a maximum of 900 mA current draw. A USB 3.0/3.1 compatible USB-A port should be recognized by its blue plastic parts. Add a separate power source to the Fathom-X inside the FXTI. The Fathom-X board has screw terminals marked BATT which can attach to a 7-28V DC power source. Water Linked software updates Keep the Water Linked software up to date . The GUI should notify when an update is available, but the current version can also be checked at 192.168.2.94/#/about .","title":"Overview"},{"location":"underwater-gps/integration/bluerov-integration/#overview-bluerov2-integration","text":"The Water Linked Underwater GPS G2 (from now UGPS) system can be integrated with a BlueROV2 from Blue Robotics in different ways, depending upon the choice of locator.","title":"Overview BlueROV2 integration"},{"location":"underwater-gps/integration/bluerov-integration/#most-common-integration-methods","text":"We recommend you to use the Locator-A1 together with the BlueROV2 Integration Kit when integrating the UGPS system with the BlueROV2. The integration steps are described in BlueROV2 Integration Locator-A1 . Hardware modification must be carried out on the ROV, FXTI and UGPS Topside which serve two purposes: Firstly, a spare twisted wire pair in the tether is used to connect the Locator-A1 to the UGPS Topside. Secondly, the UGPS Topside is modified to connect directly to the communication between ROV and topside computer. The advantage of integrating using this method is that there is no additional topside computer configuration required, which can be challenging with different operating systems (i.e. Linux, iOS). If you wish to avoid carrying out hardware changes to the ROV, as they are required to integrate the A1-Locator, then we recommend you to use the Locator-U1 . The locator can simply be attached to the BlueROV2 in any convenient way. However some configuration steps in the topside computer are required to establish a network bridge, so the position calculated by the UGPS Topside is available in QGroundControl. These steps are described in BlueROV2 Integration Locator-U1 . Be aware that setting up a network bridge in operating systems other than Windows can be challenging.","title":"Most common integration methods"},{"location":"underwater-gps/integration/bluerov-integration/#alternative-integration-methods","text":"If you wish to use a Locator-A1 , however you wish to avoid purchasing the full integration kit then this can be done. The Locator-A1 must be installed on the ROV and connected to the G2 Topside and then it is necessary to set-up a network bridge. The steps in these sections are relevant Modifications to the BlueROV2 Modifications to the FXTI with the deviation that the blue/white twisted pair between Tether Connection PCB and Binder-connector-pigtail-assembly does not need to be connected. Establish a network connection with a network bridge Final steps If you wish to use the Locator-U1 , however you wish to avoid the complication in setting up a network bridge, it is possible to integrate by using the BlueROV2 Integration Kit . The steps in these sections are relevant Mount the Locator-U1 to the BlueROV2 frame Modifications to the UGPS Topside Modifications to the FXTI with the deviation that the green/white twisted pair between tether and Binder-connector-pigtail-assembly does not need to be connected. Establish a network connection with powerline communication Final steps If using a Locator-D1 , use the D1's cable and attach the D1 locator to the BlueROV2 in any convenient way. No further hardware integration is then required. As with the Locator-U1, Establish a network connection with a network bridge and follow the final steps","title":"Alternative integration methods"},{"location":"underwater-gps/integration/bluerov-integration/#final-steps-of-integration-independent-of-locator","text":"If you have successfully installed a Locator with one of the above linked guides, these are the final configuration steps to be performed.","title":"Final steps of integration independent of Locator"},{"location":"underwater-gps/integration/bluerov-integration/#bluerov-software-update-and-ugps-extension","text":"Your BlueROV2 runs BlueOS This section is for the R4 version of the BlueROV2 that uses the Navigator Flight Controller or ROVs that have been upgraded to BlueOS software. Info If you have an older R1, R2, or R3 version of the BlueROV2 that uses a Pixhawk autopilot and you want to upgrade to using BlueOS, you can either carry out a software upgrade only (described here) or upgrade the hardware from Pixhawk to Navigator flight controller and the software (described here) . The Water Linked UGPS system requires an extension in BlueOS to be able to communicate with the autopilot (Pixhawk or Navigator flight controller). BlueOS has to be updated to BlueOS 1.1.0 or newer to assure that extensions are supported sufficiently. Follow the Update Software section of the BlueROV Software Setup guide To enable the UGPS extension navigate to \"Extensions\", that should show up in the side bar after the above described BlueOS update. Click on the \"Water Linked UGPS\" extension. In the pop-up make sure the latest version (> 1.0.4) is selected and click \"Install\". The extension should show up in the \"Installed\" tab. Your BlueROV2 runs Ardusub Companion This section is for older R1, R2, or R3 versions of the BlueROV2 that use a Pixhawk autopilot and Companion software. To work properly, the Water Linked UGPS system requires ArduSub Companion image version 0.0.21 or newer and the most recent stable release of QGroundControl for your operating system. If your Companion image is out of date, please follow the BlueROV2 Software Update procedures . Note No special extension for the UGPS system is necessary in Companion OS. It is natively supported.","title":"BlueROV Software Update and UGPS extension"},{"location":"underwater-gps/integration/bluerov-integration/#checking-ugps-to-autopilot-connection-on-land","text":"If you open QGroundControl you should be able to establish a connection to the ROV as before UGPS integration. Furthermore you should be able to see messages of type GPS_INPUT in the MAVLink Inspector (click on Q-logo, then Analyze Tools, then MAVLink Inspector in sidebar). This is the MAVLink message that is provided by the UGPS BlueROV Extension to the autopilot (Pixhawk or Navigator flight controller). For detailed information about the extension see the BlueOS Extension for UGPS GitHub page .","title":"Checking UGPS to autopilot connection on land"},{"location":"underwater-gps/integration/bluerov-integration/#daily-operation","text":"This section will help you if a UGPS system was already integrated with the BlueROV2 and you want to use and not also install it. Follow the instructions of the UGPS Quickstart-Guide from the Water Linked Documentation for antenna or loose receivers deployment. Connect BlueROV2, FXTI, topside computer and UGPS Topside and assure the network connection is working: For the Locator-A1, follow this section For the Locator-U1, follow this section . In addition, note the channel setting in the Locator-U1 and close the lid to power it up. Follow the steps of the Quickstart-Guide from the Water Linked Documentation for: Selecting the locator in the GUI Configuring antenna/receiver placement and search range. Setting of heading. Start QGroundControl and verify the connection to the BlueROV2. Even if the ROV can not have a location fix above water it should now receive data from the UGPS system. See Checking UGPS to autopilot connection on land Dive the BlueROV2 so the Locator is submerged a few centimeters below the surface. If everything is operating correctly, you should now find a ROV position on the map in QGroundControl. The ROV position is indicated by a BlueROV2 image. The position of the surface vessel or Water Linked UGPS Topside housing is indicated by a red arrow or Q-symbol depending of QGroundControl version. The small \u2018H\u2019 icon indicates the \u2018home position\u2019, the location of the ROV\u2019s first GPS lock. UGPS Topside position The UGPS topside position is not shown reliably on all systems. It is sent as NMEA to UDP port 14401, so check your configuration in QGroundControl.","title":"Daily operation"},{"location":"underwater-gps/integration/bluerov-integration/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"underwater-gps/integration/bluerov-integration/#no-external-depth-error-in-ugps-topside-gui-or-qgroundcontrol-connection-issues-for-ardusub-companion","text":"This almost certainly means that the network between the UGPS G2 topside and the BlueROV2 has not been successfully established. First carry out the following steps: Ensure you are using the latest versions of ArduSub Companion and QGroundControl: Update Software In the Companion Web Interface, go to the MAVProxy page: http://192.168.2.2:2770/mavproxy Click on the \u201cRestore Default Options\u201d button. Power cycle the BlueROV2. Check the PLC LED (3) on the PLC module (see box \"What do the LEDs on the PLC module mean?\") If the issue persists, if you are using the FXTI approach to the networking, you may wish to try the network bridge approach, as the FTXI sometimes fails to handle the connections satisfactorily. In addition, double-check that you did not skip the Modifications to the FXTI . If none of this solves the problem, you are very welcome to contact us , and we will be happy to support you.","title":"'No External Depth' error in UGPS Topside GUI, or QGroundControl connection issues (for Ardusub Companion)"},{"location":"underwater-gps/integration/bluerov-integration/#connection-to-bluerov2-lost-when-connecting-underwater-gps-to-fxti","text":"The current draw by the FXTI can exceed 500 mA when connecting the Underwater GPS to the PLC network. This can then cause the FXTI to become unstable if it's connected to a standard USB 2.0 port on the computer since USB 2.0 allows for a maximum of 500 mA current draw. There are two known solutions: Connect the USB cable of the FXTI to a USB 3.0/3.1 compatible USB-A port. USB 3.0/3.1 allows for a maximum of 900 mA current draw. A USB 3.0/3.1 compatible USB-A port should be recognized by its blue plastic parts. Add a separate power source to the Fathom-X inside the FXTI. The Fathom-X board has screw terminals marked BATT which can attach to a 7-28V DC power source.","title":"Connection to BlueROV2 lost when connecting Underwater GPS to FXTI"},{"location":"underwater-gps/integration/bluerov-integration/#water-linked-software-updates","text":"Keep the Water Linked software up to date . The GUI should notify when an update is available, but the current version can also be checked at 192.168.2.94/#/about .","title":"Water Linked software updates"},{"location":"underwater-gps/locators/locator-a1/","text":"Locator-A1 Buy Locator-A1 here! Description The Locator-A1 has the smallest physical footprint in our series of locators. It can be integrated into even the most compact ROVs. The Locator-A1 does not carry its own depth sensor, so the UGPS G2 system requires that the depth be provided from your underwater vehicle (ROV, etc.) This can achieved by means of the UGPS API . Wiring interface The tables below shows the pinning of the A1 interface connectors. Dimensions Datasheet Datasheet","title":"Locator-A1"},{"location":"underwater-gps/locators/locator-a1/#locator-a1","text":"Buy Locator-A1 here!","title":"Locator-A1"},{"location":"underwater-gps/locators/locator-a1/#description","text":"The Locator-A1 has the smallest physical footprint in our series of locators. It can be integrated into even the most compact ROVs. The Locator-A1 does not carry its own depth sensor, so the UGPS G2 system requires that the depth be provided from your underwater vehicle (ROV, etc.) This can achieved by means of the UGPS API .","title":"Description"},{"location":"underwater-gps/locators/locator-a1/#wiring-interface","text":"The tables below shows the pinning of the A1 interface connectors.","title":"Wiring interface"},{"location":"underwater-gps/locators/locator-a1/#dimensions","text":"","title":"Dimensions"},{"location":"underwater-gps/locators/locator-a1/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"underwater-gps/locators/locator-d1/","text":"Locator-D1 Buy Locator-D1 here! Description The Locator-D1 carries its own depth sensor and can therefore operate fully stand-alone and independent of the device you want to position. Warning The Locator-D1 can only be submerged for about 6 hours. It then needs to dry the pressure sensor in order to give correct depth readings. Wiring interface The tables below shows the pinning of the D1 interface connectors. Dimensions Datasheet Datasheet","title":"Locator-D1"},{"location":"underwater-gps/locators/locator-d1/#locator-d1","text":"Buy Locator-D1 here!","title":"Locator-D1"},{"location":"underwater-gps/locators/locator-d1/#description","text":"The Locator-D1 carries its own depth sensor and can therefore operate fully stand-alone and independent of the device you want to position. Warning The Locator-D1 can only be submerged for about 6 hours. It then needs to dry the pressure sensor in order to give correct depth readings.","title":"Description"},{"location":"underwater-gps/locators/locator-d1/#wiring-interface","text":"The tables below shows the pinning of the D1 interface connectors.","title":"Wiring interface"},{"location":"underwater-gps/locators/locator-d1/#dimensions","text":"","title":"Dimensions"},{"location":"underwater-gps/locators/locator-d1/#datasheet","text":"Datasheet","title":"Datasheet"},{"location":"underwater-gps/locators/locator-u1/","text":"Locator-U1 Buy Locator-U1 here! Description The Locator-U1 is a battery-powered, digital hydroacoustic locator device. It includes an internal GPS-based time-sync module, eliminating the need for a tether. This makes it ideal for divers, ROVs lacking convenient power sources, or other underwater applications. Before deployment, the Locator-U1 must obtain a GPS lock. The integrated status LED indicates the lock status. Once locked, the Locator-U1 can operate for around 6 hours before it needs to resync with GPS. A rotary switch is located inside the cap, allowing you to select the channel on which the Locator transmits. The same channel must be set in the Water Linked Underwater GPS GUI. Each side of the Locator has three M3 mounting holes, and a standard bracket is included. Charging The Locator-U1 has an internal rechargeable battery. Use the included USB-C cable and a 5\u202fV / 2\u202fA (or higher) wall adapter to charge it. 1) Insert the USB-C cable Plug one end of the cable into the Locator-U1\u2019s charging port. 2) Connect to a suitable power source Attach the other end of the cable to a wall adapter providing at least 2\u202fA. Avoid charging from a computer USB port. 3) Charge for 7 hours Leave the Locator-U1 connected for a full 7 hours to ensure a complete charge. You can then disconnect the cable and use the Locator-U1. LED Behavior While Charging When the Locator-U1 is connected to a charger, the LED does not indicate charging progress. You may see: 1) Blinking green LED The Locator-U1 is powered on and functioning normally (such as searching for GPS). This does not reflect charging status. 2) No LED (off) The battery is too low to power on, but the device is still charging. Once it has enough power, the LED will start blinking. 3) Solid green LED The Locator-U1 is powered on and has a GPS lock (see LED Signals ). This does not mean it is fully charged. Keep charging for the full 7-hour period. Warning Do not charge the Locator-U1 using a computer USB port. Powering On and Off To power on the Locator-U1, securely tighten the lid over the charging port. The LED will begin blinking to indicate that it is searching for a GPS lock. Once the LED stops blinking and becomes solid, the Locator-U1 has acquired a GPS lock and is ready for use. Ensure the O-ring on the lid is undamaged before submerging the device. To power off the Locator-U1, unscrew the back lid until the LED turns off. LED Signals No green light Power is off; the Locator-U1 is not ready for diving. Flashing green light (once per second) The Locator-U1 is searching for a GPS lock and is not ready to dive. Fixed green light The Locator-U1 has a GPS lock and is ready to dive. Flashing green light (slow) The Locator-U1 previously had a GPS lock but lost it. It is still ready to dive. Fast flashing green light (multiple times per second) Error indication. The Locator-U1 is not ready to dive. This often happens if the device has exceeded its dive time and the pressure sensor requires drying. Charging the Locator helps to dry the sensor more quickly. Warning The Locator-U1 can only be submerged for about 6 hours. It then requires time to dry the pressure sensor in order to provide accurate depth readings. Wiring Interface Since the Locator-U1 is battery powered, its only interface is the charging port, which is a standard USB-C connector. Included in Package Locator-U1 USB-C charging cable Mounting bracket Dimensions Datasheet Datasheet","title":"Locator-U1"},{"location":"underwater-gps/locators/locator-u1/#locator-u1","text":"Buy Locator-U1 here!","title":"Locator-U1"},{"location":"underwater-gps/locators/locator-u1/#description","text":"The Locator-U1 is a battery-powered, digital hydroacoustic locator device. It includes an internal GPS-based time-sync module, eliminating the need for a tether. This makes it ideal for divers, ROVs lacking convenient power sources, or other underwater applications. Before deployment, the Locator-U1 must obtain a GPS lock. The integrated status LED indicates the lock status. Once locked, the Locator-U1 can operate for around 6 hours before it needs to resync with GPS. A rotary switch is located inside the cap, allowing you to select the channel on which the Locator transmits. The same channel must be set in the Water Linked Underwater GPS GUI. Each side of the Locator has three M3 mounting holes, and a standard bracket is included.","title":"Description"},{"location":"underwater-gps/locators/locator-u1/#charging","text":"The Locator-U1 has an internal rechargeable battery. Use the included USB-C cable and a 5\u202fV / 2\u202fA (or higher) wall adapter to charge it. 1) Insert the USB-C cable Plug one end of the cable into the Locator-U1\u2019s charging port. 2) Connect to a suitable power source Attach the other end of the cable to a wall adapter providing at least 2\u202fA. Avoid charging from a computer USB port. 3) Charge for 7 hours Leave the Locator-U1 connected for a full 7 hours to ensure a complete charge. You can then disconnect the cable and use the Locator-U1.","title":"Charging"},{"location":"underwater-gps/locators/locator-u1/#led-behavior-while-charging","text":"When the Locator-U1 is connected to a charger, the LED does not indicate charging progress. You may see: 1) Blinking green LED The Locator-U1 is powered on and functioning normally (such as searching for GPS). This does not reflect charging status. 2) No LED (off) The battery is too low to power on, but the device is still charging. Once it has enough power, the LED will start blinking. 3) Solid green LED The Locator-U1 is powered on and has a GPS lock (see LED Signals ). This does not mean it is fully charged. Keep charging for the full 7-hour period. Warning Do not charge the Locator-U1 using a computer USB port.","title":"LED Behavior While Charging"},{"location":"underwater-gps/locators/locator-u1/#powering-on-and-off","text":"To power on the Locator-U1, securely tighten the lid over the charging port. The LED will begin blinking to indicate that it is searching for a GPS lock. Once the LED stops blinking and becomes solid, the Locator-U1 has acquired a GPS lock and is ready for use. Ensure the O-ring on the lid is undamaged before submerging the device. To power off the Locator-U1, unscrew the back lid until the LED turns off.","title":"Powering On and Off"},{"location":"underwater-gps/locators/locator-u1/#led-signals","text":"No green light Power is off; the Locator-U1 is not ready for diving. Flashing green light (once per second) The Locator-U1 is searching for a GPS lock and is not ready to dive. Fixed green light The Locator-U1 has a GPS lock and is ready to dive. Flashing green light (slow) The Locator-U1 previously had a GPS lock but lost it. It is still ready to dive. Fast flashing green light (multiple times per second) Error indication. The Locator-U1 is not ready to dive. This often happens if the device has exceeded its dive time and the pressure sensor requires drying. Charging the Locator helps to dry the sensor more quickly. Warning The Locator-U1 can only be submerged for about 6 hours. It then requires time to dry the pressure sensor in order to provide accurate depth readings.","title":"LED Signals"},{"location":"underwater-gps/locators/locator-u1/#wiring-interface","text":"Since the Locator-U1 is battery powered, its only interface is the charging port, which is a standard USB-C connector.","title":"Wiring Interface"},{"location":"underwater-gps/locators/locator-u1/#included-in-package","text":"Locator-U1 USB-C charging cable Mounting bracket","title":"Included in Package"},{"location":"underwater-gps/locators/locator-u1/#dimensions","text":"","title":"Dimensions"},{"location":"underwater-gps/locators/locator-u1/#datasheet","text":"Datasheet","title":"Datasheet"}]}