
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://waterlinked.github.io/dvl/bluerov-integration-dvl-ugps/">
      
      <link rel="icon" href="../../img/favicon_water_linked.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.2.0">
    
    
      
        <title>DVL with UGPS for BlueROV2 - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fe914879.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ba0d045b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font-family:"Open Sans";--md-code-font-family:""}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#optimizing-performance-when-concurrently-using-our-dvl-and-ugps-systems" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../../img/waterlinked_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DVL with UGPS for BlueROV2
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/waterlinked/waterlinked.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../../img/waterlinked_logo.png" alt="logo">

    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/waterlinked/waterlinked.github.io/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Underwater GPS
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Underwater GPS" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Underwater GPS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      <label class="md-nav__link" for="__nav_2_1">
        G2
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="G2" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          G2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/reference-frames/" class="md-nav__link">
        Reference frames
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4" type="checkbox" id="__nav_2_1_4" >
      
      <label class="md-nav__link" for="__nav_2_1_4">
        Components
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Components" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4_1" type="checkbox" id="__nav_2_1_4_1" >
      
      <label class="md-nav__link" for="__nav_2_1_4_1">
        Topside
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Topside" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_4_1">
          <span class="md-nav__icon md-icon"></span>
          Topside
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/hardware/" class="md-nav__link">
        Hardware
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/power-supply/" class="md-nav__link">
        Power supply
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/network-settings/" class="md-nav__link">
        Network settings
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4_2" type="checkbox" id="__nav_2_1_4_2" >
      
      <label class="md-nav__link" for="__nav_2_1_4_2">
        Baseline
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Baseline" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_4_2">
          <span class="md-nav__icon md-icon"></span>
          Baseline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/antenna/" class="md-nav__link">
        Antenna
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/receiver-d1/" class="md-nav__link">
        Receiver-D1
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_4_3" type="checkbox" id="__nav_2_1_4_3" >
      
      <label class="md-nav__link" for="__nav_2_1_4_3">
        Locator
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Locator" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_4_3">
          <span class="md-nav__icon md-icon"></span>
          Locator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/locators/locator-a1/" class="md-nav__link">
        Locator-A1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/locators/locator-d1/" class="md-nav__link">
        Locator-D1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/locators/locator-u1/" class="md-nav__link">
        Locator-U1
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_5" type="checkbox" id="__nav_2_1_5" >
      
      <label class="md-nav__link" for="__nav_2_1_5">
        GUI
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="GUI" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          GUI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/gui/position/" class="md-nav__link">
        Position
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/gui/receivers/" class="md-nav__link">
        Baseline
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/gui/settings/" class="md-nav__link">
        Settings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/gui/diagnostic/" class="md-nav__link">
        Diagnostic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/gui/diagnostic-report/" class="md-nav__link">
        Diagnostic report
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/gui/warnings/" class="md-nav__link">
        Warnings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/gui/demo-gui/" class="md-nav__link">
        Demo
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_6" type="checkbox" id="__nav_2_1_6" >
      
      <label class="md-nav__link" for="__nav_2_1_6">
        Integration
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Integration" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_6">
          <span class="md-nav__icon md-icon"></span>
          Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/integration/api/" class="md-nav__link">
        API
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_6_2" type="checkbox" id="__nav_2_1_6_2" >
      
      <label class="md-nav__link" for="__nav_2_1_6_2">
        BlueROV2 integration
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="BlueROV2 integration" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_1_6_2">
          <span class="md-nav__icon md-icon"></span>
          BlueROV2 integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/integration/bluerov-integration/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/integration/bluerov-integration-a1/" class="md-nav__link">
        BlueROV2 & Locator-A1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/integration/bluerov-integration-u1/" class="md-nav__link">
        BlueROV2 & Locator-U1
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/sw-update/" class="md-nav__link">
        Software updates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../underwater-gps/ugps-faq/" class="md-nav__link">
        Underwater GPS FAQ
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        Explorer Kit (retired)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Explorer Kit (retired)" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Explorer Kit (retired)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/warnings/" class="md-nav__link">
        Warnings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/power-supply/" class="md-nav__link">
        Power supply
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/network-settings/" class="md-nav__link">
        Network settings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/hardware/" class="md-nav__link">
        Hardware
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../master-d1/" class="md-nav__link">
        Master-D1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/receiver-d1/" class="md-nav__link">
        Receiver-D1
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_9" type="checkbox" id="__nav_2_2_9" >
      
      <label class="md-nav__link" for="__nav_2_2_9">
        Locators
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Locators" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_9">
          <span class="md-nav__icon md-icon"></span>
          Locators
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/locators/locator-a1/" class="md-nav__link">
        Locator-A1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/locators/locator-d1/" class="md-nav__link">
        Locator-D1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/locators/locator-s1/" class="md-nav__link">
        Locator-S1 (obsolete)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/locators/locator-u1/" class="md-nav__link">
        Locator-U1
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_10" type="checkbox" id="__nav_2_2_10" >
      
      <label class="md-nav__link" for="__nav_2_2_10">
        GUI
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="GUI" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_10">
          <span class="md-nav__icon md-icon"></span>
          GUI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/gui/position/" class="md-nav__link">
        Position
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/gui/receivers/" class="md-nav__link">
        Receivers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/gui/settings/" class="md-nav__link">
        Settings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/gui/diagnostic/" class="md-nav__link">
        Diagnostic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/gui/api/" class="md-nav__link">
        API
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../explorer-kit/upgrader/" class="md-nav__link">
        Software updates
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        DVL
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="DVL" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          DVL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../dvl-a50/" class="md-nav__link">
        DVL-A50 — Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../dvl-a125/" class="md-nav__link">
        DVL-A125 — Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../interfaces/" class="md-nav__link">
        Interfaces
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../networking/" class="md-nav__link">
        Networking
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../axes/" class="md-nav__link">
        Axes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../dvl-protocol/" class="md-nav__link">
        Protocol
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_7" type="checkbox" id="__nav_3_7" >
      
      <label class="md-nav__link" for="__nav_3_7">
        GUI
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="GUI" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_7">
          <span class="md-nav__icon md-icon"></span>
          GUI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gui/dashboard/" class="md-nav__link">
        Dashboard
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gui/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gui/diagnostic-report/" class="md-nav__link">
        Diagnostic report
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gui/demo-gui/" class="md-nav__link">
        Demo GUI
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../dead-reckoning/" class="md-nav__link">
        Dead reckoning
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_9" type="checkbox" id="__nav_3_9" checked>
      
      <label class="md-nav__link" for="__nav_3_9">
        Integration
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Integration" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_9">
          <span class="md-nav__icon md-icon"></span>
          Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../bluerov-integration/" class="md-nav__link">
        DVL for BlueROV2
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          DVL with UGPS for BlueROV2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        DVL with UGPS for BlueROV2
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#optimizing-performance-when-concurrently-using-our-dvl-and-ugps-systems" class="md-nav__link">
    Optimizing Performance when concurrently using our DVL and UGPS Systems
  </a>
  
    <nav class="md-nav" aria-label="Optimizing Performance when concurrently using our DVL and UGPS Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capabilities-of-the-dvl-as-a-standalone-system" class="md-nav__link">
    Capabilities of the DVL as a Standalone System
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capabilities-of-the-underwater-gps-as-a-standalone-system" class="md-nav__link">
    Capabilities of the Underwater GPS as a Standalone System
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enhanced-functionality-with-combined-dvl-and-ugps-integration" class="md-nav__link">
    Enhanced Functionality with Combined DVL and UGPS Integration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode-dvlugps-fusing-the-data-of-underwater-gps-and-dvl-for-a-position-estimate-of-the-bluerov" class="md-nav__link">
    Mode "DVL+UGPS": Fusing the data of Underwater GPS and DVL for a position estimate of the BlueROV
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-mode-dvl-only-how-to-base-the-rov-position-estimate-only-on-the-dvl-while-the-underwater-gps-is-running" class="md-nav__link">
    Alternative mode "DVL only": How to base the ROV position estimate only on the DVL while the Underwater GPS is running
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq-for-sensor-fusion-of-underwater-gps-and-dvl" class="md-nav__link">
    FAQ for sensor fusion of Underwater GPS and DVL
  </a>
  
    <nav class="md-nav" aria-label="FAQ for sensor fusion of Underwater GPS and DVL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-do-i-start-an-autonomous-mission" class="md-nav__link">
    How do I start an autonomous mission?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#which-mode-am-i-currently-using-is-underwater-gps-input-enabled-for-sensor-fusion-or-not" class="md-nav__link">
    Which mode am I currently using? Is Underwater GPS input enabled for sensor fusion or not?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-rov-moves-back-and-forth-in-position-hold-mode-what-is-wrong" class="md-nav__link">
    The ROV moves back and forth in position hold mode. What is wrong?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-the-sensor-fusion-work" class="md-nav__link">
    How does the sensor fusion work?
  </a>
  
    <nav class="md-nav" aria-label="How does the sensor fusion work?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-the-blueos-water-linked-dvl-extension-interacts-with-the-autopilot" class="md-nav__link">
    How the BlueOS Water Linked DVL extension interacts with the autopilot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-the-blueos-water-linked-ugps-extension-interacts-with-the-autopilot" class="md-nav__link">
    How the BlueOS Water Linked UGPS extension interacts with the autopilot
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../sw-update/" class="md-nav__link">
        Software updates
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../dvl-troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        DVL FAQ
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Modem
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Modem" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Modem
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      <label class="md-nav__link" for="__nav_4_1">
        Modem-M64 (retired)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Modem-M64 (retired)" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Modem-M64 (retired)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../modem-m64/modem-m64/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../modem-m64/modem-m64-protocol/" class="md-nav__link">
        Protocol
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        Modem-M16
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Modem-M16" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Modem-M16
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../modem-m16/modem-m16/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../modem-m16/modem-m16-uart-interface/" class="md-nav__link">
        Serial Interface
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../modem-m16/modem-m16-faq/" class="md-nav__link">
        M16 FAQ
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#optimizing-performance-when-concurrently-using-our-dvl-and-ugps-systems" class="md-nav__link">
    Optimizing Performance when concurrently using our DVL and UGPS Systems
  </a>
  
    <nav class="md-nav" aria-label="Optimizing Performance when concurrently using our DVL and UGPS Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capabilities-of-the-dvl-as-a-standalone-system" class="md-nav__link">
    Capabilities of the DVL as a Standalone System
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capabilities-of-the-underwater-gps-as-a-standalone-system" class="md-nav__link">
    Capabilities of the Underwater GPS as a Standalone System
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enhanced-functionality-with-combined-dvl-and-ugps-integration" class="md-nav__link">
    Enhanced Functionality with Combined DVL and UGPS Integration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode-dvlugps-fusing-the-data-of-underwater-gps-and-dvl-for-a-position-estimate-of-the-bluerov" class="md-nav__link">
    Mode "DVL+UGPS": Fusing the data of Underwater GPS and DVL for a position estimate of the BlueROV
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-mode-dvl-only-how-to-base-the-rov-position-estimate-only-on-the-dvl-while-the-underwater-gps-is-running" class="md-nav__link">
    Alternative mode "DVL only": How to base the ROV position estimate only on the DVL while the Underwater GPS is running
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq-for-sensor-fusion-of-underwater-gps-and-dvl" class="md-nav__link">
    FAQ for sensor fusion of Underwater GPS and DVL
  </a>
  
    <nav class="md-nav" aria-label="FAQ for sensor fusion of Underwater GPS and DVL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-do-i-start-an-autonomous-mission" class="md-nav__link">
    How do I start an autonomous mission?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#which-mode-am-i-currently-using-is-underwater-gps-input-enabled-for-sensor-fusion-or-not" class="md-nav__link">
    Which mode am I currently using? Is Underwater GPS input enabled for sensor fusion or not?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-rov-moves-back-and-forth-in-position-hold-mode-what-is-wrong" class="md-nav__link">
    The ROV moves back and forth in position hold mode. What is wrong?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-does-the-sensor-fusion-work" class="md-nav__link">
    How does the sensor fusion work?
  </a>
  
    <nav class="md-nav" aria-label="How does the sensor fusion work?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-the-blueos-water-linked-dvl-extension-interacts-with-the-autopilot" class="md-nav__link">
    How the BlueOS Water Linked DVL extension interacts with the autopilot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-the-blueos-water-linked-ugps-extension-interacts-with-the-autopilot" class="md-nav__link">
    How the BlueOS Water Linked UGPS extension interacts with the autopilot
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/waterlinked/waterlinked.github.io/edit/master/docs/dvl/bluerov-integration-dvl-ugps.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>DVL with UGPS for BlueROV2</h1>
                
                <h2 id="optimizing-performance-when-concurrently-using-our-dvl-and-ugps-systems">Optimizing Performance when concurrently using our DVL and UGPS Systems</h2>
<h3 id="capabilities-of-the-dvl-as-a-standalone-system">Capabilities of the DVL as a Standalone System</h3>
<p>The Water Linked DVL can provide accurate velocities relative to the seabed. It has a relatively high update rate and dynamic.
For the calculation of an absolute position, the velocities have to be integrated over time with the help of inertial measurement unit (IMU) data.
Furthermore, the user has to specify a starting position of this dead-reckoning-algorithm. Alternatively a normal GPS can be used to initialize the position prior to a dive.</p>
<p>One advantage of using a DVL only is that no infrastructure outside the ROV (such as antennas, beacons, etc.) is needed.
As a downside, small errors in sensor values accumulate over time and the position estimate drifts from the actual position.
A typical use case for the DVL is station keeping even in water currents. It also helps to track the approximate ROV position on a map and enables simple autonomous missions.</p>
<h3 id="capabilities-of-the-underwater-gps-as-a-standalone-system">Capabilities of the Underwater GPS as a Standalone System</h3>
<p>The Water Linked Underwater GPS is able to provide an absolute position below water. It is based on the combination of a standard GPS to measure the Topside position and the Short Baseline (SBL) acoustic positioning to determine the ROV/locator position relative to the Topside.</p>
<p>The characteristic of this combined position estimate is that it is global, with little to no drift over time under the right conditions. The update rate is in general lower compared to the DVL. A typical use case for using the Underwater GPS by itself is to visualize the ROV position on a map for manual control and finding a specific geolocation below water.</p>
<h3 id="enhanced-functionality-with-combined-dvl-and-ugps-integration">Enhanced Functionality with Combined DVL and UGPS Integration</h3>
<p>When both sensor types are combined in a good manner they can compensate each other's weak sides. For instance the UGPS helps to compensate for the position drift of the DVL over time. The DVL on the other hand increases the update rate of the position, which is necessary for better control. This is particularly useful if you want to use the positioning not only for visualization during manual operation or position holding but longer autonomous missions (e.g. waypoint navigation). Below section "Mode DVL+UGPS" describes how to enable this in the BlueROV control system.</p>
<h2 id="mode-dvlugps-fusing-the-data-of-underwater-gps-and-dvl-for-a-position-estimate-of-the-bluerov">Mode "DVL+UGPS": Fusing the data of Underwater GPS and DVL for a position estimate of the BlueROV</h2>
<p>The BlueROV uses a highly-customizable autopilot <a href="https://www.ardusub.com/">Ardusub</a>. One part of that autopilot is an Extended Kalman filter, which is able to combine inputs from all types of sensors (gyroscope, accelerometer, compass, pressure sensor, GPS, DVL, etc.) to calculate a position estimate. This is then used to either simply show the position on a map in manual mode or as part of a feedback loop to actively control the ROV. This data fusion algorithm is not part of a Water Linked product but is executed in the BlueROV control system. So the user is in full control of the parameters and used algorithm.</p>
<p>Before successful sensor fusion of Underwater GPS and DVL the following conditions must be met:</p>
<ul>
<li>A BlueROV running BlueOS with a version 1.1.0 (stable) or newer.</li>
<li>The DVL is installed, configured and tested successfully. Guides can be found <a href="../bluerov-integration/">here</a> and on the <a href="https://bluerobotics.com/learn/dvl-a50-integration/">Blue Robotics website</a></li>
<li>Make sure you are running version 1.0.7 or newer of the <a href="https://github.com/bluerobotics/BlueOS-Water-Linked-DVL">BlueOS Water Linked DVL extension</a>.
  The extension version can be checked / updated in BlueOS by going to Extensions &gt; Installed. The version is shown next to the extension name, see below figure.</li>
</ul>
<p><img alt="bluerov2_blueos_installed_extensions_ugps_dvl_version_marked" src="../../img/bluerov2_blueos_installed_extensions_ugps_dvl_version_marked.png" /></p>
<ul>
<li>The Underwater GPS is installed, configured and tested successfully. The latest UGPS integration-guide can be found <a href="../../underwater-gps/integration/bluerov-integration/">here</a>.</li>
<li>Make sure you are running version 1.0.7 or newer of the <a href="https://github.com/waterlinked/blueos-ugps-extension">BlueOS Water Linked UGPS extension</a>.</li>
<li>The accelerometer, gyroscope, compass and pressure sensor must be calibrated: Calibration of all sensors can be performed from QGroundControl. Detailed steps are described in the <a href="https://bluerobotics.com/learn/bluerov2-software-setup/#sensor-calibration">BlueROV Software Setup</a></li>
<li>Make sure that the compass calibration was successful by comparing the ROV orientation shown in the map in QGroundControl to the actual ROV orientation. Land-marks like a coast-line or an analogue compass can help.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you want to use the position estimate for <em>control</em> of the ROV and the UGPS Topside is on land, it is highly recommended setting up the Underwater GPS to use static position and static heading mode.  Alternatively when the UGPS Topside position is not static (on a boat or similar) you need to input heading and position data from an external GPS compass. <a href="../../underwater-gps/gui/settings/#topside-setup">Details can be found here</a>.</p>
<p>If you don't follow this advice, the position provided by the Underwater GPS will have more noise ("jump" too much) and also drift over time. This might cause the position hold mode to not work properly.</p>
<p>The Underwater GPS together with the BlueOS UGPS extension provide a standard deviation of the global position to the autopilot and the Kalman filter. The Kalman filter uses this standard deviation to weight the provided position in relation to other sensor inputs. The standard deviation is currently optimized for static position and static heading mode.</p>
</div>
<p>The steps to enable sensor fusion are:</p>
<ul>
<li>To enable fusion of Underwater GPS and DVL, enable both the "Water Linked DVL"-extension and "Water Linked UGPS"-extension in the extensions manager. You see that they are running when an uptime is shown.</li>
</ul>
<p><img alt="bluerov2_blueos_installed_extensions_ugps_dvl_running_marked" src="../../img/bluerov2_blueos_installed_extensions_ugps_dvl_running_marked.png" /></p>
<ul>
<li>Open the interface of the DVL extension and click the button "Load parameters for DVL+UGPS". This will set parameters for the Kalman filter to consider both sensors. Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV.</li>
</ul>
<p><img alt="bluerov2_blueos_dvl_extension_buttons_marked" src="../../img/bluerov2_blueos_dvl_extension_buttons_marked.png" /></p>
<ul>
<li>Restart the autopilot for the parameter changes to take effect. It is not necessary to reboot BlueOS.</li>
</ul>
<p><img alt="bluerov2_blueos_restart_autopilot_marked" src="../../img/bluerov2_blueos_restart_autopilot_marked.png" /></p>
<ul>
<li>If both Underwater GPS and DVL are connected, it is not necessary to set the vehicle position manually in the DVL extension.</li>
</ul>
<p>Now both sensors should be considered for the position estimate of the ROV. You can test this in a simple way by switching the ROV to position hold mode around close (e.g. 3 m) to the UGPS-antenna and in sight. The ROV should stand still. When you now slowly turn the UGPS antenna, the ROV should follow your rotation.</p>
<h2 id="alternative-mode-dvl-only-how-to-base-the-rov-position-estimate-only-on-the-dvl-while-the-underwater-gps-is-running">Alternative mode "DVL only": How to base the ROV position estimate only on the DVL while the Underwater GPS is running</h2>
<p>This mode can be useful when you experience issues with sensor fusion (Mode "DVL+UGPS" above) or not all the described conditions in above section are met. Otherwise, we recommend using Mode "DVL+UGPS".</p>
<p>In this configuration the BlueROV will base its position estimate <em>updates</em> on velocity input from the DVL as well as accelerometer, gyroscope, compass and pressure sensor but not the Underwater GPS. Although the Underwater GPS is connected and running it will only be used to <em>initialize</em> the global ROV position at the beginning. QGroundControl (or the new Cockpit) will show the ROV position estimate based on the DVL only while the <a href="../../underwater-gps/gui/position/">Underwater GPS GUI</a> will show the position based on the Underwater GPS.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The setup procedure below is very similar to when you only use the DVL without a running Underwater GPS. That case is described <a href="../bluerov-integration/#software">here</a>.</p>
</div>
<ul>
<li>Enable both the "Water Linked DVL"-extension and "Water Linked UGPS"-extension in the extensions manager. You see that they are running when an uptime is shown. Make sure you use the latest versions of both extensions.</li>
</ul>
<p><img alt="bluerov2_blueos_installed_extensions_ugps_dvl_running_marked" src="../../img/bluerov2_blueos_installed_extensions_ugps_dvl_running_marked.png" /></p>
<ul>
<li>Open the interface of the DVL-extension and click the button "Load parameters for DVL". This will set parameters for the Kalman filter to ignore the Underwater GPS input. Those parameters are persistent over reboots, which means that this button only needs to be pressed once and not every time you restart the ROV.</li>
</ul>
<p><img alt="bluerov2_blueos_dvl_extension_dvl_ugps_button_marked" src="../../img/bluerov2_blueos_dvl_extension_buttons_marked.png" /></p>
<ul>
<li>Restart the autopilot for the parameter changes to take effect. It is not necessary to reboot BlueOS.</li>
</ul>
<p><img alt="bluerov2_blueos_restart_autopilot_marked" src="../../img/bluerov2_blueos_restart_autopilot_marked.png" /></p>
<ul>
<li>If both Underwater GPS and DVL are connected, it is not necessary to set the vehicle position manually in the DVL extension.</li>
</ul>
<h2 id="faq-for-sensor-fusion-of-underwater-gps-and-dvl">FAQ for sensor fusion of Underwater GPS and DVL</h2>
<h3 id="how-do-i-start-an-autonomous-mission">How do I start an autonomous mission?</h3>
<p>Blue Robotics wrote a guide on <a href="https://bluerobotics.com/learn/dvl-a50-integration/#auto-mode">how to start an autonomous mission with the DVL only</a>. The steps are the same when you use DVL and Underwater GPS together after you followed above guide for Mode "DVL+UGPS".</p>
<p>At the time of writing (November 2024) QGroundControl is still more suited for advanced usage like missions compared to the new Cockpit.</p>
<h3 id="which-mode-am-i-currently-using-is-underwater-gps-input-enabled-for-sensor-fusion-or-not">Which mode am I currently using? Is Underwater GPS input enabled for sensor fusion or not?</h3>
<p>You can check if the correct parameters are set by navigating to "Autopilot Parameters" in BlueOS. It shows a searchable list of all currently set parameters.</p>
<p>Below table lists both default values of the parameters for two Ardusub versions and which values the DVL extension sets when you click on the respective buttons. The parameter set by the Underwater GPS extension is listed, too.</p>
<p>Parameters can be "not set" which is shown as an empty cell in the table.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Ardusub 4.5.0 default</th>
<th>Ardusub 4.1.2 default</th>
<th>DVL Extension, Mode "DVL+UGPS"</th>
<th>DVL Extension, Mode "DVL only"</th>
<th>UGPS extension</th>
</tr>
</thead>
<tbody>
<tr>
<td>AHRS_EKF_TYPE</td>
<td>3 ekf3</td>
<td>3 ekf3</td>
<td>3 ekf3</td>
<td>3 ekf3</td>
<td></td>
</tr>
<tr>
<td>EK2_ENABLE</td>
<td></td>
<td>0 disabled</td>
<td>0 disabled</td>
<td>0 disabled</td>
<td></td>
</tr>
<tr>
<td>EK3_ENABLE</td>
<td>1 enabled</td>
<td>1 enabled</td>
<td>1 enabled</td>
<td>1 enabled</td>
<td></td>
</tr>
<tr>
<td>VISO_TYPE</td>
<td>1 mavlink</td>
<td>0 none</td>
<td>1 mavlink</td>
<td>1 mavlink</td>
<td></td>
</tr>
<tr>
<td>RNGFND1_TYPE</td>
<td>10 mavlink</td>
<td>10 mavlink</td>
<td>10 mavlink</td>
<td>10 mavlink</td>
<td></td>
</tr>
<tr>
<td>EK3_GPS_TYPE</td>
<td></td>
<td></td>
<td>0 v=3d-pos=2d</td>
<td>3 no-gps</td>
<td></td>
</tr>
<tr>
<td>EK3_SRC1_POSXY</td>
<td>3 gps</td>
<td>3 gps</td>
<td>3 gps</td>
<td>6 external-nav</td>
<td></td>
</tr>
<tr>
<td>EK3_SRC1_VELXY</td>
<td>3 gps</td>
<td>3 gps</td>
<td>6 external-nav</td>
<td>6 external-nav</td>
<td></td>
</tr>
<tr>
<td>EK3_SRC1_POSZ</td>
<td>1 baro</td>
<td>1 baro</td>
<td>1 baro</td>
<td>1 baro</td>
<td></td>
</tr>
<tr>
<td>GPS_TYPE</td>
<td>1 auto</td>
<td>1 auto</td>
<td></td>
<td></td>
<td>14 mavlink</td>
</tr>
</tbody>
</table>
<p>Documentation for Ardusub parameters can be found <a href="https://ardupilot.org/dev/docs/mavlink-get-set-params.html">here</a>.</p>
<p>Some parameters in Ardusub require a reboot of the autopilot to take effect while others take effect immediately. If in doubt, reboot the autopilot.</p>
<h3 id="the-rov-moves-back-and-forth-in-position-hold-mode-what-is-wrong">The ROV moves back and forth in position hold mode. What is wrong?</h3>
<p>When the ROV holds its position well in mode "DVL only" and starts moving back and forth in mode "DVL+UGPS" this is due to more than expected noise of the UGPS position. Make sure to use static position and heading of the Underwater GPS Topside for best results.</p>
<h3 id="how-does-the-sensor-fusion-work">How does the sensor fusion work?</h3>
<p>This section is for advanced users and developers who try to understand what happens behind the scenes. It contains links to documentation of the relevant open source projects and describes how Water Linked products interact.</p>
<ul>
<li>The DVL and UGPS extensions are sending messages following the <a href="https://mavlink.io/en/messages/ardupilotmega.html">mavlink-protocol</a> to the autopilot, e.g. the message GPS_INPUT.</li>
<li>The ROV-specific autopilot is called <a href="https://www.ardusub.com/">Ardusub</a>, which is part of a larger project <a href="https://ardupilot.org">Ardupilot</a></li>
<li>The extended Kalman filter is described in the <a href="https://ardupilot.org/dev/docs/extended-kalman-filter.html">Ardupilot documentation</a>. The EKF3 implementation is used by default.</li>
<li>In the current version of Ardusub together with the navigator flight controller only one EKF-lane is used.</li>
</ul>
<h4 id="how-the-blueos-water-linked-dvl-extension-interacts-with-the-autopilot">How the BlueOS Water Linked DVL extension interacts with the autopilot</h4>
<ul>
<li>This figure illustrates which events trigger which function calls and which mavlink messages:</li>
</ul>
<p><img alt="bluerov2_blueos_dvl_extension_messages" src="../../img/bluerov2_blueos_dvl_extension_messages.png" /></p>
<ul>
<li>
<p>When the user sets the vehicle location on the extension map the first time, the origin of the autopilot global position estimate is set (SET_GPS_GLOBAL_ORIGIN). When the latter is already set, the position estimate is updated with GLOBAL_VISION_POSITION_ESTIMATE.</p>
</li>
<li>
<p>The main input from the DVL to the autopilot is the mavlink message VISION_POSITION_DELTA. It contains the change of position and attitude since the last message in body frame of the ROV together with the time interval since the last measurement. This corresponds directly to velocities and angular rates. The figure of merit (FOM) provided by the DVL is scaled to a confidence value in percent.</p>
</li>
<li>
<p>The DVL-internal dead-reckoning exposed through the position_local-TCP-packet is currently not used on a BlueROV. A function in the extension is implemented, but it is disabled. So GLOBAL_VISION_POSITION_ESTIMATE messages are sent based on DVL-measurements.</p>
</li>
<li>
<p>The attitude measured by the DVL-IMU (current_attitude) is sent in the VISION_POSITION_DELTA-message. The attitude values sent in VISION_POSITION_DELTA are currently not considered by the Ardusub autopilot.</p>
</li>
<li>
<p>More details can be found in the source code in the <a href="https://github.com/bluerobotics/BlueOS-Water-Linked-DVL">GitHub repository</a>.</p>
</li>
</ul>
<h4 id="how-the-blueos-water-linked-ugps-extension-interacts-with-the-autopilot">How the BlueOS Water Linked UGPS extension interacts with the autopilot</h4>
<p>This is an overview figure of the sent mavlink messages:</p>
<p><img alt="bluerov2_blueos_ugps_extension_messages" src="https://raw.githubusercontent.com/waterlinked/blueos-ugps-extension/refs/heads/master/docs/ugps_extension_message_flow.png" /></p>
<ul>
<li>The main input from the Underwater GPS to the autopilot is the mavlink message GPS_INPUT.</li>
<li>The <a href="https://github.com/waterlinked/blueos-ugps-extension">GitHub README</a> provides more details.</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../bluerov-integration/" class="md-footer__link md-footer__link--prev" aria-label="Previous: DVL for BlueROV2" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              DVL for BlueROV2
            </div>
          </div>
        </a>
      
      
        
        <a href="../sw-update/" class="md-footer__link md-footer__link--next" aria-label="Next: Software updates" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Software updates
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            © Water Linked 2018-2024
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/waterlinked/" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.facebook.com/waterlinked/" target="_blank" rel="noopener" title="www.facebook.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/channel/UCZFmOcapjyWgEnS_l6JgxQg/" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.53c85856.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.716f8af4.min.js"></script>
      
    
  </body>
</html>